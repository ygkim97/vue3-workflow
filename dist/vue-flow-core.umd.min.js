!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).VueFlowCore={},e.Vue)}(this,(function(e,t){"use strict";function n(e){return!!t.getCurrentScope()&&(t.onScopeDispose(e),!0)}function o(e){return"function"==typeof e?e():t.unref(e)}const r="undefined"!=typeof window&&"undefined"!=typeof document,i=Object.prototype.toString,a=()=>{};const l=e=>e();function u(e,t=!1,n="Timeout"){return new Promise(((o,r)=>{t?setTimeout((()=>r(n)),e):setTimeout(o,e)}))}function s(e,n,o={}){const{eventFilter:r=l,...i}=o;return t.watch(e,(a=r,u=n,function(...e){return new Promise(((t,n)=>{Promise.resolve(a((()=>u.apply(this,e)),{fn:u,thisArg:this,args:e})).then(t).catch(n)}))}),i);var a,u}function c(e,n,o={}){const{eventFilter:r,...i}=o,{eventFilter:a,pause:u,resume:c,isActive:d}=function(e=l){const n=t.ref(!0);return{isActive:t.readonly(n),pause:function(){n.value=!1},resume:function(){n.value=!0},eventFilter:(...t)=>{n.value&&e(...t)}}}(r);return{stop:s(e,n,{...i,eventFilter:a}),pause:u,resume:c,isActive:d}}function d(e,n={}){if(!t.isRef(e))return t.toRefs(e);const r=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const i in e.value)r[i]=t.customRef((()=>({get:()=>e.value[i],set(t){var r;if(null==(r=o(n.replaceRef))||r)if(Array.isArray(e.value)){const n=[...e.value];n[i]=t,e.value=n}else{const n={...e.value,[i]:t};Object.setPrototypeOf(n,Object.getPrototypeOf(e.value)),e.value=n}else e.value[i]=t}})));return r}function f(e,n=!1){function r(r,{flush:i="sync",deep:a=!1,timeout:l,throwOnTimeout:s}={}){let c=null;const d=[new Promise((o=>{c=t.watch(e,(e=>{r(e)!==n&&(null==c||c(),o(e))}),{flush:i,deep:a,immediate:!0})}))];return null!=l&&d.push(u(l,s).then((()=>o(e))).finally((()=>null==c?void 0:c()))),Promise.race(d)}function i(i,a){if(!t.isRef(i))return r((e=>e===i),a);const{flush:l="sync",deep:s=!1,timeout:c,throwOnTimeout:d}=null!=a?a:{};let f=null;const h=[new Promise((o=>{f=t.watch([e,i],(([e,t])=>{n!==(e===t)&&(null==f||f(),o(e))}),{flush:l,deep:s,immediate:!0})}))];return null!=c&&h.push(u(c,d).then((()=>o(e))).finally((()=>(null==f||f(),o(e))))),Promise.race(h)}function a(e){return l(1,e)}function l(e=1,t){let n=-1;return r((()=>(n+=1,n>=e)),t)}if(Array.isArray(o(e))){return{toMatch:r,toContains:function(e,t){return r((t=>{const n=Array.from(t);return n.includes(e)||n.includes(o(e))}),t)},changed:a,changedTimes:l,get not(){return f(e,!n)}}}return{toMatch:r,toBe:i,toBeTruthy:function(e){return r((e=>Boolean(e)),e)},toBeNull:function(e){return i(null,e)},toBeNaN:function(e){return r(Number.isNaN,e)},toBeUndefined:function(e){return i(void 0,e)},changed:a,changedTimes:l,get not(){return f(e,!n)}}}function h(e){return f(e)}function p(e){var t;const n=o(e);return null!=(t=null==n?void 0:n.$el)?t:n}const v=r?window:void 0;function m(...e){let r,l,u,s;if("string"==typeof e[0]||Array.isArray(e[0])?([l,u,s]=e,r=v):[r,l,u,s]=e,!r)return a;Array.isArray(l)||(l=[l]),Array.isArray(u)||(u=[u]);const c=[],d=()=>{c.forEach((e=>e())),c.length=0},f=t.watch((()=>[p(r),o(s)]),(([e,t])=>{if(d(),!e)return;const n=(o=t,"[object Object]"===i.call(o)?{...t}:t);var o;c.push(...l.flatMap((t=>u.map((o=>((e,t,n,o)=>(e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)))(e,t,o,n))))))}),{immediate:!0,flush:"post"}),h=()=>{f(),d()};return n(h),h}function g(...e){let t,n,r={};3===e.length?(t=e[0],n=e[1],r=e[2]):2===e.length?"object"==typeof e[1]?(t=!0,n=e[0],r=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=v,eventName:a="keydown",passive:l=!1,dedupe:u=!1}=r,s="function"==typeof(c=t)?c:"string"==typeof c?e=>e.key===c:Array.isArray(c)?e=>c.includes(e.key):()=>!0;var c;return m(i,a,(e=>{e.repeat&&o(u)||s(e)&&n(e)}),l)}function y(e,n,o,r={}){var i,a,l;const{clone:u=!1,passive:s=!1,eventName:c,deep:d=!1,defaultValue:f,shouldEmit:h}=r,p=t.getCurrentInstance(),v=o||(null==p?void 0:p.emit)||(null==(i=null==p?void 0:p.$emit)?void 0:i.bind(p))||(null==(l=null==(a=null==p?void 0:p.proxy)?void 0:a.$emit)?void 0:l.bind(null==p?void 0:p.proxy));let m=c;n||(n="modelValue"),m=m||`update:${n.toString()}`;const g=e=>{return u?"function"==typeof u?u(e):(t=e,JSON.parse(JSON.stringify(t))):e;var t},y=()=>void 0!==e[n]?g(e[n]):f,w=e=>{h?h(e)&&v(m,e):v(m,e)};if(s){const o=y(),r=t.ref(o);let i=!1;return t.watch((()=>e[n]),(e=>{i||(i=!0,r.value=g(e),t.nextTick((()=>i=!1)))})),t.watch(r,(t=>{i||t===e[n]&&!d||w(t)}),{deep:d}),r}return t.computed({get:()=>y(),set(e){w(e)}})}var w={value:()=>{}};function b(){for(var e,t=0,n=arguments.length,o={};t<n;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new _(o)}function _(e){this._=e}function x(e,t){for(var n,o=0,r=e.length;o<r;++o)if((n=e[o]).name===t)return n.value}function k(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=w,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}_.prototype=b.prototype={constructor:_,on:function(e,t){var n,o,r=this._,i=(o=r,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!o.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),a=-1,l=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<l;)if(n=(e=i[a]).type)r[n]=k(r[n],e.name,t);else if(null==t)for(n in r)r[n]=k(r[n],e.name,null);return this}for(;++a<l;)if((n=(e=i[a]).type)&&(n=x(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new _(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,o,r=new Array(n),i=0;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(o=this._[e]).length;i<n;++i)o[i].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};var S="http://www.w3.org/1999/xhtml";const E={svg:"http://www.w3.org/2000/svg",xhtml:S,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function N(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),E.hasOwnProperty(t)?{space:E[t],local:e}:e}function C(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===S&&t.documentElement.namespaceURI===S?t.createElement(e):t.createElementNS(n,e)}}function M(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function B(e){var t=N(e);return(t.local?M:C)(t)}function P(){}function T(e){return null==e?P:function(){return this.querySelector(e)}}function $(){return[]}function I(e){return null==e?$:function(){return this.querySelectorAll(e)}}function z(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function A(e){return function(){return this.matches(e)}}function D(e){return function(t){return t.matches(e)}}var V=Array.prototype.find;function O(){return this.firstElementChild}var R=Array.prototype.filter;function L(){return Array.from(this.children)}function H(e){return new Array(e.length)}function F(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Y(e,t,n,o,r,i){for(var a,l=0,u=t.length,s=i.length;l<s;++l)(a=t[l])?(a.__data__=i[l],o[l]=a):n[l]=new F(e,i[l]);for(;l<u;++l)(a=t[l])&&(r[l]=a)}function G(e,t,n,o,r,i,a){var l,u,s,c=new Map,d=t.length,f=i.length,h=new Array(d);for(l=0;l<d;++l)(u=t[l])&&(h[l]=s=a.call(u,u.__data__,l,t)+"",c.has(s)?r[l]=u:c.set(s,u));for(l=0;l<f;++l)s=a.call(e,i[l],l,i)+"",(u=c.get(s))?(o[l]=u,u.__data__=i[l],c.delete(s)):n[l]=new F(e,i[l]);for(l=0;l<d;++l)(u=t[l])&&c.get(h[l])===u&&(r[l]=u)}function X(e){return e.__data__}function U(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function j(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function q(e){return function(){this.removeAttribute(e)}}function Z(e){return function(){this.removeAttributeNS(e.space,e.local)}}function K(e,t){return function(){this.setAttribute(e,t)}}function W(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Q(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function J(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ee(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function te(e){return function(){this.style.removeProperty(e)}}function ne(e,t,n){return function(){this.style.setProperty(e,t,n)}}function oe(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function re(e,t){return e.style.getPropertyValue(t)||ee(e).getComputedStyle(e,null).getPropertyValue(t)}function ie(e){return function(){delete this[e]}}function ae(e,t){return function(){this[e]=t}}function le(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function ue(e){return e.trim().split(/^|\s+/)}function se(e){return e.classList||new ce(e)}function ce(e){this._node=e,this._names=ue(e.getAttribute("class")||"")}function de(e,t){for(var n=se(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function fe(e,t){for(var n=se(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function he(e){return function(){de(this,e)}}function pe(e){return function(){fe(this,e)}}function ve(e,t){return function(){(t.apply(this,arguments)?de:fe)(this,e)}}function me(){this.textContent=""}function ge(e){return function(){this.textContent=e}}function ye(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function we(){this.innerHTML=""}function be(e){return function(){this.innerHTML=e}}function _e(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function xe(){this.nextSibling&&this.parentNode.appendChild(this)}function ke(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Se(){return null}function Ee(){var e=this.parentNode;e&&e.removeChild(this)}function Ne(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ce(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Me(e){return function(){var t=this.__on;if(t){for(var n,o=0,r=-1,i=t.length;o<i;++o)n=t[o],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function Be(e,t,n){return function(){var o,r=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(r)for(var a=0,l=r.length;a<l;++a)if((o=r[a]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),void(o.value=t);this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function Pe(e,t,n){var o=ee(e),r=o.CustomEvent;"function"==typeof r?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Te(e,t){return function(){return Pe(this,e,t)}}function $e(e,t){return function(){return Pe(this,e,t.apply(this,arguments))}}F.prototype={constructor:F,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},ce.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Ie=[null];function ze(e,t){this._groups=e,this._parents=t}function Ae(){return new ze([[document.documentElement]],Ie)}function De(e){return"string"==typeof e?new ze([[document.querySelector(e)]],[document.documentElement]):new ze([[e]],Ie)}function Ve(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(t.getScreenCTM().inverse())).x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}ze.prototype=Ae.prototype={constructor:ze,select:function(e){"function"!=typeof e&&(e=T(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a,l=t[r],u=l.length,s=o[r]=new Array(u),c=0;c<u;++c)(i=l[c])&&(a=e.call(i,i.__data__,c,l))&&("__data__"in i&&(a.__data__=i.__data__),s[c]=a);return new ze(o,this._parents)},selectAll:function(e){e="function"==typeof e?z(e):I(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a,l=t[i],u=l.length,s=0;s<u;++s)(a=l[s])&&(o.push(e.call(a,a.__data__,s,l)),r.push(a));return new ze(o,r)},selectChild:function(e){return this.select(null==e?O:function(e){return function(){return V.call(this.children,e)}}("function"==typeof e?e:D(e)))},selectChildren:function(e){return this.selectAll(null==e?L:function(e){return function(){return R.call(this.children,e)}}("function"==typeof e?e:D(e)))},filter:function(e){"function"!=typeof e&&(e=A(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a=t[r],l=a.length,u=o[r]=[],s=0;s<l;++s)(i=a[s])&&e.call(i,i.__data__,s,a)&&u.push(i);return new ze(o,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,X);var n,o=t?G:Y,r=this._parents,i=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=i.length,l=new Array(a),u=new Array(a),s=new Array(a),c=0;c<a;++c){var d=r[c],f=i[c],h=f.length,p=U(e.call(d,d&&d.__data__,c,r)),v=p.length,m=u[c]=new Array(v),g=l[c]=new Array(v);o(d,f,m,g,s[c]=new Array(h),p,t);for(var y,w,b=0,_=0;b<v;++b)if(y=m[b]){for(b>=_&&(_=b+1);!(w=g[_])&&++_<v;);y._next=w||null}}return(l=new ze(l,r))._enter=u,l._exit=s,l},enter:function(){return new ze(this._enter||this._groups.map(H),this._parents)},exit:function(){return new ze(this._exit||this._groups.map(H),this._parents)},join:function(e,t,n){var o=this.enter(),r=this,i=this.exit();return"function"==typeof e?(o=e(o))&&(o=o.selection()):o=o.append(e+""),null!=t&&(r=t(r))&&(r=r.selection()),null==n?i.remove():n(i),o&&r?o.merge(r).order():r},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),l=new Array(r),u=0;u<a;++u)for(var s,c=n[u],d=o[u],f=c.length,h=l[u]=new Array(f),p=0;p<f;++p)(s=c[p]||d[p])&&(h[p]=s);for(;u<r;++u)l[u]=n[u];return new ze(l,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,r=e[t],i=r.length-1,a=r[i];--i>=0;)(o=r[i])&&(a&&4^o.compareDocumentPosition(a)&&a.parentNode.insertBefore(o,a),a=o);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=j);for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a,l=n[i],u=l.length,s=r[i]=new Array(u),c=0;c<u;++c)(a=l[c])&&(s[c]=a);s.sort(t)}return new ze(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r,i=t[n],a=0,l=i.length;a<l;++a)(r=i[a])&&e.call(r,r.__data__,a,i);return this},attr:function(e,t){var n=N(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?Z:q:"function"==typeof t?n.local?J:Q:n.local?W:K)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?te:"function"==typeof t?oe:ne)(e,t,null==n?"":n)):re(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?ie:"function"==typeof t?le:ae)(e,t)):this.node()[e]},classed:function(e,t){var n=ue(e+"");if(arguments.length<2){for(var o=se(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?ve:t?he:pe)(n,t))},text:function(e){return arguments.length?this.each(null==e?me:("function"==typeof e?ye:ge)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?we:("function"==typeof e?_e:be)(e)):this.node().innerHTML},raise:function(){return this.each(xe)},lower:function(){return this.each(ke)},append:function(e){var t="function"==typeof e?e:B(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:B(e),o=null==t?Se:"function"==typeof t?t:T(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))},remove:function(){return this.each(Ee)},clone:function(e){return this.select(e?Ce:Ne)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var o,r,i=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=i.length;if(!(arguments.length<2)){for(l=t?Be:Me,o=0;o<a;++o)this.each(l(i[o],t,n));return this}var l=this.node().__on;if(l)for(var u,s=0,c=l.length;s<c;++s)for(o=0,u=l[s];o<a;++o)if((r=i[o]).type===u.type&&r.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?$e:Te)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o,r=e[t],i=0,a=r.length;i<a;++i)(o=r[i])&&(yield o)}};const Oe={passive:!1},Re={capture:!0,passive:!1};function Le(e){e.stopImmediatePropagation()}function He(e){e.preventDefault(),e.stopImmediatePropagation()}function Fe(e){var t=e.document.documentElement,n=De(e).on("dragstart.drag",He,Re);"onselectstart"in t?n.on("selectstart.drag",He,Re):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ye(e,t){var n=e.document.documentElement,o=De(e).on("dragstart.drag",null);t&&(o.on("click.drag",He,Re),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ge=e=>()=>e;function Xe(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:a,y:l,dx:u,dy:s,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:s,enumerable:!0,configurable:!0},_:{value:c}})}function Ue(e){return!e.ctrlKey&&!e.button}function je(){return this.parentNode}function qe(e,t){return null==t?{x:e.x,y:e.y}:t}function Ze(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ke(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function We(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Qe(){}Xe.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var Je=.7,et=1/Je,tt="\\s*([+-]?\\d+)\\s*",nt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ot="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rt=/^#([0-9a-f]{3,8})$/,it=new RegExp(`^rgb\\(${tt},${tt},${tt}\\)$`),at=new RegExp(`^rgb\\(${ot},${ot},${ot}\\)$`),lt=new RegExp(`^rgba\\(${tt},${tt},${tt},${nt}\\)$`),ut=new RegExp(`^rgba\\(${ot},${ot},${ot},${nt}\\)$`),st=new RegExp(`^hsl\\(${nt},${ot},${ot}\\)$`),ct=new RegExp(`^hsla\\(${nt},${ot},${ot},${nt}\\)$`),dt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ft(){return this.rgb().formatHex()}function ht(){return this.rgb().formatRgb()}function pt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=rt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?vt(t):3===n?new yt(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?mt(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?mt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=it.exec(e))?new yt(t[1],t[2],t[3],1):(t=at.exec(e))?new yt(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=lt.exec(e))?mt(t[1],t[2],t[3],t[4]):(t=ut.exec(e))?mt(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=st.exec(e))?St(t[1],t[2]/100,t[3]/100,1):(t=ct.exec(e))?St(t[1],t[2]/100,t[3]/100,t[4]):dt.hasOwnProperty(e)?vt(dt[e]):"transparent"===e?new yt(NaN,NaN,NaN,0):null}function vt(e){return new yt(e>>16&255,e>>8&255,255&e,1)}function mt(e,t,n,o){return o<=0&&(e=t=n=NaN),new yt(e,t,n,o)}function gt(e,t,n,o){return 1===arguments.length?((r=e)instanceof Qe||(r=pt(r)),r?new yt((r=r.rgb()).r,r.g,r.b,r.opacity):new yt):new yt(e,t,n,null==o?1:o);var r}function yt(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}function wt(){return`#${kt(this.r)}${kt(this.g)}${kt(this.b)}`}function bt(){const e=_t(this.opacity);return`${1===e?"rgb(":"rgba("}${xt(this.r)}, ${xt(this.g)}, ${xt(this.b)}${1===e?")":`, ${e})`}`}function _t(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function kt(e){return((e=xt(e))<16?"0":"")+e.toString(16)}function St(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Nt(e,t,n,o)}function Et(e){if(e instanceof Nt)return new Nt(e.h,e.s,e.l,e.opacity);if(e instanceof Qe||(e=pt(e)),!e)return new Nt;if(e instanceof Nt)return e;var t=(e=e.rgb()).r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,l=i-r,u=(i+r)/2;return l?(a=t===i?(n-o)/l+6*(n<o):n===i?(o-t)/l+2:(t-n)/l+4,l/=u<.5?i+r:2-i-r,a*=60):l=u>0&&u<1?0:a,new Nt(a,l,u,e.opacity)}function Nt(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}function Ct(e){return(e=(e||0)%360)<0?e+360:e}function Mt(e){return Math.max(0,Math.min(1,e||0))}function Bt(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Ke(Qe,pt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ft,formatHex:ft,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Et(this).formatHsl()},formatRgb:ht,toString:ht}),Ke(yt,gt,We(Qe,{brighter(e){return e=null==e?et:Math.pow(et,e),new yt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Je:Math.pow(Je,e),new yt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new yt(xt(this.r),xt(this.g),xt(this.b),_t(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wt,formatHex:wt,formatHex8:function(){return`#${kt(this.r)}${kt(this.g)}${kt(this.b)}${kt(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:bt,toString:bt})),Ke(Nt,(function(e,t,n,o){return 1===arguments.length?Et(e):new Nt(e,t,n,null==o?1:o)}),We(Qe,{brighter(e){return e=null==e?et:Math.pow(et,e),new Nt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Je:Math.pow(Je,e),new Nt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new yt(Bt(e>=240?e-240:e+120,r,o),Bt(e,r,o),Bt(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new Nt(Ct(this.h),Mt(this.s),Mt(this.l),_t(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=_t(this.opacity);return`${1===e?"hsl(":"hsla("}${Ct(this.h)}, ${100*Mt(this.s)}%, ${100*Mt(this.l)}%${1===e?")":`, ${e})`}`}}));const Pt=e=>()=>e;function Tt(e){return 1==(e=+e)?$t:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}(t,n,e):Pt(isNaN(t)?n:t)}}function $t(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Pt(isNaN(e)?t:e)}const It=function e(t){var n=Tt(t);function o(e,t){var o=n((e=gt(e)).r,(t=gt(t)).r),r=n(e.g,t.g),i=n(e.b,t.b),a=$t(e.opacity,t.opacity);return function(t){return e.r=o(t),e.g=r(t),e.b=i(t),e.opacity=a(t),e+""}}return o.gamma=e,o}(1);function zt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var At=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Dt=new RegExp(At.source,"g");function Vt(e,t){var n,o,r,i=At.lastIndex=Dt.lastIndex=0,a=-1,l=[],u=[];for(e+="",t+="";(n=At.exec(e))&&(o=Dt.exec(t));)(r=o.index)>i&&(r=t.slice(i,r),l[a]?l[a]+=r:l[++a]=r),(n=n[0])===(o=o[0])?l[a]?l[a]+=o:l[++a]=o:(l[++a]=null,u.push({i:a,x:zt(n,o)})),i=Dt.lastIndex;return i<t.length&&(r=t.slice(i),l[a]?l[a]+=r:l[++a]=r),l.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,o=0;o<t;++o)l[(n=u[o]).i]=n.x(e);return l.join("")})}var Ot,Rt=180/Math.PI,Lt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ht(e,t,n,o,r,i){var a,l,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),e*o<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Rt,skewX:Math.atan(u)*Rt,scaleX:a,scaleY:l}}function Ft(e,t,n,o){function r(e){return e.length?e.pop()+" ":""}return function(i,a){var l=[],u=[];return i=e(i),a=e(a),function(e,o,r,i,a,l){if(e!==r||o!==i){var u=a.push("translate(",null,t,null,n);l.push({i:u-4,x:zt(e,r)},{i:u-2,x:zt(o,i)})}else(r||i)&&a.push("translate("+r+t+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,l,u),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(r(n)+"rotate(",null,o)-2,x:zt(e,t)})):t&&n.push(r(n)+"rotate("+t+o)}(i.rotate,a.rotate,l,u),function(e,t,n,i){e!==t?i.push({i:n.push(r(n)+"skewX(",null,o)-2,x:zt(e,t)}):t&&n.push(r(n)+"skewX("+t+o)}(i.skewX,a.skewX,l,u),function(e,t,n,o,i,a){if(e!==n||t!==o){var l=i.push(r(i)+"scale(",null,",",null,")");a.push({i:l-4,x:zt(e,n)},{i:l-2,x:zt(t,o)})}else 1===n&&1===o||i.push(r(i)+"scale("+n+","+o+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,l,u),i=a=null,function(e){for(var t,n=-1,o=u.length;++n<o;)l[(t=u[n]).i]=t.x(e);return l.join("")}}}var Yt=Ft((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Lt:Ht(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Gt=Ft((function(e){return null==e?Lt:(Ot||(Ot=document.createElementNS("http://www.w3.org/2000/svg","g")),Ot.setAttribute("transform",e),(e=Ot.transform.baseVal.consolidate())?Ht((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Lt)}),", ",")",")");function Xt(e){return((e=Math.exp(e))+1/e)/2}const Ut=function e(t,n,o){function r(e,r){var i,a,l=e[0],u=e[1],s=e[2],c=r[0],d=r[1],f=r[2],h=c-l,p=d-u,v=h*h+p*p;if(v<1e-12)a=Math.log(f/s)/t,i=function(e){return[l+e*h,u+e*p,s*Math.exp(t*e*a)]};else{var m=Math.sqrt(v),g=(f*f-s*s+o*v)/(2*s*n*m),y=(f*f-s*s-o*v)/(2*f*n*m),w=Math.log(Math.sqrt(g*g+1)-g),b=Math.log(Math.sqrt(y*y+1)-y);a=(b-w)/t,i=function(e){var o,r=e*a,i=Xt(w),c=s/(n*m)*(i*(o=t*r+w,((o=Math.exp(2*o))-1)/(o+1))-function(e){return((e=Math.exp(e))-1/e)/2}(w));return[l+c*h,u+c*p,s*i/Xt(t*r+w)]}}return i.duration=1e3*a*t/Math.SQRT2,i}return r.rho=function(t){var n=Math.max(.001,+t),o=n*n;return e(n,o,o*o)},r}(Math.SQRT2,2,4);var jt,qt,Zt=0,Kt=0,Wt=0,Qt=0,Jt=0,en=0,tn="object"==typeof performance&&performance.now?performance:Date,nn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function on(){return Jt||(nn(rn),Jt=tn.now()+en)}function rn(){Jt=0}function an(){this._call=this._time=this._next=null}function ln(e,t,n){var o=new an;return o.restart(e,t,n),o}function un(){Jt=(Qt=tn.now())+en,Zt=Kt=0;try{!function(){on(),++Zt;for(var e,t=jt;t;)(e=Jt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Zt}()}finally{Zt=0,function(){var e,t,n=jt,o=1/0;for(;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:jt=t);qt=e,cn(o)}(),Jt=0}}function sn(){var e=tn.now(),t=e-Qt;t>1e3&&(en-=t,Qt=e)}function cn(e){Zt||(Kt&&(Kt=clearTimeout(Kt)),e-Jt>24?(e<1/0&&(Kt=setTimeout(un,e-tn.now()-en)),Wt&&(Wt=clearInterval(Wt))):(Wt||(Qt=tn.now(),Wt=setInterval(sn,1e3)),Zt=1,nn(un)))}function dn(e,t,n){var o=new an;return t=null==t?0:+t,o.restart((n=>{o.stop(),e(n+t)}),t,n),o}an.prototype=ln.prototype={constructor:an,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?on():+n)+(null==t?0:+t),this._next||qt===this||(qt?qt._next=this:jt=this,qt=this),this._call=e,this._time=n,cn()},stop:function(){this._call&&(this._call=null,this._time=1/0,cn())}};var fn=b("start","end","cancel","interrupt"),hn=[];function pn(e,t,n,o,r,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var o,r=e.__transition;function i(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(i){var s,c,d,f;if(1!==n.state)return u();for(s in r)if((f=r[s]).name===n.name){if(3===f.state)return dn(a);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete r[s]):+s<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete r[s])}if(dn((function(){3===n.state&&(n.state=4,n.timer.restart(l,n.delay,n.time),l(i))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,o=new Array(d=n.tween.length),s=0,c=-1;s<d;++s)(f=n.tween[s].value.call(e,e.__data__,n.index,n.group))&&(o[++c]=f);o.length=c+1}}function l(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=5,1),i=-1,a=o.length;++i<a;)o[i].call(e,r);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var o in n.state=6,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=ln(i,0,n.time)}(e,n,{name:t,index:o,group:r,on:fn,tween:hn,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})}function vn(e,t){var n=gn(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function mn(e,t){var n=gn(e,t);if(n.state>3)throw new Error("too late; already running");return n}function gn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function yn(e,t){var n,o,r,i=e.__transition,a=!0;if(i){for(r in t=null==t?null:t+"",i)(n=i[r]).name===t?(o=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[r]):a=!1;a&&delete e.__transition}}function wn(e,t){var n,o;return function(){var r=mn(this,e),i=r.tween;if(i!==n)for(var a=0,l=(o=n=i).length;a<l;++a)if(o[a].name===t){(o=o.slice()).splice(a,1);break}r.tween=o}}function bn(e,t,n){var o,r;if("function"!=typeof n)throw new Error;return function(){var i=mn(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var l={name:t,value:n},u=0,s=r.length;u<s;++u)if(r[u].name===t){r[u]=l;break}u===s&&r.push(l)}i.tween=r}}function _n(e,t,n){var o=e._id;return e.each((function(){var e=mn(this,o);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return gn(e,o).value[t]}}function xn(e,t){var n;return("number"==typeof t?zt:t instanceof pt?It:(n=pt(t))?(t=n,It):Vt)(e,t)}function kn(e){return function(){this.removeAttribute(e)}}function Sn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function En(e,t,n){var o,r,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===o?r:r=t(o=a,n)}}function Nn(e,t,n){var o,r,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===o?r:r=t(o=a,n)}}function Cn(e,t,n){var o,r,i;return function(){var a,l,u=n(this);if(null!=u)return(a=this.getAttribute(e))===(l=u+"")?null:a===o&&l===r?i:(r=l,i=t(o=a,u));this.removeAttribute(e)}}function Mn(e,t,n){var o,r,i;return function(){var a,l,u=n(this);if(null!=u)return(a=this.getAttributeNS(e.space,e.local))===(l=u+"")?null:a===o&&l===r?i:(r=l,i=t(o=a,u));this.removeAttributeNS(e.space,e.local)}}function Bn(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,r)),n}return r._value=t,r}function Pn(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,r)),n}return r._value=t,r}function Tn(e,t){return function(){vn(this,e).delay=+t.apply(this,arguments)}}function $n(e,t){return t=+t,function(){vn(this,e).delay=t}}function In(e,t){return function(){mn(this,e).duration=+t.apply(this,arguments)}}function zn(e,t){return t=+t,function(){mn(this,e).duration=t}}var An=Ae.prototype.constructor;function Dn(e){return function(){this.style.removeProperty(e)}}var Vn=0;function On(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Rn(){return++Vn}var Ln=Ae.prototype;On.prototype={constructor:On,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=T(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var l,u,s=o[a],c=s.length,d=i[a]=new Array(c),f=0;f<c;++f)(l=s[f])&&(u=e.call(l,l.__data__,f,s))&&("__data__"in l&&(u.__data__=l.__data__),d[f]=u,pn(d[f],t,n,f,d,gn(l,n)));return new On(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=I(e));for(var o=this._groups,r=o.length,i=[],a=[],l=0;l<r;++l)for(var u,s=o[l],c=s.length,d=0;d<c;++d)if(u=s[d]){for(var f,h=e.call(u,u.__data__,d,s),p=gn(u,n),v=0,m=h.length;v<m;++v)(f=h[v])&&pn(f,t,n,v,h,p);i.push(h),a.push(u)}return new On(i,a,t,n)},selectChild:Ln.selectChild,selectChildren:Ln.selectChildren,filter:function(e){"function"!=typeof e&&(e=A(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a=t[r],l=a.length,u=o[r]=[],s=0;s<l;++s)(i=a[s])&&e.call(i,i.__data__,s,a)&&u.push(i);return new On(o,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),l=0;l<i;++l)for(var u,s=t[l],c=n[l],d=s.length,f=a[l]=new Array(d),h=0;h<d;++h)(u=s[h]||c[h])&&(f[h]=u);for(;l<o;++l)a[l]=t[l];return new On(a,this._parents,this._name,this._id)},selection:function(){return new An(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Rn(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a,l=o[i],u=l.length,s=0;s<u;++s)if(a=l[s]){var c=gn(a,t);pn(a,e,n,s,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new On(o,this._parents,e,n)},call:Ln.call,nodes:Ln.nodes,node:Ln.node,size:Ln.size,empty:Ln.empty,each:Ln.each,on:function(e,t){var n=this._id;return arguments.length<2?gn(this.node(),n).on.on(e):this.each(function(e,t,n){var o,r,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?vn:mn;return function(){var a=i(this,e),l=a.on;l!==o&&(r=(o=l).copy()).on(t,n),a.on=r}}(n,e,t))},attr:function(e,t){var n=N(e),o="transform"===n?Gt:xn;return this.attrTween(e,"function"==typeof t?(n.local?Mn:Cn)(n,o,_n(this,"attr."+e,t)):null==t?(n.local?Sn:kn)(n):(n.local?Nn:En)(n,o,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var o=N(e);return this.tween(n,(o.local?Bn:Pn)(o,t))},style:function(e,t,n){var o="transform"==(e+="")?Yt:xn;return null==t?this.styleTween(e,function(e,t){var n,o,r;return function(){var i=re(this,e),a=(this.style.removeProperty(e),re(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}(e,o)).on("end.style."+e,Dn(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var o,r,i;return function(){var a=re(this,e),l=n(this),u=l+"";return null==l&&(this.style.removeProperty(e),u=l=re(this,e)),a===u?null:a===o&&u===r?i:(r=u,i=t(o=a,l))}}(e,o,_n(this,"style."+e,t))).each(function(e,t){var n,o,r,i,a="style."+t,l="end."+a;return function(){var u=mn(this,e),s=u.on,c=null==u.value[a]?i||(i=Dn(t)):void 0;s===n&&r===c||(o=(n=s).copy()).on(l,r=c),u.on=o}}(this._id,e)):this.styleTween(e,function(e,t,n){var o,r,i=n+"";return function(){var a=re(this,e);return a===i?null:a===o?r:r=t(o=a,n)}}(e,o,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==t)return this.tween(o,null);if("function"!=typeof t)throw new Error;return this.tween(o,function(e,t,n){var o,r;function i(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&function(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}(e,i,n)),o}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(_n(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function o(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&function(e){return function(t){this.textContent=e.call(this,t)}}(o)),t}return o._value=e,o}(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o,r=gn(this.node(),n).tween,i=0,a=r.length;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((null==t?wn:bn)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Tn:$n)(t,e)):gn(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?In:zn)(t,e)):gn(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){mn(this,e).ease=t}}(t,e)):gn(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;mn(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,o=n._id,r=n.size();return new Promise((function(i,a){var l={value:a},u={value:function(){0==--r&&i()}};n.each((function(){var n=mn(this,o),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),n.on=t})),0===r&&i()}))},[Symbol.iterator]:Ln[Symbol.iterator]};var Hn={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Fn(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Ae.prototype.interrupt=function(e){return this.each((function(){yn(this,e)}))},Ae.prototype.transition=function(e){var t,n;e instanceof On?(t=e._id,e=e._name):(t=Rn(),(n=Hn).time=on(),e=null==e?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a,l=o[i],u=l.length,s=0;s<u;++s)(a=l[s])&&pn(a,e,t,s,l,n||Fn(a,t));return new On(o,this._parents,e,t)};const Yn=e=>()=>e;function Gn(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Xn(e,t,n){this.k=e,this.x=t,this.y=n}Xn.prototype={constructor:Xn,scale:function(e){return 1===e?this:new Xn(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Xn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Un=new Xn(1,0,0);function jn(e){e.stopImmediatePropagation()}function qn(e){e.preventDefault(),e.stopImmediatePropagation()}function Zn(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Kn(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Wn(){return this.__zoom||Un}function Qn(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Jn(){return navigator.maxTouchPoints||"ontouchstart"in this}function eo(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}Xn.prototype;var to=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(to||{}),no=(e=>(e.Partial="partial",e.Full="full",e))(no||{}),oo=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(oo||{}),ro=(e=>(e.Strict="strict",e.Loose="loose",e))(ro||{}),io=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(io||{}),ao=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(ao||{}),lo=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(lo||{});function uo(e){var t,n;const o=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target,r="function"==typeof(null==o?void 0:o.hasAttribute)&&o.hasAttribute("contenteditable"),i="function"==typeof(null==o?void 0:o.closest)?o.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(null==o?void 0:o.nodeName)||r||!!i}function so(e,t,n,o){const r=t.replace("+","\n").replace("\n\n","\n+").split("\n").map((e=>e.trim().toLowerCase()));if(1===r.length)return e.toLowerCase()===t.toLowerCase();o||n.add(e.toLowerCase());const i=r.every(((e,t)=>n.has(e)&&Array.from(n.values())[t]===r[t]));return o&&n.delete(e.toLowerCase()),i}function co(e,n){const o=t.toRef((()=>t.toValue(null==n?void 0:n.actInsideInputWithModifier)??!1)),r=t.toRef((()=>t.toValue(null==n?void 0:n.target)??window)),i=t.ref(!0===t.toValue(e));let a=!1;const l=new Set;let u=c(t.toValue(e));function s(){a=!1,l.clear(),i.value=!0===t.toValue(e)}function c(e){return null===e?(s(),()=>!1):"boolean"==typeof e?(s(),i.value=e,()=>!1):Array.isArray(e)||"string"==typeof e?function(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=(r=n.code,e.includes(r)?"code":"key");var r;return Array.isArray(e)?e.some((e=>so(n[o],e,t,"keyup"===n.type))):so(n[o],e,t,"keyup"===n.type)}}(e,l):e}return t.watch((()=>t.toValue(e)),((e,t)=>{"boolean"==typeof t&&"boolean"!=typeof e&&s(),u=c(e)}),{immediate:!0}),m(["blur","contextmenu"],s),g(((...e)=>u(...e)),(e=>{var t;a=(t=e).ctrlKey||t.metaKey||t.shiftKey;(!a||a&&!o.value)&&uo(e)||(e.preventDefault(),i.value=!0)}),{eventName:"keydown",target:r}),g(((...e)=>u(...e)),(e=>{if(i.value){if((!a||a&&!o.value)&&uo(e))return;a=!1,i.value=!1}}),{eventName:"keyup",target:r}),i}const fo="vue-flow__node-desc",ho="vue-flow__edge-desc",po=["Enter"," ","Escape"],vo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function mo(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function go(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function yo(e){return{width:e.offsetWidth,height:e.offsetHeight}}function wo(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function bo(e,t){return{x:wo(e.x,t[0][0],t[1][0]),y:wo(e.y,t[0][1],t[1][1])}}function _o(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function xo(e){return e&&"object"==typeof e&&"id"in e&&"source"in e&&"target"in e}function ko(e){return e&&"object"==typeof e&&"id"in e&&"position"in e&&!xo(e)}function So(e){return ko(e)&&"computedPosition"in e}function Eo(e){return!Number.isNaN(e)&&Number.isFinite(e)}function No(e,n,o){const r={id:e.id.toString(),type:e.type??"default",dimensions:t.markRaw({width:0,height:0}),computedPosition:t.markRaw({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Er(e.data)?e.data:{},events:t.markRaw(Er(e.events)?e.events:{})};return Object.assign(n??r,e,{id:e.id.toString(),parentNode:o})}function Co(e,n,o){var r,i;const a={id:e.id.toString(),type:e.type??(null==n?void 0:n.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:null==(r=e.sourceHandle)?void 0:r.toString(),targetHandle:null==(i=e.targetHandle)?void 0:i.toString(),updatable:e.updatable??(null==o?void 0:o.updatable),selectable:e.selectable??(null==o?void 0:o.selectable),focusable:e.focusable??(null==o?void 0:o.focusable),data:Er(e.data)?e.data:{},events:t.markRaw(Er(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(null==o?void 0:o.interactionWidth),...o??{}};return Object.assign(n??a,e,{id:e.id.toString()})}function Mo(e,t,n,o){const r="string"==typeof e?e:e.id,i=new Set,a="source"===o?"target":"source";for(const l of n)l[a]===r&&i.add(l[o]);return t.filter((e=>i.has(e.id)))}function Bo({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function Po({x:e,y:t},{x:n,y:o,zoom:r}){return{x:e*r+n,y:t*r+o}}function To({x:e,y:t},{x:n,y:o,zoom:r},i=!1,a=[1,1]){const l={x:(e-n)/r,y:(t-o)/r};return i?hr(l,a):l}function $o(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Io({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function zo({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function Ao(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=$o(t,Io({...o.computedPosition,...o.dimensions}))}return zo(t)}function Do(e,t,n={x:0,y:0,zoom:1},o=!1,r=!1){const i={...To(t,n),width:t.width/n.zoom,height:t.height/n.zoom},a=[];for(const l of e){const{dimensions:e,selectable:t=!0,hidden:n=!1}=l,u=e.width??l.width??null,s=e.height??l.height??null;if(r&&!t||n)continue;const c=go(i,mo(l));(null===u||null===s||o&&c>0||c>=(u??0)*(s??0)||l.dragging)&&a.push(l)}return a}function Vo(e,t){const n=new Set;if("string"==typeof e)n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter((e=>n.has(e.source)||n.has(e.target)))}function Oo(e,t,n,o,r,i=.1,a={x:0,y:0}){const l=t/(e.width*(1+i)),u=n/(e.height*(1+i)),s=wo(Math.min(l,u),o,r),c=e.x+e.width/2,d=e.y+e.height/2;return{x:t/2-c*s+(a.x??0),y:n/2-d*s+(a.y??0),zoom:s}}function Ro(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return!!n&&(!!n.selected||Ro(n,t))}function Lo(e,t){if(void 0===e)return"";if("string"==typeof e)return e;return`${t?`${t}__`:""}${Object.keys(e).sort().map((t=>`${t}=${e[t]}`)).join("&")}`}function Ho(e,t,n){return e<t?wo(Math.abs(e-t),1,t)/t:e>n?-wo(Math.abs(e-n),1,t)/t:0}function Fo(e,t,n=15,o=40){return[Ho(e.x,o,t.width-o)*n,Ho(e.y,o,t.height-o)*n]}function Yo(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let r={};if("function"==typeof t.style?r={...t.style(t)}:t.style&&(r={...t.style}),r.width=r.width??`${t.dimensions.width}px`,r.height=r.height??`${t.dimensions.height}px`,n>0)if("string"==typeof r.width){const e=Number(r.width.replace("px",""));r.width=`${e+n}px`}else r.width+=n;if(o>0)if("string"==typeof r.height){const e=Number(r.height.replace("px",""));r.height=`${e+o}px`}else r.height+=o;if(e.position.x<0){const n=Math.abs(e.position.x);if(t.position.x=t.position.x-n,"string"==typeof r.width){const e=Number(r.width.replace("px",""));r.width=`${e+n}px`}else r.width+=n;e.position.x=0}if(e.position.y<0){const n=Math.abs(e.position.y);if(t.position.y=t.position.y-n,"string"==typeof r.height){const e=Number(r.height.replace("px",""));r.height=`${e+n}px`}else r.height+=n;e.position.y=0}t.dimensions.width=Number(r.width.toString().replace("px","")),t.dimensions.height=Number(r.height.toString().replace("px","")),"function"==typeof t.style?t.style=e=>({...(0,t.style)(e),...r}):t.style={...t.style,...r}}}}function Go(e,n){var o,r;const i=e.filter((e=>"add"===e.type||"remove"===e.type));for(const t of i)if("add"===t.type){-1===n.findIndex((e=>e.id===t.item.id))&&n.push(t.item)}else if("remove"===t.type){const e=n.findIndex((e=>e.id===t.id));-1!==e&&n.splice(e,1)}const a=n.map((e=>e.id));for(const l of n)for(const i of e)if(i.id===l.id)switch(i.type){case"select":l.selected=i.selected;break;case"position":if(So(l)&&(void 0!==i.position&&(l.position=i.position),void 0!==i.dragging&&(l.dragging=i.dragging),l.expandParent&&l.parentNode)){const e=n[a.indexOf(l.parentNode)];e&&So(e)&&Yo(l,e)}break;case"dimensions":if(So(l)&&(void 0!==i.dimensions&&(l.dimensions=i.dimensions),void 0!==i.updateStyle&&i.updateStyle&&(l.style={...l.style||{},width:`${null==(o=i.dimensions)?void 0:o.width}px`,height:`${null==(r=i.dimensions)?void 0:r.height}px`}),void 0!==i.resizing&&(l.resizing=i.resizing),l.expandParent&&l.parentNode)){const e=n[a.indexOf(l.parentNode)];if(e&&So(e)){!!e.dimensions.width&&!!e.dimensions.height?Yo(l,e):t.nextTick((()=>{Yo(l,e)}))}}}return n}function Xo(e,t){return{id:e,type:"select",selected:t}}function Uo(e){return{item:e,type:"add"}}function jo(e){return{id:e,type:"remove"}}function qo(e,t,n,o,r){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:r||null,type:"remove"}}function Zo(e,t=new Set,n=!1){const o=[];for(const[r,i]of e){const e=t.has(r);void 0===i.selected&&!e||i.selected===e||(n&&(i.selected=e),o.push(Xo(i.id,e)))}return o}function Ko(e){const t=new Set;let o=!1;e&&(o=!0,t.add(e));const r=e=>{t.delete(e)};return{on:i=>{e&&o&&t.delete(e),t.add(i);const a=()=>{r(i),e&&o&&t.add(e)};return n(a),{off:a}},off:r,trigger:e=>Promise.all(Array.from(t).map((t=>t(e)))),hasListeners:()=>t.size>0,fns:t}}function Wo(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function Qo({id:e,dragItems:t,findNode:n}){const o=[];for(const r of t){const e=n(r.id);e&&o.push(e)}return[e?o.find((t=>t.id===e)):o[0],o]}function Jo(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function er(e,t,n,o){let r=e.extent||n;if("parent"!==r&&(Array.isArray(r)||"parent"!==(null==r?void 0:r.range))||e.expandParent){if(Array.isArray(r)){const e=(null==o?void 0:o.computedPosition.x)||0,t=(null==o?void 0:o.computedPosition.y)||0;r=[[r[0][0]+e,r[0][1]+t],[r[1][0]+e,r[1][1]+t]]}else if("parent"!==r&&(null==r?void 0:r.range)&&Array.isArray(r.range)){const[e,t,n,i]=Jo(r.padding),a=(null==o?void 0:o.computedPosition.x)||0,l=(null==o?void 0:o.computedPosition.y)||0;r=[[r.range[0][0]+a+i,r.range[0][1]+l+e],[r.range[1][0]+a-t,r.range[1][1]+l-n]]}}else if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const e=function(e,t,n){const[o,r,i,a]="string"!=typeof e?Jo(e.padding):[0,0,0,0];return!(!n||void 0===n.computedPosition.x||void 0===n.computedPosition.y||void 0===n.dimensions.width||void 0===n.dimensions.height)&&[[n.computedPosition.x+a,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-r,n.computedPosition.y+n.dimensions.height-i]]}(r,0,o);e&&(r=e)}else t(new ur(ar.NODE_EXTENT_INVALID,e.id)),r=n;return"parent"===r?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:r}function tr(e,t,n,o,r){const i=bo(t,function({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}(e.dimensions,er(e,n,o,r)));return{position:{x:i.x-((null==r?void 0:r.computedPosition.x)||0),y:i.y-((null==r?void 0:r.computedPosition.y)||0)},computedPosition:i}}function nr(e,t,n=to.Left,o=!1){const r=((null==t?void 0:t.x)??0)+e.computedPosition.x,i=((null==t?void 0:t.y)??0)+e.computedPosition.y,{width:a,height:l}=t??function(e){var t,n;return{width:(null==(t=e.dimensions)?void 0:t.width)??e.width??0,height:(null==(n=e.dimensions)?void 0:n.height)??e.height??0}}(e);if(o)return{x:r+a/2,y:i+l/2};switch((null==t?void 0:t.position)??n){case to.Top:return{x:r+a/2,y:i};case to.Right:return{x:r+a,y:i+l/2};case to.Bottom:return{x:r+a/2,y:i+l};case to.Left:return{x:r,y:i+l/2}}}function or(e,t){return e&&(t?e.find((e=>e.id===t)):e[0])||null}function rr({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:i,width:a,height:l,viewport:u}){const s={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+i)};s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const c=Io({x:(0-u.x)/u.zoom,y:(0-u.y)/u.zoom,width:a/u.zoom,height:l/u.zoom}),d=Math.max(0,Math.min(c.x2,s.x2)-Math.max(c.x,s.x)),f=Math.max(0,Math.min(c.y2,s.y2)-Math.max(c.y,s.y));return Math.ceil(d*f)>0}function ir(e,t,n=!1){const o="number"==typeof e.zIndex;let r=o?e.zIndex:0;const i=t(e.source),a=t(e.target);return i&&a?(n&&(r=o?e.zIndex:Math.max(i.computedPosition.z||0,a.computedPosition.z||0)),r):0}var ar=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(ar||{});const lr={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid\nNode: ${e}`,NODE_NOT_FOUND:e=>`Node not found\nNode: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent\nNode: ${e}\nParent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing\nType: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent\nNode: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target\nEdge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing\nEdge: ${e} \nSource: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing\nEdge: ${e} \nTarget: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing\nType: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same\nEdge: ${e} \nSource: ${t} \nTarget: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing\nEdge: ${e} \nSource: ${t} \nTarget: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed\nEdge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found\nEdge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class ur extends Error{constructor(e,...t){var n;super(null==(n=lr[e])?void 0:n.call(lr,...t)),this.name="VueFlowError",this.code=e,this.args=t}}function sr(e){return"clientX"in e}function cr(e){return"sourceEvent"in e}function dr(e,t){var n,o;const r=sr(e),i=r?e.clientX:null==(n=e.touches)?void 0:n[0].clientX,a=r?e.clientY:null==(o=e.touches)?void 0:o[0].clientY;return{x:i-((null==t?void 0:t.left)??0),y:a-((null==t?void 0:t.top)??0)}}const fr=()=>{var e;return"undefined"!=typeof navigator&&(null==(e=null==navigator?void 0:navigator.userAgent)?void 0:e.indexOf("Mac"))>=0};function hr(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const pr=()=>!0;function vr(e){null==e||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function mr(e,t,n,o){var r,i;let a=[],l=Number.POSITIVE_INFINITY;const u=function(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(const i of t.values())go(r,mo(i))>0&&o.push(i);return o}(e,n,t+250);for(const s of u){const n=[...(null==(r=s.handleBounds)?void 0:r.source)??[],...(null==(i=s.handleBounds)?void 0:i.target)??[]];for(const r of n){if(o.nodeId===r.nodeId&&o.type===r.type&&o.id===r.id)continue;const{x:n,y:i}=nr(s,r,r.position,!0),u=Math.sqrt((n-e.x)**2+(i-e.y)**2);u>t||(u<l?(a=[{...r,x:n,y:i}],l=u):u===l&&a.push({...r,x:n,y:i}))}}if(!a.length)return null;if(a.length>1){const e="source"===o.type?"target":"source";return a.find((t=>t.type===e))??a[0]}return a[0]}function gr(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:i,doc:a,lib:l,flowId:u,isValidConnection:s=pr},c,d,f){const h="target"===i,p=t?a.querySelector(`.${l}-flow__handle[data-id="${u}-${null==t?void 0:t.nodeId}-${null==t?void 0:t.id}-${null==t?void 0:t.type}"]`):null,{x:v,y:m}=dr(e),g=a.elementFromPoint(v,m),y=(null==g?void 0:g.classList.contains(`${l}-flow__handle`))?g:p,w={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){const e=yr(void 0,y),i=y.getAttribute("data-nodeid"),a=y.getAttribute("data-handleid"),l=y.classList.contains("connectable"),u=y.classList.contains("connectableend");if(!i||!e)return w;const p={source:h?i:o,sourceHandle:h?a:r,target:h?o:i,targetHandle:h?r:a};w.connection=p;const v=l&&u&&(n===ro.Strict?h&&"source"===e||!h&&"target"===e:i!==o||a!==r);w.isValid=v&&s(p,{nodes:d,edges:c,sourceNode:f(o),targetNode:f(i)}),w.toHandle=t}return w}function yr(e,t){return e||((null==t?void 0:t.classList.contains("target"))?"target":(null==t?void 0:t.classList.contains("source"))?"source":null)}const wr={[to.Left]:to.Right,[to.Right]:to.Left,[to.Top]:to.Bottom,[to.Bottom]:to.Top},br=["production","prod"];function _r(e,...t){xr()&&console.warn(`[Vue Flow]: ${e}`,...t)}function xr(){return!br.includes(process.env.NODE_ENV||"")}function kr(e,t,n,o){const r=t.querySelectorAll(`.vue-flow__handle.${e}`);return Array.from(r).map((t=>{const r=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),position:t.getAttribute("data-handlepos"),nodeId:t.getAttribute("data-nodeid"),type:e,x:(r.left-n.left)/o,y:(r.top-n.top)/o,...yo(t)}}))}function Sr(e,n,o,r,i,a=!1,l){i.value=!1,e.selected?(a||e.selected&&n)&&(r([e]),t.nextTick((()=>{l.blur()}))):o([e])}function Er(e){return void 0!==t.unref(e)}function Nr(e,t,n,o){if(!e||!e.source||!e.target)return n(new ur(ar.EDGE_INVALID,(null==e?void 0:e.id)??"[ID UNKNOWN]")),!1;let r;return r=xo(e)?e:{...e,id:Bo(e)},r=Co(r,void 0,o),!function(e,t){return t.some((t=>xo(t)&&t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)))}(r,t)&&r}function Cr(e,t,n){const o={},r=[];for(let i=0;i<e.length;++i){const a=e[i];if(!ko(a)){n(new ur(ar.NODE_INVALID,null==a?void 0:a.id)||`[ID UNKNOWN|INDEX ${i}]`);continue}const l=No(a,t(a.id),a.parentNode);a.parentNode&&(o[a.parentNode]=!0),r[i]=l}for(const i of r){const e=t(i.parentNode)||r.find((e=>e.id===i.parentNode));i.parentNode&&!e&&n(new ur(ar.NODE_MISSING_PARENT,i.id,i.parentNode)),(i.parentNode||o[i.id])&&(o[i.id]&&(i.isParent=!0),e&&(e.isParent=!0))}return r}function Mr(e,t,n,o,r,i){let a=r;const l=o.get(a)||new Map;o.set(a,l.set(n,t)),a=`${r}-${e}`;const u=o.get(a)||new Map;if(o.set(a,u.set(n,t)),i){a=`${r}-${e}-${i}`;const l=o.get(a)||new Map;o.set(a,l.set(n,t))}}function Br(e,t,n){e.clear(),t.clear();for(const o of n){const{source:n,target:r,sourceHandle:i=null,targetHandle:a=null}=o,l={edgeId:o.id,source:n,target:r,sourceHandle:i,targetHandle:a},u=`${n}-${i}--${r}-${a}`;Mr("source",l,`${r}-${a}--${n}-${i}`,e,n,i),Mr("target",l,u,e,r,a),t.set(o.id,o)}}function Pr(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Tr(e,t,n,o,r,i,a,l){const u=[];for(const s of e){const e=xo(s)?s:Nr(s,l,r,i);if(!e)continue;const c=n(e.source),d=n(e.target);if(!c||!d){r(new ur(ar.EDGE_SOURCE_TARGET_MISSING,e.id,e.source,e.target));continue}if(!c){r(new ur(ar.EDGE_SOURCE_MISSING,e.id,e.source));continue}if(!d){r(new ur(ar.EDGE_TARGET_MISSING,e.id,e.target));continue}if(t){if(!t(e,{edges:l,nodes:a,sourceNode:c,targetNode:d})){r(new ur(ar.EDGE_INVALID,e.id));continue}}const f=o(e.id);u.push({...Co(e,f,i),sourceNode:c,targetNode:d})}return u}const $r=Symbol("vueFlow"),Ir=Symbol("nodeId"),zr=Symbol("nodeRef"),Ar=Symbol("edgeId"),Dr=Symbol("edgeRef"),Vr=Symbol("slots");function Or(e){const{vueFlowRef:n,snapToGrid:o,snapGrid:r,noDragClassName:i,nodes:a,nodeExtent:l,nodeDragThreshold:u,viewport:s,autoPanOnNodeDrag:c,autoPanSpeed:d,nodesDraggable:f,panBy:h,findNode:p,multiSelectionActive:v,nodesSelectionActive:m,selectNodesOnDrag:g,removeSelectedElements:y,addSelectedNodes:w,updateNodePositions:_,emits:x}=$i(),{onStart:k,onDrag:S,onStop:E,onClick:N,el:C,disabled:M,id:B,selectable:P,dragHandle:T}=e,$=t.ref(!1);let I,z=[],A=null,D={x:void 0,y:void 0},V={x:0,y:0},O=null,R=!1,L=0,H=!1;const F=function(){const{viewport:e,snapGrid:t,snapToGrid:n}=$i();return o=>{const r=cr(o)?o.sourceEvent:o,{x:i,y:a}=dr(r),l=To({x:i,y:a},e.value),{x:u,y:s}=n.value?hr(l,t.value):l;return{xSnapped:u,ySnapped:s,...l}}}(),Y=({x:e,y:t})=>{D={x:e,y:t};let n=!1;if(z=z.map((i=>{const a={x:e-i.distance.x,y:t-i.distance.y},{computedPosition:u}=tr(i,o.value?hr(a,r.value):a,x.error,l.value,i.parentNode?p(i.parentNode):void 0);return n=n||i.position.x!==u.x||i.position.y!==u.y,i.position=u,i})),n&&(_(z,!0,!0),$.value=!0,O)){const[e,t]=Qo({id:B,dragItems:z,findNode:p});S({event:O,node:e,nodes:t})}},G=()=>{if(!A)return;const[e,t]=Fo(V,A,d.value);if(0!==e||0!==t){const n={x:(D.x??0)-e/s.value.zoom,y:(D.y??0)-t/s.value.zoom};h({x:e,y:t})&&Y(n)}L=requestAnimationFrame(G)},X=(e,n)=>{R=!0;const o=p(B);g.value||v.value||!o||o.selected||y(),o&&t.toValue(P)&&g.value&&Sr(o,v.value,w,y,m,!1,n);const r=F(e.sourceEvent);if(D=r,z=function(e,n,o,r,i){var a,l;const u=[];for(const s of e)!s.selected&&s.id!==i||s.parentNode&&Ro(s,r)||!(s.draggable||n&&void 0===s.draggable)||u.push(t.markRaw({id:s.id,position:s.position||{x:0,y:0},distance:{x:o.x-(null==(a=s.computedPosition)?void 0:a.x)||0,y:o.y-(null==(l=s.computedPosition)?void 0:l.y)||0},from:s.computedPosition,extent:s.extent,parentNode:s.parentNode,dimensions:s.dimensions,expandParent:s.expandParent}));return u}(a.value,f.value,r,p,B),z.length){const[t,n]=Qo({id:B,dragItems:z,findNode:p});k({event:e.sourceEvent,node:t,nodes:n})}};return t.watch([()=>t.toValue(M),C],(([e,o],r,a)=>{if(o){const r=De(o);e||(I=function(){var e,t,n,o,r=Ue,i=je,a=qe,l=Ze,u={},s=b("start","drag","end"),c=0,d=0;function f(e){e.on("mousedown.drag",h).filter(l).on("touchstart.drag",m).on("touchmove.drag",g,Oe).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(a,l){if(!o&&r.call(this,a,l)){var u=w(this,i.call(this,a,l),a,l,"mouse");u&&(De(a.view).on("mousemove.drag",p,Re).on("mouseup.drag",v,Re),Fe(a.view),Le(a),n=!1,e=a.clientX,t=a.clientY,u("start",a))}}function p(o){if(He(o),!n){var r=o.clientX-e,i=o.clientY-t;n=r*r+i*i>d}u.mouse("drag",o)}function v(e){De(e.view).on("mousemove.drag mouseup.drag",null),Ye(e.view,n),He(e),u.mouse("end",e)}function m(e,t){if(r.call(this,e,t)){var n,o,a=e.changedTouches,l=i.call(this,e,t),u=a.length;for(n=0;n<u;++n)(o=w(this,l,e,t,a[n].identifier,a[n]))&&(Le(e),o("start",e,a[n]))}}function g(e){var t,n,o=e.changedTouches,r=o.length;for(t=0;t<r;++t)(n=u[o[t].identifier])&&(He(e),n("drag",e,o[t]))}function y(e){var t,n,r=e.changedTouches,i=r.length;for(o&&clearTimeout(o),o=setTimeout((function(){o=null}),500),t=0;t<i;++t)(n=u[r[t].identifier])&&(Le(e),n("end",e,r[t]))}function w(e,t,n,o,r,i){var l,d,h,p=s.copy(),v=Ve(i||n,t);if(null!=(h=a.call(e,new Xe("beforestart",{sourceEvent:n,target:f,identifier:r,active:c,x:v[0],y:v[1],dx:0,dy:0,dispatch:p}),o)))return l=h.x-v[0]||0,d=h.y-v[1]||0,function n(i,a,s){var m,g=v;switch(i){case"start":u[r]=n,m=c++;break;case"end":delete u[r],--c;case"drag":v=Ve(s||a,t),m=c}p.call(i,e,new Xe(i,{sourceEvent:a,subject:h,target:f,identifier:r,active:m,x:v[0]+l,y:v[1]+d,dx:v[0]-g[0],dy:v[1]-g[1],dispatch:p}),o)}}return f.filter=function(e){return arguments.length?(r="function"==typeof e?e:Ge(!!e),f):r},f.container=function(e){return arguments.length?(i="function"==typeof e?e:Ge(e),f):i},f.subject=function(e){return arguments.length?(a="function"==typeof e?e:Ge(e),f):a},f.touchable=function(e){return arguments.length?(l="function"==typeof e?e:Ge(!!e),f):l},f.on=function(){var e=s.on.apply(s,arguments);return e===s?f:e},f.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,f):Math.sqrt(d)},f}().on("start",(e=>((e,t)=>{var o;"touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||(0===u.value&&X(e,t),D=F(e.sourceEvent),A=(null==(o=n.value)?void 0:o.getBoundingClientRect())||null,V=dr(e.sourceEvent,A))})(e,o))).on("drag",(e=>((e,t)=>{const n=F(e.sourceEvent);if(!H&&R&&c.value&&(H=!0,G()),!R){const o=n.xSnapped-(D.x??0),r=n.ySnapped-(D.y??0);Math.sqrt(o*o+r*r)>u.value&&X(e,t)}(D.x!==n.xSnapped||D.y!==n.ySnapped)&&z.length&&R&&(O=e.sourceEvent,V=dr(e.sourceEvent,A),Y(n))})(e,o))).on("end",(e=>(e=>{if(cr(e)||R||$.value||v.value){if($.value=!1,H=!1,R=!1,D={x:void 0,y:void 0},cancelAnimationFrame(L),z.length){_(z,!1,!1);const[t,n]=Qo({id:B,dragItems:z,findNode:p});E({event:e.sourceEvent,node:t,nodes:n})}}else{const t=e,n=F(t),o=n.xSnapped-(D.x??0),r=n.ySnapped-(D.y??0),i=Math.sqrt(o*o+r*r);0!==i&&i<=u.value&&(null==N||N(t))}})(e))).filter((e=>{const n=e.target,r=t.toValue(T);return!e.button&&(!i.value||!Wo(n,`.${i.value}`,o)&&(!r||Wo(n,r,o)))})),r.call(I)),a((()=>{r.on(".drag",null),I&&(I.on("start",null),I.on("drag",null),I.on("end",null))}))}})),$}function Rr(e,t){const n={doubleClick:Ko(),click:Ko(),mouseEnter:Ko(),mouseMove:Ko(),mouseLeave:Ko(),contextMenu:Ko(),updateStart:Ko(),update:Ko(),updateEnd:Ko()};return n.doubleClick.on((n=>{var o,r;t.edgeDoubleClick(n),null==(r=null==(o=e.events)?void 0:o.doubleClick)||r.call(o,n)})),n.click.on((n=>{var o,r;t.edgeClick(n),null==(r=null==(o=e.events)?void 0:o.click)||r.call(o,n)})),n.mouseEnter.on((n=>{var o,r;t.edgeMouseEnter(n),null==(r=null==(o=e.events)?void 0:o.mouseEnter)||r.call(o,n)})),n.mouseMove.on((n=>{var o,r;t.edgeMouseMove(n),null==(r=null==(o=e.events)?void 0:o.mouseMove)||r.call(o,n)})),n.mouseLeave.on((n=>{var o,r;t.edgeMouseLeave(n),null==(r=null==(o=e.events)?void 0:o.mouseLeave)||r.call(o,n)})),n.contextMenu.on((n=>{var o,r;t.edgeContextMenu(n),null==(r=null==(o=e.events)?void 0:o.contextMenu)||r.call(o,n)})),n.updateStart.on((n=>{var o,r;t.edgeUpdateStart(n),null==(r=null==(o=e.events)?void 0:o.updateStart)||r.call(o,n)})),n.update.on((n=>{var o,r;t.edgeUpdate(n),null==(r=null==(o=e.events)?void 0:o.update)||r.call(o,n)})),n.updateEnd.on((n=>{var o,r;t.edgeUpdateEnd(n),null==(r=null==(o=e.events)?void 0:o.updateEnd)||r.call(o,n)})),Object.entries(n).reduce(((e,[t,n])=>(e.emit[t]=n.trigger,e.on[t]=n.on,e)),{emit:{},on:{}})}function Lr(){return!0}function Hr({handleId:e,nodeId:n,type:o,isValidConnection:r,edgeUpdaterType:i,onEdgeUpdate:a,onEdgeUpdateEnd:l}){const{id:u,vueFlowRef:s,connectionMode:c,connectionRadius:d,connectOnClick:f,connectionClickStartHandle:h,nodesConnectable:p,autoPanOnConnect:v,autoPanSpeed:m,findNode:g,panBy:y,startConnection:w,updateConnection:b,endConnection:_,emits:x,viewport:k,edges:S,nodes:E,isValidConnection:N,nodeLookup:C}=$i();let M=null,B=!1,P=null;return{handlePointerDown:function(f){var h;const p="target"===t.toValue(o),T=sr(f),$=_o(f.target);if(T&&0===f.button||!T){let o=function(o){G=dr(o,H),z=mr(To(G,k.value,!1,[1,1]),d.value,C.value,j),X||(U(),X=!0);const r=gr(o,{handle:z,connectionMode:c.value,fromNodeId:t.toValue(n),fromHandleId:t.toValue(e),fromType:p?"target":"source",isValidConnection:A,doc:$,lib:"vue",flowId:u,nodeLookup:C.value},S.value,E.value,g);P=r.handleDomNode,M=r.connection,B=function(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}(!!z,r.isValid);const i={...K,isValid:B,to:z&&B?Po({x:z.x,y:z.y},k.value):G,toHandle:r.toHandle,toPosition:B&&r.toHandle?r.toHandle.position:wr[j.position],toNode:r.toHandle?C.value.get(r.toHandle.nodeId):null};if(!(B&&z&&(null==K?void 0:K.toHandle)&&i.toHandle&&K.toHandle.type===i.toHandle.type&&K.toHandle.nodeId===i.toHandle.nodeId&&K.toHandle.id===i.toHandle.id&&K.to.x===i.to.x&&K.to.y===i.to.y)){if(b(z&&B?Po({x:z.x,y:z.y},k.value):G,r.toHandle,function(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}(!!z,B)),K=i,!z&&!B&&!P)return vr(Y);M&&M.source!==M.target&&P&&(vr(Y),Y=P,P.classList.add("connecting","vue-flow__handle-connecting"),P.classList.toggle("valid",!!B),P.classList.toggle("vue-flow__handle-valid",!!B))}},T=function(e){(z||P)&&M&&B&&(a?a(e,M):x.connect(M)),x.connectEnd(e),i&&(null==l||l(e)),vr(Y),cancelAnimationFrame(D),_(e),X=!1,B=!1,M=null,P=null,$.removeEventListener("mousemove",o),$.removeEventListener("mouseup",T),$.removeEventListener("touchmove",o),$.removeEventListener("touchend",T)};const I=g(t.toValue(n));let z,A=t.toValue(r)||N.value||Lr;!A&&I&&(A=(p?I.isValidSourcePos:I.isValidTargetPos)||Lr);let D=0;const{x:V,y:O}=dr(f),R=null==$?void 0:$.elementFromPoint(V,O),L=yr(t.toValue(i),R),H=null==(h=s.value)?void 0:h.getBoundingClientRect();if(!H||!L)return;const F=function(e,t,n,o,r,i=!1){var a,l,u;const s=o.get(e);if(!s)return null;const c=r===ro.Strict?null==(a=s.handleBounds)?void 0:a[t]:[...(null==(l=s.handleBounds)?void 0:l.source)??[],...(null==(u=s.handleBounds)?void 0:u.target)??[]],d=(n?null==c?void 0:c.find((e=>e.id===n)):null==c?void 0:c[0])??null;return d&&i?{...d,...nr(s,d,d.position,!0)}:d}(t.toValue(n),L,t.toValue(e),C.value,c.value);if(!F)return;let Y,G=dr(f,H),X=!1;const U=()=>{if(!v.value)return;const[e,t]=Fo(G,H,m.value);y({x:e,y:t}),D=requestAnimationFrame(U)},j={...F,nodeId:t.toValue(n),type:L,position:F.position},q=C.value.get(t.toValue(n)),Z={inProgress:!0,isValid:null,from:nr(q,j,to.Left,!0),fromHandle:j,fromPosition:j.position,fromNode:q,to:G,toHandle:null,toPosition:wr[j.position],toNode:null};w({nodeId:t.toValue(n),id:t.toValue(e),type:L,position:(null==R?void 0:R.getAttribute("data-handlepos"))||to.Top},{x:V-H.left,y:O-H.top}),x.connectStart({event:f,nodeId:t.toValue(n),handleId:t.toValue(e),handleType:L});let K=Z;$.addEventListener("mousemove",o),$.addEventListener("mouseup",T),$.addEventListener("touchmove",o),$.addEventListener("touchend",T)}},handleClick:function(i){var a,l;if(!f.value)return;const s="target"===t.toValue(o);if(!h.value)return x.clickConnectStart({event:i,nodeId:t.toValue(n),handleId:t.toValue(e)}),void w({nodeId:t.toValue(n),type:t.toValue(o),id:t.toValue(e),position:to.Top},void 0,!0);let d=t.toValue(r)||N.value||Lr;const v=g(t.toValue(n));if(!d&&v&&(d=(s?v.isValidSourcePos:v.isValidTargetPos)||Lr),v&&!1===(void 0===v.connectable?p.value:v.connectable))return;const m=_o(i.target),y=gr(i,{handle:{nodeId:t.toValue(n),id:t.toValue(e),type:t.toValue(o),position:to.Top},connectionMode:c.value,fromNodeId:h.value.nodeId,fromHandleId:h.value.id||null,fromType:h.value.type,isValidConnection:d,doc:m,lib:"vue",flowId:u,nodeLookup:C.value},S.value,E.value,g),b=(null==(a=y.connection)?void 0:a.source)===(null==(l=y.connection)?void 0:l.target);y.isValid&&y.connection&&!b&&x.connect(y.connection),x.clickConnectEnd(i),_(i,!0)}}}function Fr(e){const n=e??t.inject(Ir,"")??"",o=t.inject(zr,t.ref(null)),{findNode:r,edges:i,emits:a}=$i(),l=r(n);return l||a.error(new ur(ar.NODE_NOT_FOUND,n)),{id:n,nodeEl:o,node:l,parentNode:t.computed((()=>r(l.parentNode))),connectedEdges:t.computed((()=>Vo([l],i.value)))}}function Yr(e,t){const n={doubleClick:Ko(),click:Ko(),mouseEnter:Ko(),mouseMove:Ko(),mouseLeave:Ko(),contextMenu:Ko(),dragStart:Ko(),drag:Ko(),dragStop:Ko()};return n.doubleClick.on((n=>{var o,r;t.nodeDoubleClick(n),null==(r=null==(o=e.events)?void 0:o.doubleClick)||r.call(o,n)})),n.click.on((n=>{var o,r;t.nodeClick(n),null==(r=null==(o=e.events)?void 0:o.click)||r.call(o,n)})),n.mouseEnter.on((n=>{var o,r;t.nodeMouseEnter(n),null==(r=null==(o=e.events)?void 0:o.mouseEnter)||r.call(o,n)})),n.mouseMove.on((n=>{var o,r;t.nodeMouseMove(n),null==(r=null==(o=e.events)?void 0:o.mouseMove)||r.call(o,n)})),n.mouseLeave.on((n=>{var o,r;t.nodeMouseLeave(n),null==(r=null==(o=e.events)?void 0:o.mouseLeave)||r.call(o,n)})),n.contextMenu.on((n=>{var o,r;t.nodeContextMenu(n),null==(r=null==(o=e.events)?void 0:o.contextMenu)||r.call(o,n)})),n.dragStart.on((n=>{var o,r;t.nodeDragStart(n),null==(r=null==(o=e.events)?void 0:o.dragStart)||r.call(o,n)})),n.drag.on((n=>{var o,r;t.nodeDrag(n),null==(r=null==(o=e.events)?void 0:o.drag)||r.call(o,n)})),n.dragStop.on((n=>{var o,r;t.nodeDragStop(n),null==(r=null==(o=e.events)?void 0:o.dragStop)||r.call(o,n)})),Object.entries(n).reduce(((e,[t,n])=>(e.emit[t]=n.trigger,e.on[t]=n.on,e)),{emit:{},on:{}})}function Gr(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:r,snapToGrid:i,nodesDraggable:a,emits:l}=$i();return(u,s=!1)=>{const c=i.value?r.value[0]:5,d=i.value?r.value[1]:5,f=s?4:1,h=u.x*c*f,p=u.y*d*f,v=[];for(const n of e.value)if(n.draggable||a&&void 0===n.draggable){const e={x:n.computedPosition.x+h,y:n.computedPosition.y+p},{computedPosition:r}=tr(n,e,l.error,t.value,n.parentNode?o(n.parentNode):void 0);v.push({id:n.id,position:r,from:n.position,distance:{x:u.x,y:u.y},dimensions:n.dimensions})}n(v,!0,!1)}}function Xr(){return _r("Viewport not initialized yet."),Promise.resolve(!1)}const Ur={zoomIn:Xr,zoomOut:Xr,zoomTo:Xr,fitView:Xr,setCenter:Xr,fitBounds:Xr,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:Xr,setTransform:Xr,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function jr(e,t=0,n){return e.transition().duration(t).on("end",n)}function qr(e,n,o){const r=t.effectScope(!0);return r.run((()=>{r.run((()=>{let n,r,i=!(!o.nodes.value.length&&!o.edges.value.length);n=c([e.modelValue,()=>{var t,n;return null==(n=null==(t=e.modelValue)?void 0:t.value)?void 0:n.length}],(([e])=>{e&&Array.isArray(e)&&(null==r||r.pause(),o.setElements(e),r||i||!e.length?null==r||r.resume():i=!0)})),r=c([o.nodes,o.edges,()=>o.edges.value.length,()=>o.nodes.value.length],(([o,r])=>{var i;(null==(i=e.modelValue)?void 0:i.value)&&Array.isArray(e.modelValue.value)&&(null==n||n.pause(),e.modelValue.value=[...o,...r],t.nextTick((()=>{null==n||n.resume()})))}),{immediate:i}),t.onScopeDispose((()=>{null==n||n.stop(),null==r||r.stop()}))})),r.run((()=>{let n,r,i=!!o.nodes.value.length;n=c([e.nodes,()=>{var t,n;return null==(n=null==(t=e.nodes)?void 0:t.value)?void 0:n.length}],(([e])=>{e&&Array.isArray(e)&&(null==r||r.pause(),o.setNodes(e),r||i||!e.length?null==r||r.resume():i=!0)})),r=c([o.nodes,()=>o.nodes.value.length],(([o])=>{var r;(null==(r=e.nodes)?void 0:r.value)&&Array.isArray(e.nodes.value)&&(null==n||n.pause(),e.nodes.value=[...o],t.nextTick((()=>{null==n||n.resume()})))}),{immediate:i}),t.onScopeDispose((()=>{null==n||n.stop(),null==r||r.stop()}))})),r.run((()=>{let n,r,i=!!o.edges.value.length;n=c([e.edges,()=>{var t,n;return null==(n=null==(t=e.edges)?void 0:t.value)?void 0:n.length}],(([e])=>{e&&Array.isArray(e)&&(null==r||r.pause(),o.setEdges(e),r||i||!e.length?null==r||r.resume():i=!0)})),r=c([o.edges,()=>o.edges.value.length],(([o])=>{var r;(null==(r=e.edges)?void 0:r.value)&&Array.isArray(e.edges.value)&&(null==n||n.pause(),e.edges.value=[...o],t.nextTick((()=>{null==n||n.resume()})))}),{immediate:i}),t.onScopeDispose((()=>{null==n||n.stop(),null==r||r.stop()}))})),r.run((()=>{t.watch((()=>n.minZoom),(()=>{n.minZoom&&Er(n.minZoom)&&o.setMinZoom(n.minZoom)}),{immediate:!0})})),r.run((()=>{t.watch((()=>n.maxZoom),(()=>{n.maxZoom&&Er(n.maxZoom)&&o.setMaxZoom(n.maxZoom)}),{immediate:!0})})),r.run((()=>{t.watch((()=>n.translateExtent),(()=>{n.translateExtent&&Er(n.translateExtent)&&o.setTranslateExtent(n.translateExtent)}),{immediate:!0})})),r.run((()=>{t.watch((()=>n.nodeExtent),(()=>{n.nodeExtent&&Er(n.nodeExtent)&&o.setNodeExtent(n.nodeExtent)}),{immediate:!0})})),r.run((()=>{t.watch((()=>n.applyDefault),(()=>{Er(n.applyDefault)&&(o.applyDefault.value=n.applyDefault)}),{immediate:!0})})),r.run((()=>{const e=async e=>{let t=e;"function"==typeof n.autoConnect&&(t=await n.autoConnect(e)),!1!==t&&o.addEdges([t])};t.watch((()=>n.autoConnect),(()=>{Er(n.autoConnect)&&(o.autoConnect.value=n.autoConnect)}),{immediate:!0}),t.watch(o.autoConnect,((t,n,r)=>{t?o.onConnect(e):o.hooks.value.connect.off(e),r((()=>{o.hooks.value.connect.off(e)}))}),{immediate:!0})})),(()=>{const e=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const i of Object.keys(n)){const a=i;if(!e.includes(a)){const e=t.toRef((()=>n[a])),i=o[a];t.isRef(i)&&r.run((()=>{t.watch(e,(e=>{Er(e)&&(i.value=e)}),{immediate:!0})}))}}})()})),()=>r.stop()}function Zr(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:no.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:ao.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:oo.Bezier,style:{}},connectionMode:ro.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:fr()?"Meta":"Control",zoomActivationKeyCode:fr()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:{edgesChange:Ko(),nodesChange:Ko(),nodeDoubleClick:Ko(),nodeClick:Ko(),nodeMouseEnter:Ko(),nodeMouseMove:Ko(),nodeMouseLeave:Ko(),nodeContextMenu:Ko(),nodeDragStart:Ko(),nodeDrag:Ko(),nodeDragStop:Ko(),nodesInitialized:Ko(),miniMapNodeClick:Ko(),miniMapNodeDoubleClick:Ko(),miniMapNodeMouseEnter:Ko(),miniMapNodeMouseMove:Ko(),miniMapNodeMouseLeave:Ko(),connect:Ko(),connectStart:Ko(),connectEnd:Ko(),clickConnectStart:Ko(),clickConnectEnd:Ko(),paneReady:Ko(),init:Ko(),move:Ko(),moveStart:Ko(),moveEnd:Ko(),selectionDragStart:Ko(),selectionDrag:Ko(),selectionDragStop:Ko(),selectionContextMenu:Ko(),selectionStart:Ko(),selectionEnd:Ko(),viewportChangeStart:Ko(),viewportChange:Ko(),viewportChangeEnd:Ko(),paneScroll:Ko(),paneClick:Ko(),paneContextMenu:Ko(),paneMouseEnter:Ko(),paneMouseMove:Ko(),paneMouseLeave:Ko(),edgeContextMenu:Ko(),edgeMouseEnter:Ko(),edgeMouseMove:Ko(),edgeMouseLeave:Ko(),edgeDoubleClick:Ko(),edgeClick:Ko(),edgeUpdateStart:Ko(),edgeUpdate:Ko(),edgeUpdateEnd:Ko(),updateNodeInternals:Ko(),error:Ko((e=>_r(e.message)))},applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const Kr=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function Wr(e,n,o){const r=function(e){function n(t,n){return new Promise((o=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleBy(jr(e.d3Selection,n,(()=>{o(!0)})),t):o(!1)}))}function o(t,n,o,r){return new Promise((i=>{const{x:a,y:l}=bo({x:-t,y:-n},e.translateExtent),u=Un.translate(-a,-l).scale(o);e.d3Selection&&e.d3Zoom?e.d3Zoom.transform(jr(e.d3Selection,r,(()=>{i(!0)})),u):i(!1)}))}return t.computed((()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:e=>n(1.2,null==e?void 0:e.duration),zoomOut:e=>n(1/1.2,null==e?void 0:e.duration),zoomTo:(t,n)=>new Promise((o=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleTo(jr(e.d3Selection,null==n?void 0:n.duration,(()=>{o(!0)})),t):o(!1)})),setViewport:(e,t)=>o(e.x,e.y,e.zoom,null==t?void 0:t.duration),setTransform:(e,t)=>o(e.x,e.y,e.zoom,null==t?void 0:t.duration),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(t={padding:.1,includeHiddenNodes:!1,duration:0})=>{var n,r;const i=[];for(const o of e.nodes)o.dimensions.width&&o.dimensions.height&&((null==t?void 0:t.includeHiddenNodes)||!o.hidden)&&(!(null==(n=t.nodes)?void 0:n.length)||(null==(r=t.nodes)?void 0:r.length)&&t.nodes.includes(o.id))&&i.push(o);if(!i.length)return Promise.resolve(!1);const a=Ao(i),{x:l,y:u,zoom:s}=Oo(a,e.dimensions.width,e.dimensions.height,t.minZoom??e.minZoom,t.maxZoom??e.maxZoom,t.padding??.1,t.offset);return o(l,u,s,null==t?void 0:t.duration)},setCenter:(t,n,r)=>{const i=void 0!==(null==r?void 0:r.zoom)?r.zoom:e.maxZoom;return o(e.dimensions.width/2-t*i,e.dimensions.height/2-n*i,i,null==r?void 0:r.duration)},fitBounds:(t,n={padding:.1})=>{const{x:r,y:i,zoom:a}=Oo(t,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,n.padding);return o(r,i,a,null==n?void 0:n.duration)},project:t=>To(t,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:t=>{if(e.vueFlowRef){const{x:n,y:o}=e.vueFlowRef.getBoundingClientRect();return To({x:t.x-n,y:t.y-o},e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:t=>{if(e.vueFlowRef){const{x:n,y:o}=e.vueFlowRef.getBoundingClientRect();return Po({x:t.x+n,y:t.y+o},e.viewport)}return{x:0,y:0}}}:Ur))}(e),i=t=>{const n=t??[];e.hooks.updateNodeInternals.trigger(n)},a=t=>Vo(t,e.edges),l=e=>{if(e)return n.value.get(e)},u=e=>{if(e)return o.value.get(e)},s=(t,r)=>{const i=new Set,a=new Set;for(const e of t)ko(e)?i.add(e.id):xo(e)&&a.add(e.id);const l=Zo(n.value,i,!0),u=Zo(o.value,a);if(e.multiSelectionActive){for(const e of i)l.push(Xo(e,r));for(const e of a)u.push(Xo(e,r))}l.length&&e.hooks.nodesChange.trigger(l),u.length&&e.hooks.edgesChange.trigger(u)},c=t=>{var n;null==(n=e.d3Zoom)||n.scaleExtent([t,e.maxZoom]),e.minZoom=t},d=t=>{var n;null==(n=e.d3Zoom)||n.scaleExtent([e.minZoom,t]),e.maxZoom=t},f=t=>{var n;null==(n=e.d3Zoom)||n.translateExtent(t),e.translateExtent=t},p=t=>{const n=t instanceof Function?t(e.nodes):t;(e.initialized||n.length)&&(e.nodes=Cr(n,l,e.hooks.error.trigger))},v=t=>{const n=t instanceof Function?t(e.edges):t;if(!e.initialized&&!n.length)return;const r=Tr(n,e.isValidConnection,l,u,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);Br(e.connectionLookup,o.value,r),e.edges=r},m=t=>{const n=t instanceof Function?t([...e.nodes,...e.edges]):t;(e.initialized||n.length)&&(p(n.filter(ko)),v(n.filter(xo)))},g=e=>{const t=Eo((n=e).width)&&Eo(n.height)&&Eo(n.x)&&Eo(n.y);var n;const o=t?null:So(e)?e:l(e.id);if(!t&&!o)return[null,null,t];return[t?e:mo(o),o,t]},y=t=>{const n=t instanceof Function?t(e):t,o=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Er(n.defaultEdgeOptions)&&(e.defaultEdgeOptions=n.defaultEdgeOptions);const r=n.modelValue||n.nodes||n.edges?[]:void 0;r&&(n.modelValue&&r.push(...n.modelValue),n.nodes&&r.push(...n.nodes),n.edges&&r.push(...n.edges),m(r));for(const i of Object.keys(n)){const t=i,r=n[t];![...Kr,...o].includes(t)&&Er(r)&&(e[t]=r)}h((()=>e.d3Zoom)).not.toBeNull().then((()=>{Er(n.maxZoom)&&d(n.maxZoom),Er(n.minZoom)&&c(n.minZoom),Er(n.translateExtent)&&f(n.translateExtent)})),e.initialized||(e.initialized=!0)};return{updateNodePositions:(t,n,o)=>{var r,i;const a=[];for(const e of t){const t={id:e.id,type:"position",dragging:o,from:e.from};if(n&&(t.position=e.position,e.parentNode)){const n=l(e.parentNode);t.position={x:t.position.x-((null==(r=null==n?void 0:n.computedPosition)?void 0:r.x)??0),y:t.position.y-((null==(i=null==n?void 0:n.computedPosition)?void 0:i.y)??0)}}a.push(t)}(null==a?void 0:a.length)&&e.hooks.nodesChange.trigger(a)},updateNodeDimensions:t=>{if(!e.vueFlowRef)return;const n=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!n)return;const o=window.getComputedStyle(n),{m22:i}=new window.DOMMatrixReadOnly(o.transform),a=[];for(let e=0;e<t.length;++e){const n=t[e],o=l(n.id);if(o){const e=yo(n.nodeElement);if(!(!e.width||!e.height||o.dimensions.width===e.width&&o.dimensions.height===e.height&&!n.forceUpdate)){const t=n.nodeElement.getBoundingClientRect();o.dimensions=e,o.handleBounds.source=kr("source",n.nodeElement,t,i),o.handleBounds.target=kr("target",n.nodeElement,t,i),a.push({id:o.id,type:"dimensions",dimensions:e})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&r.value.fitView().then((()=>{e.fitViewOnInitDone=!0})),a.length&&e.hooks.nodesChange.trigger(a)},setElements:m,setNodes:p,setEdges:v,addNodes:t=>{let n=t instanceof Function?t(e.nodes):t;n=Array.isArray(n)?n:[n];const o=Cr(n,l,e.hooks.error.trigger),r=[];for(const e of o)r.push(Uo(e));r.length&&e.hooks.nodesChange.trigger(r)},addEdges:t=>{let n=t instanceof Function?t(e.edges):t;n=Array.isArray(n)?n:[n];const o=Tr(n,e.isValidConnection,l,u,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),r=[];for(const e of o)r.push(Uo(e));r.length&&e.hooks.edgesChange.trigger(r)},removeNodes:(t,n=!0,o=!1)=>{const r=t instanceof Function?t(e.nodes):t,i=Array.isArray(r)?r:[r],u=[],s=[];function c(e){const t=a(e);for(const n of t)Er(n.deletable)&&!n.deletable||s.push(qo(n.id,n.source,n.target,n.sourceHandle,n.targetHandle))}function d(t){const o=[];for(const n of e.nodes)n.parentNode===t&&o.push(n);if(o.length){for(const e of o)u.push(jo(e.id));n&&c(o);for(const e of o)d(e.id)}}for(const e of i){const t="string"==typeof e?l(e):e;t&&(Er(t.deletable)&&!t.deletable||(u.push(jo(t.id)),n&&c([t]),o&&d(t.id)))}s.length&&e.hooks.edgesChange.trigger(s),u.length&&e.hooks.nodesChange.trigger(u)},removeEdges:t=>{const n=t instanceof Function?t(e.edges):t,o=Array.isArray(n)?n:[n],r=[];for(const e of o){const t="string"==typeof e?u(e):e;t&&(Er(t.deletable)&&!t.deletable||r.push(qo("string"==typeof e?e:e.id,t.source,t.target,t.sourceHandle,t.targetHandle)))}e.hooks.edgesChange.trigger(r)},findNode:l,findEdge:u,updateEdge:(t,n,r=!0)=>{const i=u(t.id),a=function(e,t,n,o,r){if(!t.source||!t.target)return r(new ur(ar.EDGE_INVALID,e.id)),!1;if(!n)return r(new ur(ar.EDGE_NOT_FOUND,e.id)),!1;const{id:i,...a}=e;return{...a,id:o?Bo(t):i,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}(t,n,i,r,e.hooks.error.trigger);if(a){const[t]=Tr([a],e.isValidConnection,l,u,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges.splice(e.edges.indexOf(i),1,t),Br(e.connectionLookup,o.value,[t]),t}return!1},updateEdgeData:(e,t,n={replace:!1})=>{const o=u(e);if(!o)return;const r="function"==typeof t?t(o):t;o.data=n.replace?r:{...o.data,...r}},updateNode:(t,n,o={replace:!1})=>{const r=l(t);if(!r)return;const i="function"==typeof n?n(r):n;o.replace?e.nodes.splice(e.nodes.indexOf(r),1,i):Object.assign(r,i)},updateNodeData:(e,t,n={replace:!1})=>{const o=l(e);if(!o)return;const r="function"==typeof t?t(o):t;o.data=n.replace?r:{...o.data,...r}},applyEdgeChanges:t=>{const n=Go(t,e.edges);return Br(e.connectionLookup,o.value,n),n},applyNodeChanges:t=>Go(t,e.nodes),addSelectedElements:e=>{s(e,!0)},addSelectedNodes:t=>{if(e.multiSelectionActive){const n=t.map((e=>Xo(e.id,!0)));e.hooks.nodesChange.trigger(n)}else e.hooks.nodesChange.trigger(Zo(n.value,new Set(t.map((e=>e.id))),!0)),e.hooks.edgesChange.trigger(Zo(o.value))},addSelectedEdges:t=>{if(e.multiSelectionActive){const n=t.map((e=>Xo(e.id,!0)));e.hooks.edgesChange.trigger(n)}else e.hooks.edgesChange.trigger(Zo(o.value,new Set(t.map((e=>e.id))))),e.hooks.nodesChange.trigger(Zo(n.value,new Set,!0))},setMinZoom:c,setMaxZoom:d,setTranslateExtent:f,setNodeExtent:t=>{e.nodeExtent=t,i()},setPaneClickDistance:t=>{var n;null==(n=e.d3Zoom)||n.clickDistance(t)},removeSelectedElements:t=>{if(!t||!t.length)return s([],!1);const n=t.reduce(((e,t)=>{const n=Xo(t.id,!1);return ko(t)?e.nodes.push(n):e.edges.push(n),e}),{nodes:[],edges:[]});n.nodes.length&&e.hooks.nodesChange.trigger(n.nodes),n.edges.length&&e.hooks.edgesChange.trigger(n.edges)},removeSelectedNodes:t=>{const n=(t||e.nodes).map((e=>(e.selected=!1,Xo(e.id,!1))));e.hooks.nodesChange.trigger(n)},removeSelectedEdges:t=>{const n=(t||e.edges).map((e=>(e.selected=!1,Xo(e.id,!1))));e.hooks.edgesChange.trigger(n)},startConnection:(t,n,o=!1)=>{o?e.connectionClickStartHandle=t:e.connectionStartHandle=t,e.connectionEndHandle=null,e.connectionStatus=null,n&&(e.connectionPosition=n)},updateConnection:(t,n=null,o=null)=>{e.connectionStartHandle&&(e.connectionPosition=t,e.connectionEndHandle=n,e.connectionStatus=o)},endConnection:(t,n)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,n?e.connectionClickStartHandle=null:e.connectionStartHandle=null},setInteractive:t=>{e.nodesDraggable=t,e.nodesConnectable=t,e.elementsSelectable=t},setState:y,getIntersectingNodes:(t,n=!0,o=e.nodes)=>{const[r,i,a]=g(t);if(!r)return[];const l=[];for(const u of o||e.nodes){if(!(a||u.id!==i.id&&u.computedPosition))continue;const e=go(mo(u),r);(n&&e>0||e>=Number(r.width)*Number(r.height))&&l.push(u)}return l},getIncomers:t=>function(...e){if(3===e.length){const[t,n,o]=e;return Mo(t,n,o,"source")}const[t,n]=e,o="string"==typeof t?t:t.id;return n.filter((e=>xo(e)&&e.target===o)).map((e=>n.find((t=>ko(t)&&t.id===e.source))))}(t,e.nodes,e.edges),getOutgoers:t=>function(...e){if(3===e.length){const[t,n,o]=e;return Mo(t,n,o,"target")}const[t,n]=e,o="string"==typeof t?t:t.id;return n.filter((e=>xo(e)&&e.source===o)).map((e=>n.find((t=>ko(t)&&t.id===e.target))))}(t,e.nodes,e.edges),getConnectedEdges:a,getHandleConnections:({id:t,type:n,nodeId:o})=>{var r;return Array.from((null==(r=e.connectionLookup.get(`${o}-${n}-${t??null}`))?void 0:r.values())??[])},isNodeIntersecting:(e,t,n=!0)=>{const[o]=g(e);if(!o)return!1;const r=go(o,t);return n&&r>0||r>=Number(o.width)*Number(o.height)},panBy:t=>{const{viewport:n,dimensions:o,d3Zoom:r,d3Selection:i,translateExtent:a}=e;if(!r||!i||!t.x&&!t.y)return!1;const l=Un.translate(n.x+t.x,n.y+t.y).scale(n.zoom),u=[[0,0],[o.width,o.height]],s=r.constrain()(l,u,a),c=e.viewport.x!==s.x||e.viewport.y!==s.y||e.viewport.zoom!==s.k;return r.transform(i,s),c},fitView:e=>r.value.fitView(e),zoomIn:e=>r.value.zoomIn(e),zoomOut:e=>r.value.zoomOut(e),zoomTo:(e,t)=>r.value.zoomTo(e,t),setViewport:(e,t)=>r.value.setViewport(e,t),setTransform:(e,t)=>r.value.setTransform(e,t),getViewport:()=>r.value.getViewport(),getTransform:()=>r.value.getTransform(),setCenter:(e,t,n)=>r.value.setCenter(e,t,n),fitBounds:(e,t)=>r.value.fitBounds(e,t),project:e=>r.value.project(e),screenToFlowCoordinate:e=>r.value.screenToFlowCoordinate(e),flowToScreenCoordinate:e=>r.value.flowToScreenCoordinate(e),toObject:()=>{const t=[],n=[];for(const o of e.nodes){const{computedPosition:e,handleBounds:n,selected:r,dimensions:i,isParent:a,resizing:l,dragging:u,events:s,...c}=o;t.push(c)}for(const o of e.edges){const{selected:e,sourceNode:t,targetNode:r,events:i,...a}=o;n.push(a)}return JSON.parse(JSON.stringify({nodes:t,edges:n,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:t=>new Promise((n=>{const{nodes:o,edges:i,position:a,zoom:l,viewport:u}=t;if(o&&p(o),i&&v(i),(null==u?void 0:u.x)&&(null==u?void 0:u.y)||a){const t=(null==u?void 0:u.x)||a[0],o=(null==u?void 0:u.y)||a[1],i=(null==u?void 0:u.zoom)||l||e.viewport.zoom;return h((()=>r.value.viewportInitialized)).toBe(!0).then((()=>{r.value.setViewport({x:t,y:o,zoom:i}).then((()=>{n(!0)}))}))}n(!0)})),updateNodeInternals:i,viewportHelper:r,$reset:()=>{const t=Zr();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const n=Un.translate(t.defaultViewport.x??0,t.defaultViewport.y??0).scale(wo(t.defaultViewport.zoom??1,t.minZoom,t.maxZoom)),o=e.viewportRef.getBoundingClientRect(),r=[[0,0],[o.width,o.height]],i=e.d3Zoom.constrain()(n,r,t.translateExtent);e.d3Zoom.transform(e.d3Selection,i)}y(t)},$destroy:()=>{}}}const Qr=["data-id","data-handleid","data-nodeid","data-handlepos"],Jr=t.defineComponent({name:"Handle",compatConfig:{MODE:3},props:{id:{default:null},type:{},position:{default:()=>to.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:n}){const o=t.createPropsRestProxy(e,["position","connectable","connectableStart","connectableEnd","id"]),r=t.toRef((()=>o.type??"source")),i=t.toRef((()=>o.isValidConnection??null)),{id:a,connectionStartHandle:l,connectionClickStartHandle:u,connectionEndHandle:s,vueFlowRef:c,nodesConnectable:d,noDragClassName:f,noPanClassName:h}=$i(),{id:p,node:v,nodeEl:m,connectedEdges:g}=Fr(),y=t.ref(),w=t.toRef((()=>void 0===e.connectableStart||e.connectableStart)),b=t.toRef((()=>void 0===e.connectableEnd||e.connectableEnd)),_=t.toRef((()=>{var t,n,o,i,a,u;return(null==(t=l.value)?void 0:t.nodeId)===p&&(null==(n=l.value)?void 0:n.id)===e.id&&(null==(o=l.value)?void 0:o.type)===r.value||(null==(i=s.value)?void 0:i.nodeId)===p&&(null==(a=s.value)?void 0:a.id)===e.id&&(null==(u=s.value)?void 0:u.type)===r.value})),x=t.toRef((()=>{var t,n,o;return(null==(t=u.value)?void 0:t.nodeId)===p&&(null==(n=u.value)?void 0:n.id)===e.id&&(null==(o=u.value)?void 0:o.type)===r.value})),{handlePointerDown:k,handleClick:S}=Hr({nodeId:p,handleId:e.id,isValidConnection:i,type:r}),E=t.computed((()=>"string"==typeof e.connectable&&"single"===e.connectable?!g.value.some((t=>{const n=t[`${r.value}Handle`];return t[r.value]===p&&(!n||n===e.id)})):"number"==typeof e.connectable?g.value.filter((t=>{const n=t[`${r.value}Handle`];return t[r.value]===p&&(!n||n===e.id)})).length<e.connectable:"function"==typeof e.connectable?e.connectable(v,g.value):Er(e.connectable)?e.connectable:d.value));function N(e){const t=sr(e);E.value&&w.value&&(t&&0===e.button||!t)&&k(e)}function C(e){p&&(u.value||w.value)&&E.value&&S(e)}return t.onMounted((()=>{var t;if(!v.dimensions.width||!v.dimensions.height)return;const n=null==(t=v.handleBounds[r.value])?void 0:t.find((t=>t.id===e.id));if(!c.value||n)return;const o=c.value.querySelector(".vue-flow__transformationpane");if(!(m.value&&y.value&&o&&e.id))return;const i=m.value.getBoundingClientRect(),a=y.value.getBoundingClientRect(),l=window.getComputedStyle(o),{m22:u}=new window.DOMMatrixReadOnly(l.transform),s={id:e.id,position:e.position,x:(a.left-i.left)/u,y:(a.top-i.top)/u,type:r.value,nodeId:p,...yo(y.value)};v.handleBounds[r.value]=[...v.handleBounds[r.value]??[],s]})),n({handleClick:S,handlePointerDown:k,onClick:C,onPointerDown:N}),(n,o)=>(t.openBlock(),t.createElementBlock("div",{ref_key:"handle",ref:y,"data-id":`${t.unref(a)}-${t.unref(p)}-${e.id}-${r.value}`,"data-handleid":e.id,"data-nodeid":t.unref(p),"data-handlepos":n.position,class:t.normalizeClass(["vue-flow__handle",[`vue-flow__handle-${n.position}`,`vue-flow__handle-${e.id}`,t.unref(f),t.unref(h),r.value,{connectable:E.value,connecting:x.value,connectablestart:w.value,connectableend:b.value,connectionindicator:E.value&&(w.value&&!_.value||b.value&&_.value)}]]),onMousedown:N,onTouchstartPassive:N,onClick:C},[t.renderSlot(n.$slots,"default",{id:n.id})],42,Qr))}}),ei=function({sourcePosition:e=to.Bottom,targetPosition:n=to.Top,label:o,connectable:r=!0,isValidTargetPos:i,isValidSourcePos:a,data:l}){const u=l.label||o;return[t.h(Jr,{type:"target",position:n,connectable:r,isValidConnection:i}),"string"!=typeof u&&u?t.h(u):t.h(t.Fragment,[u]),t.h(Jr,{type:"source",position:e,connectable:r,isValidConnection:a})]};ei.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"],ei.inheritAttrs=!1,ei.compatConfig={MODE:3};const ti=ei,ni=function({targetPosition:e=to.Top,label:n,connectable:o=!0,isValidTargetPos:r,data:i}){const a=i.label||n;return[t.h(Jr,{type:"target",position:e,connectable:o,isValidConnection:r}),"string"!=typeof a&&a?t.h(a):t.h(t.Fragment,[a])]};ni.props=["targetPosition","label","isValidTargetPos","connectable","data"],ni.inheritAttrs=!1,ni.compatConfig={MODE:3};const oi=ni,ri=function({sourcePosition:e=to.Bottom,label:n,connectable:o=!0,isValidSourcePos:r,data:i}){const a=i.label||n;return["string"!=typeof a&&a?t.h(a):t.h(t.Fragment,[a]),t.h(Jr,{type:"source",position:e,connectable:o,isValidConnection:r})]};ri.props=["sourcePosition","label","isValidSourcePos","connectable","data"],ri.inheritAttrs=!1,ri.compatConfig={MODE:3};const ii=ri,ai=["transform"],li=["width","height","x","y","rx","ry"],ui=["y"],si=t.defineComponent({name:"EdgeText",compatConfig:{MODE:3},props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const n=t.ref({x:0,y:0,width:0,height:0}),o=t.ref(null),r=t.computed((()=>`translate(${e.x-n.value.width/2} ${e.y-n.value.height/2})`));function i(){if(!o.value)return;const e=o.value.getBBox();e.width===n.value.width&&e.height===n.value.height||(n.value=e)}return t.onMounted(i),t.watch([()=>e.x,()=>e.y,o,()=>e.label],i),(e,i)=>(t.openBlock(),t.createElementBlock("g",{transform:r.value,class:"vue-flow__edge-textwrapper"},[e.labelShowBg?(t.openBlock(),t.createElementBlock("rect",{key:0,class:"vue-flow__edge-textbg",width:`${n.value.width+2*e.labelBgPadding[0]}px`,height:`${n.value.height+2*e.labelBgPadding[1]}px`,x:-e.labelBgPadding[0],y:-e.labelBgPadding[1],style:t.normalizeStyle(e.labelBgStyle),rx:e.labelBgBorderRadius,ry:e.labelBgBorderRadius},null,12,li)):t.createCommentVNode("",!0),t.createElementVNode("text",t.mergeProps(e.$attrs,{ref_key:"el",ref:o,class:"vue-flow__edge-text",y:n.value.height/2,dy:"0.3em",style:e.labelStyle}),[t.renderSlot(e.$slots,"default",{},(()=>["string"!=typeof e.label?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.label),{key:0})):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createTextVNode(t.toDisplayString(e.label),1)],64))]))],16,ui)],8,ai))}}),ci=["id","d","marker-end","marker-start"],di=["d","stroke-width"],fi=t.defineComponent({name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3},props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:n}){const o=t.ref(null),r=t.ref(null),i=t.ref(null),a=t.useAttrs();return n({pathEl:o,interactionEl:r,labelEl:i}),(e,n)=>(t.openBlock(),t.createElementBlock(t.Fragment,null,[t.createElementVNode("path",t.mergeProps(t.unref(a),{id:e.id,ref_key:"pathEl",ref:o,d:e.path,class:"vue-flow__edge-path","marker-end":e.markerEnd,"marker-start":e.markerStart}),null,16,ci),e.interactionWidth?(t.openBlock(),t.createElementBlock("path",{key:0,ref_key:"interactionEl",ref:r,fill:"none",d:e.path,"stroke-width":e.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,di)):t.createCommentVNode("",!0),e.label&&e.labelX&&e.labelY?(t.openBlock(),t.createBlock(si,{key:1,ref_key:"labelEl",ref:i,x:e.labelX,y:e.labelY,label:e.label,"label-show-bg":e.labelShowBg,"label-bg-style":e.labelBgStyle,"label-bg-padding":e.labelBgPadding,"label-bg-border-radius":e.labelBgBorderRadius,"label-style":e.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):t.createCommentVNode("",!0)],64))}});function hi({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,a=Math.abs(o-t)/2;return[i,o<t?o+a:o-a,r,a]}function pi({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:a,targetControlY:l}){const u=.125*e+.375*r+.375*a+.125*n,s=.125*t+.375*i+.375*l+.125*o;return[u,s,Math.abs(u-e),Math.abs(s-t)]}function vi(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function mi({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){let a,l;switch(e){case to.Left:a=t-vi(t-o,i),l=n;break;case to.Right:a=t+vi(o-t,i),l=n;break;case to.Top:a=t,l=n-vi(n-r,i);break;case to.Bottom:a=t,l=n+vi(r-n,i)}return[a,l]}function gi(e){const{sourceX:t,sourceY:n,sourcePosition:o=to.Bottom,targetX:r,targetY:i,targetPosition:a=to.Top,curvature:l=.25}=e,[u,s]=mi({pos:o,x1:t,y1:n,x2:r,y2:i,c:l}),[c,d]=mi({pos:a,x1:r,y1:i,x2:t,y2:n,c:l}),[f,h,p,v]=pi({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:u,sourceControlY:s,targetControlX:c,targetControlY:d});return[`M${t},${n} C${u},${s} ${c},${d} ${r},${i}`,f,h,p,v]}function yi({pos:e,x1:t,y1:n,x2:o,y2:r}){let i,a;switch(e){case to.Left:case to.Right:i=.5*(t+o),a=n;break;case to.Top:case to.Bottom:i=t,a=.5*(n+r)}return[i,a]}function wi(e){const{sourceX:t,sourceY:n,sourcePosition:o=to.Bottom,targetX:r,targetY:i,targetPosition:a=to.Top}=e,[l,u]=yi({pos:o,x1:t,y1:n,x2:r,y2:i}),[s,c]=yi({pos:a,x1:r,y1:i,x2:t,y2:n}),[d,f,h,p]=pi({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:s,targetControlY:c});return[`M${t},${n} C${l},${u} ${s},${c} ${r},${i}`,d,f,h,p]}const bi={[to.Left]:{x:-1,y:0},[to.Right]:{x:1,y:0},[to.Top]:{x:0,y:-1},[to.Bottom]:{x:0,y:1}};function _i(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function xi({source:e,sourcePosition:t=to.Bottom,target:n,targetPosition:o=to.Top,center:r,offset:i}){const a=bi[t],l=bi[o],u={x:e.x+a.x*i,y:e.y+a.y*i},s={x:n.x+l.x*i,y:n.y+l.y*i},c=function({source:e,sourcePosition:t=to.Bottom,target:n}){return t===to.Left||t===to.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}({source:u,sourcePosition:t,target:s}),d=0!==c.x?"x":"y",f=c[d];let h,p,v;const m={x:0,y:0},g={x:0,y:0},[y,w,b,_]=hi({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*l[d]==-1){p=r.x??y,v=r.y??w;const e=[{x:p,y:u.y},{x:p,y:s.y}],t=[{x:u.x,y:v},{x:s.x,y:v}];h=a[d]===f?"x"===d?e:t:"x"===d?t:e}else{const r=[{x:u.x,y:s.y}],c=[{x:s.x,y:u.y}];if(h="x"===d?a.x===f?c:r:a.y===f?r:c,t===o){const t=Math.abs(e[d]-n[d]);if(t<=i){const o=Math.min(i-1,i-t);a[d]===f?m[d]=(u[d]>e[d]?-1:1)*o:g[d]=(s[d]>n[d]?-1:1)*o}}if(t!==o){const e="x"===d?"y":"x",t=a[d]===l[e],n=u[e]>s[e],o=u[e]<s[e];(1===a[d]&&(!t&&n||t&&o)||1!==a[d]&&(!t&&o||t&&n))&&(h="x"===d?r:c)}const y={x:u.x+m.x,y:u.y+m.y},w={x:s.x+g.x,y:s.y+g.y};Math.max(Math.abs(y.x-h[0].x),Math.abs(w.x-h[0].x))>=Math.max(Math.abs(y.y-h[0].y),Math.abs(w.y-h[0].y))?(p=(y.x+w.x)/2,v=h[0].y):(p=h[0].x,v=(y.y+w.y)/2)}return[[e,{x:u.x+m.x,y:u.y+m.y},...h,{x:s.x+g.x,y:s.y+g.y},n],p,v,b,_]}function ki(e){const{sourceX:t,sourceY:n,sourcePosition:o=to.Bottom,targetX:r,targetY:i,targetPosition:a=to.Top,borderRadius:l=5,centerX:u,centerY:s,offset:c=20}=e,[d,f,h,p,v]=xi({source:{x:t,y:n},sourcePosition:o,target:{x:r,y:i},targetPosition:a,center:{x:u,y:s},offset:c});return[d.reduce(((e,t,n)=>{let o;return o=n>0&&n<d.length-1?function(e,t,n,o){const r=Math.min(_i(e,t)/2,_i(t,n)/2,o),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return`L${i} ${a}`;if(e.y===a)return`L ${i+r*(e.x<n.x?-1:1)},${a}Q ${i},${a} ${i},${a+r*(e.y<n.y?1:-1)}`;const l=e.x<n.x?1:-1;return`L ${i},${a+r*(e.y<n.y?-1:1)}Q ${i},${a} ${i+r*l},${a}`}(d[n-1],t,d[n+1],l):`${0===n?"M":"L"}${t.x} ${t.y}`,e+=o}),""),f,h,p,v]}const Si=t.defineComponent({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup:(e,{attrs:n})=>()=>{const[o,r,i]=function(e){const{sourceX:t,sourceY:n,targetX:o,targetY:r}=e,[i,a,l,u]=hi({sourceX:t,sourceY:n,targetX:o,targetY:r});return[`M ${t},${n}L ${o},${r}`,i,a,l,u]}(e);return t.h(fi,{path:o,labelX:r,labelY:i,...n,...e})}}),Ei=t.defineComponent({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup:(e,{attrs:n})=>()=>{const[o,r,i]=ki({...e,sourcePosition:e.sourcePosition??to.Bottom,targetPosition:e.targetPosition??to.Top});return t.h(fi,{path:o,labelX:r,labelY:i,...n,...e})}}),Ni=t.defineComponent({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup:(e,{attrs:n})=>()=>t.h(Ei,{...e,...n,borderRadius:0})}),Ci=t.defineComponent({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup:(e,{attrs:n})=>()=>{const[o,r,i]=gi({...e,sourcePosition:e.sourcePosition??to.Bottom,targetPosition:e.targetPosition??to.Top});return t.h(fi,{path:o,labelX:r,labelY:i,...n,...e})}}),Mi=t.defineComponent({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup:(e,{attrs:n})=>()=>{const[o,r,i]=wi({...e,sourcePosition:e.sourcePosition??to.Bottom,targetPosition:e.targetPosition??to.Top});return t.h(fi,{path:o,labelX:r,labelY:i,...n,...e})}}),Bi={input:ii,default:ti,output:oi},Pi={default:Ci,straight:Si,step:Ni,smoothstep:Ei,simplebezier:Mi};class Ti{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var e;const n=null==(e=t.getCurrentInstance())?void 0:e.appContext.app,o=(null==n?void 0:n.config.globalProperties.$vueFlowStorage)??Ti.instance;return Ti.instance=o??new Ti,n&&(n.config.globalProperties.$vueFlowStorage=Ti.instance),Ti.instance}set(e,t){return this.flows.set(e,t)}get(e){return this.flows.get(e)}remove(e){return this.flows.delete(e)}create(e,n){const o=Zr(),r=t.reactive(o),i={};for(const[t,d]of Object.entries(r.hooks)){i[`on${t.charAt(0).toUpperCase()+t.slice(1)}`]=d.on}const a={};for(const[t,d]of Object.entries(r.hooks))a[t]=d.trigger;const l=t.computed((()=>{const e=new Map;for(const t of r.nodes)e.set(t.id,t);return e})),u=t.computed((()=>{const e=new Map;for(const t of r.edges)e.set(t.id,t);return e})),s=function(e,n,o){const r=t.computed((()=>e=>n.value.get(e))),i=t.computed((()=>e=>o.value.get(e))),a=t.computed((()=>{const t={...Pi,...e.edgeTypes},n=Object.keys(t);for(const o of e.edges)o.type&&!n.includes(o.type)&&(t[o.type]=o.type);return t})),l=t.computed((()=>{const t={...Bi,...e.nodeTypes},n=Object.keys(t);for(const o of e.nodes)o.type&&!n.includes(o.type)&&(t[o.type]=o.type);return t})),u=t.computed((()=>e.onlyRenderVisibleElements?Do(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes)),s=t.computed((()=>{if(e.onlyRenderVisibleElements){const t=[];for(const o of e.edges){const r=n.value.get(o.source),i=n.value.get(o.target);rr({sourcePos:r.computedPosition||{x:0,y:0},targetPos:i.computedPosition||{x:0,y:0},sourceWidth:r.dimensions.width,sourceHeight:r.dimensions.height,targetWidth:i.dimensions.width,targetHeight:i.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&t.push(o)}return t}return e.edges})),c=t.computed((()=>[...u.value,...s.value])),d=t.computed((()=>{const t=[];for(const n of e.nodes)n.selected&&t.push(n);return t})),f=t.computed((()=>{const t=[];for(const n of e.edges)n.selected&&t.push(n);return t})),h=t.computed((()=>[...d.value,...f.value])),p=t.computed((()=>{const t=[];for(const n of e.nodes)n.dimensions.width&&n.dimensions.height&&void 0!==n.handleBounds&&t.push(n);return t})),v=t.computed((()=>u.value.length>0&&p.value.length===u.value.length));return{getNode:r,getEdge:i,getElements:c,getEdgeTypes:a,getNodeTypes:l,getEdges:s,getNodes:u,getSelectedElements:h,getSelectedNodes:d,getSelectedEdges:f,getNodesInitialized:p,areNodesInitialized:v}}(r,l,u),c=Wr(r,l,u);c.setState({...r,...n});const f={...i,...s,...c,...d(r),nodeLookup:l,edgeLookup:u,emits:a,id:e,vueFlowVersion:"1.42.3",$destroy:()=>{this.remove(e)}};return this.set(e,f),f}getId(){return"vue-flow-"+this.currentId++}}function $i(e){const o=Ti.getInstance(),r=t.getCurrentScope(),i="object"==typeof e,a=i?e:{id:e},l=a.id,u=l??(null==r?void 0:r.vueFlowId);let s;if(r){const e=t.inject($r,null);null==e||u&&e.id!==u||(s=e)}if(s||u&&(s=o.get(u)),!s||u&&s.id!==u){const e=l??o.getId(),i=o.create(e,a);s=i;(r??t.effectScope(!0)).run((()=>{t.watch(i.applyDefault,((e,t,n)=>{const o=e=>{i.applyNodeChanges(e)},r=e=>{i.applyEdgeChanges(e)};e?(i.onNodesChange(o),i.onEdgesChange(r)):(i.hooks.value.nodesChange.off(o),i.hooks.value.edgesChange.off(r)),n((()=>{i.hooks.value.nodesChange.off(o),i.hooks.value.edgesChange.off(r)}))}),{immediate:!0}),n((()=>{if(s){const e=o.get(s.id);e?e.$destroy():_r(`No store instance found for id ${s.id} in storage.`)}}))}))}else i&&s.setState(a);if(r&&(t.provide($r,s),r.vueFlowId=s.id),i){const e=t.getCurrentInstance();"VueFlow"!==(null==e?void 0:e.type.name)&&s.emits.error(new ur(ar.USEVUEFLOW_OPTIONS))}return s}const Ii=t.defineComponent({name:"UserSelection",compatConfig:{MODE:3},props:{userSelectionRect:{}},setup:e=>(e,n)=>(t.openBlock(),t.createElementBlock("div",{class:"vue-flow__selection vue-flow__container",style:t.normalizeStyle({width:`${e.userSelectionRect.width}px`,height:`${e.userSelectionRect.height}px`,transform:`translate(${e.userSelectionRect.x}px, ${e.userSelectionRect.y}px)`})},null,4))}),zi=["tabIndex"],Ai=t.defineComponent({name:"NodesSelection",compatConfig:{MODE:3},setup(e){const{emits:n,viewport:o,getSelectedNodes:r,noPanClassName:i,disableKeyboardA11y:a,userSelectionActive:l}=$i(),u=Gr(),s=t.ref(null),c=Or({el:s,onStart(e){n.selectionDragStart(e)},onDrag(e){n.selectionDrag(e)},onStop(e){n.selectionDragStop(e)}});t.onMounted((()=>{var e;a.value||null==(e=s.value)||e.focus({preventScroll:!0})}));const d=t.computed((()=>Ao(r.value))),f=t.computed((()=>({width:`${d.value.width}px`,height:`${d.value.height}px`,top:`${d.value.y}px`,left:`${d.value.x}px`})));function h(e){n.selectionContextMenu({event:e,nodes:r.value})}function p(e){a||vo[e.key]&&(e.preventDefault(),u({x:vo[e.key].x,y:vo[e.key].y},e.shiftKey))}return(e,n)=>!t.unref(l)&&d.value.width&&d.value.height?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(["vue-flow__nodesselection vue-flow__container",t.unref(i)]),style:t.normalizeStyle({transform:`translate(${t.unref(o).x}px,${t.unref(o).y}px) scale(${t.unref(o).zoom})`})},[t.createElementVNode("div",{ref_key:"el",ref:s,class:t.normalizeClass([{dragging:t.unref(c)},"vue-flow__nodesselection-rect"]),style:t.normalizeStyle(f.value),tabIndex:t.unref(a)?void 0:-1,onContextmenu:h,onKeydown:p},null,46,zi)],6)):t.createCommentVNode("",!0)}});const Di=t.defineComponent({name:"Pane",compatConfig:{MODE:3},props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:n,nodes:o,viewport:r,emits:i,userSelectionActive:a,removeSelectedElements:l,userSelectionRect:u,elementsSelectable:s,nodesSelectionActive:c,getSelectedEdges:d,getSelectedNodes:f,removeNodes:h,removeEdges:p,selectionMode:v,deleteKeyCode:m,multiSelectionKeyCode:g,multiSelectionActive:y,edgeLookup:w,nodeLookup:b,connectionLookup:_,defaultEdgeOptions:x,connectionStartHandle:k}=$i(),S=t.ref(null),E=t.ref(new Set),N=t.ref(new Set),C=t.ref(),M=t.toRef((()=>s.value&&(e.isSelecting||a.value))),B=t.toRef((()=>null!==k.value));let P=!1,T=!1;const $=co(m,{actInsideInputWithModifier:!1}),I=co(g);function z(e,t){return n=>{n.target===t&&(null==e||e(n))}}function A(e){P||B.value?P=!1:(i.paneClick(e),l(),c.value=!1)}function D(e){e.preventDefault(),e.stopPropagation(),i.paneContextMenu(e)}function V(e){i.paneScroll(e)}return t.watch($,(e=>{e&&(h(f.value),p(d.value),c.value=!1)})),t.watch(I,(e=>{y.value=e})),(d,h)=>(t.openBlock(),t.createElementBlock("div",{ref_key:"container",ref:S,class:t.normalizeClass(["vue-flow__pane vue-flow__container",{selection:d.isSelecting}]),onClick:h[0]||(h[0]=e=>M.value?void 0:z(A,S.value)(e)),onContextmenu:h[1]||(h[1]=e=>z(D,S.value)(e)),onWheelPassive:h[2]||(h[2]=e=>z(V,S.value)(e)),onPointerenter:h[3]||(h[3]=e=>M.value?void 0:t.unref(i).paneMouseEnter(e)),onPointerdown:h[4]||(h[4]=o=>M.value?function(t){var o,r,a;if(C.value=null==(o=n.value)?void 0:o.getBoundingClientRect(),!s.value||!e.isSelecting||0!==t.button||t.target!==S.value||!C.value)return;null==(a=null==(r=t.target)?void 0:r.setPointerCapture)||a.call(r,t.pointerId);const{x:c,y:d}=function(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}(t,C.value);T=!0,P=!1,l(),u.value={width:0,height:0,startX:c,startY:d,x:c,y:d},i.selectionStart(t)}(o):t.unref(i).paneMouseMove(o)),onPointermove:h[5]||(h[5]=e=>M.value?function(e){var t;if(!C.value||!u.value)return;P=!0;const{x:n,y:l}=dr(e,C.value),{startX:s=0,startY:d=0}=u.value,f={startX:s,startY:d,x:n<s?n:s,y:l<d?l:d,width:Math.abs(n-s),height:Math.abs(l-d)},h=E.value,p=N.value;E.value=new Set(Do(o.value,f,r.value,v.value===no.Partial,!0).map((e=>e.id))),N.value=new Set;const m=(null==(t=x.value)?void 0:t.selectable)??!0;for(const o of E.value){const e=_.value.get(o);if(e)for(const{edgeId:t}of e.values()){const e=w.value.get(t);e&&(e.selectable??m)&&N.value.add(t)}}if(!Pr(h,E.value)){const e=Zo(b.value,E.value,!0);i.nodesChange(e)}if(!Pr(p,N.value)){const e=Zo(w.value,N.value);i.edgesChange(e)}u.value=f,a.value=!0,c.value=!1}(e):t.unref(i).paneMouseMove(e)),onPointerup:h[6]||(h[6]=t=>M.value?function(t){var n;0===t.button&&T&&(null==(n=t.target)||n.releasePointerCapture(t.pointerId),!a.value&&u.value&&t.target===S.value&&A(t),a.value=!1,u.value=null,c.value=E.value.size>0,i.selectionEnd(t),e.selectionKeyPressed&&(P=!1),T=!1)}(t):void 0),onPointerleave:h[7]||(h[7]=e=>t.unref(i).paneMouseLeave(e))},[t.renderSlot(d.$slots,"default"),t.unref(a)&&t.unref(u)?(t.openBlock(),t.createBlock(Ii,{key:0,"user-selection-rect":t.unref(u)},null,8,["user-selection-rect"])):t.createCommentVNode("",!0),t.unref(c)&&t.unref(f).length?(t.openBlock(),t.createBlock(Ai,{key:1})):t.createCommentVNode("",!0)],34))}}),Vi=t.defineComponent({name:"Transform",compatConfig:{MODE:3},setup(e){const{viewport:n,fitViewOnInit:o,fitViewOnInitDone:r}=$i(),i=t.computed((()=>!!o.value&&!r.value)),a=t.computed((()=>`translate(${n.value.x}px,${n.value.y}px) scale(${n.value.zoom})`));return(e,n)=>(t.openBlock(),t.createElementBlock("div",{class:"vue-flow__transformationpane vue-flow__container",style:t.normalizeStyle({transform:a.value,opacity:i.value?0:void 0})},[t.renderSlot(e.$slots,"default")],4))}}),Oi=t.defineComponent({name:"Viewport",compatConfig:{MODE:3},setup(e){const{minZoom:n,maxZoom:o,defaultViewport:r,translateExtent:i,zoomActivationKeyCode:a,selectionKeyCode:l,panActivationKeyCode:u,panOnScroll:s,panOnScrollMode:c,panOnScrollSpeed:d,panOnDrag:f,zoomOnDoubleClick:h,zoomOnPinch:p,zoomOnScroll:v,preventScrolling:m,noWheelClassName:g,noPanClassName:y,emits:w,connectionStartHandle:_,userSelectionActive:x,paneDragging:k,d3Zoom:S,d3Selection:E,d3ZoomHandler:N,viewport:C,viewportRef:M,paneClickDistance:B}=$i();!function(e){const{emits:n,dimensions:o}=$i();let r;t.onMounted((()=>{const i=e.value,a=()=>{if(!i)return;const e=yo(i);0!==e.width&&0!==e.height||n.error(new ur(ar.MISSING_VIEWPORT_DIMENSIONS)),o.value={width:e.width||500,height:e.height||500}};a(),window.addEventListener("resize",a),i&&(r=new ResizeObserver((()=>a())),r.observe(i)),t.onBeforeUnmount((()=>{window.removeEventListener("resize",a),r&&i&&r.unobserve(i)}))}))}(M);const P=t.ref(!1),T=t.ref(!1);let $=null,I=!1,z=0,A={x:0,y:0,zoom:0};const D=co(u),V=co(l),O=co(a),R=t.toRef((()=>(!V.value||V.value&&!0===l.value)&&(D.value||f.value))),L=t.toRef((()=>D.value||s.value)),H=t.toRef((()=>V.value||!0===l.value&&!0!==R.value));function F(e,t){return 2===t&&Array.isArray(e)&&e.includes(2)}function Y(e){const t=e.ctrlKey&&fr()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t}function G(e){return{x:e.x,y:e.y,zoom:e.k}}function X(e,t){return e.target.closest(`.${t}`)}return t.onMounted((()=>{if(!M.value)return void _r("Viewport element is missing");const e=M.value,a=e.getBoundingClientRect(),u=function(){var e,t,n,o=Zn,r=Kn,i=eo,a=Qn,l=Jn,u=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],c=250,d=Ut,f=b("start","zoom","end"),h=0,p=10;function v(e){e.property("__zoom",Wn).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",E).filter(l).on("touchstart.zoom",N).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(e,t){return(t=Math.max(u[0],Math.min(u[1],t)))===e.k?e:new Xn(t,e.x,e.y)}function g(e,t,n){var o=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;return o===e.x&&r===e.y?e:new Xn(e.k,o,r)}function y(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function w(e,t,n,o){e.on("start.zoom",(function(){_(this,arguments).event(o).start()})).on("interrupt.zoom end.zoom",(function(){_(this,arguments).event(o).end()})).tween("zoom",(function(){var e=this,i=arguments,a=_(e,i).event(o),l=r.apply(e,i),u=null==n?y(l):"function"==typeof n?n.apply(e,i):n,s=Math.max(l[1][0]-l[0][0],l[1][1]-l[0][1]),c=e.__zoom,f="function"==typeof t?t.apply(e,i):t,h=d(c.invert(u).concat(s/c.k),f.invert(u).concat(s/f.k));return function(e){if(1===e)e=f;else{var t=h(e),n=s/t[2];e=new Xn(n,u[0]-t[0]*n,u[1]-t[1]*n)}a.zoom(null,e)}}))}function _(e,t,n){return!n&&e.__zooming||new x(e,t)}function x(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=r.apply(e,t),this.taps=0}function k(e,...t){if(o.apply(this,arguments)){var n=_(this,t).event(e),r=this.__zoom,l=Math.max(u[0],Math.min(u[1],r.k*Math.pow(2,a.apply(this,arguments)))),c=Ve(e);if(n.wheel)n.mouse[0][0]===c[0]&&n.mouse[0][1]===c[1]||(n.mouse[1]=r.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(r.k===l)return;n.mouse=[c,r.invert(c)],yn(this),n.start()}qn(e),n.wheel=setTimeout((function(){n.wheel=null,n.end()}),150),n.zoom("mouse",i(g(m(r,l),n.mouse[0],n.mouse[1]),n.extent,s))}}function S(e,...t){if(!n&&o.apply(this,arguments)){var r=e.currentTarget,a=_(this,t,!0).event(e),l=De(e.view).on("mousemove.zoom",(function(e){if(qn(e),!a.moved){var t=e.clientX-c,n=e.clientY-d;a.moved=t*t+n*n>h}a.event(e).zoom("mouse",i(g(a.that.__zoom,a.mouse[0]=Ve(e,r),a.mouse[1]),a.extent,s))}),!0).on("mouseup.zoom",(function(e){l.on("mousemove.zoom mouseup.zoom",null),Ye(e.view,a.moved),qn(e),a.event(e).end()}),!0),u=Ve(e,r),c=e.clientX,d=e.clientY;Fe(e.view),jn(e),a.mouse=[u,this.__zoom.invert(u)],yn(this),a.start()}}function E(e,...t){if(o.apply(this,arguments)){var n=this.__zoom,a=Ve(e.changedTouches?e.changedTouches[0]:e,this),l=n.invert(a),u=n.k*(e.shiftKey?.5:2),d=i(g(m(n,u),a,l),r.apply(this,t),s);qn(e),c>0?De(this).transition().duration(c).call(w,d,a,e):De(this).call(v.transform,d,a,e)}}function N(n,...r){if(o.apply(this,arguments)){var i,a,l,u,s=n.touches,c=s.length,d=_(this,r,n.changedTouches.length===c).event(n);for(jn(n),a=0;a<c;++a)u=[u=Ve(l=s[a],this),this.__zoom.invert(u),l.identifier],d.touch0?d.touch1||d.touch0[2]===u[2]||(d.touch1=u,d.taps=0):(d.touch0=u,i=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),i&&(d.taps<2&&(t=u[0],e=setTimeout((function(){e=null}),500)),yn(this),d.start())}}function C(e,...t){if(this.__zooming){var n,o,r,a,l=_(this,t).event(e),u=e.changedTouches,c=u.length;for(qn(e),n=0;n<c;++n)r=Ve(o=u[n],this),l.touch0&&l.touch0[2]===o.identifier?l.touch0[0]=r:l.touch1&&l.touch1[2]===o.identifier&&(l.touch1[0]=r);if(o=l.that.__zoom,l.touch1){var d=l.touch0[0],f=l.touch0[1],h=l.touch1[0],p=l.touch1[1],v=(v=h[0]-d[0])*v+(v=h[1]-d[1])*v,y=(y=p[0]-f[0])*y+(y=p[1]-f[1])*y;o=m(o,Math.sqrt(v/y)),r=[(d[0]+h[0])/2,(d[1]+h[1])/2],a=[(f[0]+p[0])/2,(f[1]+p[1])/2]}else{if(!l.touch0)return;r=l.touch0[0],a=l.touch0[1]}l.zoom("touch",i(g(o,r,a),l.extent,s))}}function M(e,...o){if(this.__zooming){var r,i,a=_(this,o).event(e),l=e.changedTouches,u=l.length;for(jn(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),r=0;r<u;++r)i=l[r],a.touch0&&a.touch0[2]===i.identifier?delete a.touch0:a.touch1&&a.touch1[2]===i.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(i=Ve(i,this),Math.hypot(t[0]-i[0],t[1]-i[1])<p)){var s=De(this).on("dblclick.zoom");s&&s.apply(this,arguments)}}}return v.transform=function(e,t,n,o){var r=e.selection?e.selection():e;r.property("__zoom",Wn),e!==r?w(e,t,n,o):r.interrupt().each((function(){_(this,arguments).event(o).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},v.scaleBy=function(e,t,n,o){v.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n,o)},v.scaleTo=function(e,t,n,o){v.transform(e,(function(){var e=r.apply(this,arguments),o=this.__zoom,a=null==n?y(e):"function"==typeof n?n.apply(this,arguments):n,l=o.invert(a),u="function"==typeof t?t.apply(this,arguments):t;return i(g(m(o,u),a,l),e,s)}),n,o)},v.translateBy=function(e,t,n,o){v.transform(e,(function(){return i(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),s)}),null,o)},v.translateTo=function(e,t,n,o,a){v.transform(e,(function(){var e=r.apply(this,arguments),a=this.__zoom,l=null==o?y(e):"function"==typeof o?o.apply(this,arguments):o;return i(Un.translate(l[0],l[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,s)}),o,a)},x.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=De(this.that).datum();f.call(e,this.that,new Gn(e,{sourceEvent:this.sourceEvent,target:v,transform:this.that.__zoom,dispatch:f}),t)}},v.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:Yn(+e),v):a},v.filter=function(e){return arguments.length?(o="function"==typeof e?e:Yn(!!e),v):o},v.touchable=function(e){return arguments.length?(l="function"==typeof e?e:Yn(!!e),v):l},v.extent=function(e){return arguments.length?(r="function"==typeof e?e:Yn([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),v):r},v.scaleExtent=function(e){return arguments.length?(u[0]=+e[0],u[1]=+e[1],v):[u[0],u[1]]},v.translateExtent=function(e){return arguments.length?(s[0][0]=+e[0][0],s[1][0]=+e[1][0],s[0][1]=+e[0][1],s[1][1]=+e[1][1],v):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},v.constrain=function(e){return arguments.length?(i=e,v):i},v.duration=function(e){return arguments.length?(c=+e,v):c},v.interpolate=function(e){return arguments.length?(d=e,v):d},v.on=function(){var e=f.on.apply(f,arguments);return e===f?v:e},v.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,v):Math.sqrt(h)},v.tapDistance=function(e){return arguments.length?(p=+e,v):p},v}().clickDistance(B.value).scaleExtent([n.value,o.value]).translateExtent(i.value),_=De(e).call(u),V=_.on("wheel.zoom"),H=Un.translate(r.value.x??0,r.value.y??0).scale(wo(r.value.zoom??1,n.value,o.value)),U=[[0,0],[a.width,a.height]],j=u.constrain()(H,U,i.value);u.transform(_,j),u.wheelDelta(Y),S.value=u,E.value=_,N.value=V,C.value={x:j.x,y:j.y,zoom:j.k},u.on("start",(e=>{var t;if(!e.sourceEvent)return null;z=e.sourceEvent.button,P.value=!0;const n=G(e.transform);"mousedown"===(null==(t=e.sourceEvent)?void 0:t.type)&&(k.value=!0),A=n,w.viewportChangeStart(n),w.moveStart({event:e,flowTransform:n})})),u.on("end",(e=>{if(!e.sourceEvent)return null;if(P.value=!1,k.value=!1,F(R.value,z??0)&&!I&&w.paneContextMenu(e.sourceEvent),I=!1,t=A,n=e.transform,t.x!==n.x&&!Number.isNaN(n.x)||t.y!==n.y&&!Number.isNaN(n.y)||t.zoom!==n.k&&!Number.isNaN(n.k)){const t=G(e.transform);A=t,w.viewportChangeEnd(t),w.moveEnd({event:e,flowTransform:t})}var t,n})),u.filter((e=>{var t;const n=O.value||v.value,o=p.value&&e.ctrlKey,r=e.button;if(1===r&&"mousedown"===e.type&&(X(e,"vue-flow__node")||X(e,"vue-flow__edge")))return!0;if(!(R.value||n||L.value||h.value||p.value))return!1;if(x.value)return!1;if(!h.value&&"dblclick"===e.type)return!1;if(X(e,g.value)&&"wheel"===e.type)return!1;if(X(e,y.value)&&("wheel"!==e.type||L.value&&"wheel"===e.type&&!O.value))return!1;if(!p.value&&e.ctrlKey&&"wheel"===e.type)return!1;if(!n&&!L.value&&!o&&"wheel"===e.type)return!1;if(!p&&"touchstart"===e.type&&(null==(t=e.touches)?void 0:t.length)>1)return e.preventDefault(),!1;if(!R.value&&("mousedown"===e.type||"touchstart"===e.type))return!1;if(!0===l.value&&Array.isArray(f.value)&&f.value.includes(0)&&0===r)return!1;if(Array.isArray(f.value)&&!f.value.includes(r)&&("mousedown"===e.type||"touchstart"===e.type))return!1;const i=Array.isArray(f.value)&&f.value.includes(r)||!0===l.value&&Array.isArray(f.value)&&!f.value.includes(0)||!r||r<=1;return(!e.ctrlKey||D.value||"wheel"===e.type)&&i})),t.watch([x,R],(()=>{x.value&&!P.value?u.on("zoom",null):x.value||u.on("zoom",(e=>{C.value={x:e.transform.x,y:e.transform.y,zoom:e.transform.k};const t=G(e.transform);I=F(R.value,z??0),w.viewportChange(t),w.move({event:e,flowTransform:t})}))}),{immediate:!0}),t.watch([x,L,c,O,p,m,g],(()=>{!L.value||O.value||x.value?void 0!==V&&_.on("wheel.zoom",(function(e,t){const n=!m.value&&"wheel"===e.type&&!e.ctrlKey,o=O.value||v.value,r=p.value&&e.ctrlKey;if(!o&&!s.value&&!r&&"wheel"===e.type||n||X(e,g.value))return null;e.preventDefault(),V.call(this,e,t)}),{passive:!1}):_.on("wheel.zoom",(e=>{if(X(e,g.value))return!1;const t=O.value||v.value,n=p.value&&e.ctrlKey;if(!(!m.value||L.value||t||n))return!1;e.preventDefault(),e.stopImmediatePropagation();const o=_.property("__zoom").k||1,r=fr();if(!D.value&&e.ctrlKey&&p.value&&r){const t=Ve(e),n=o*2**Y(e);return void u.scaleTo(_,n,t,e)}const i=1===e.deltaMode?20:1;let a=c.value===ao.Vertical?0:e.deltaX*i,l=c.value===ao.Horizontal?0:e.deltaY*i;!r&&e.shiftKey&&c.value!==ao.Vertical&&!a&&l&&(a=l,l=0),u.translateBy(_,-a/o*d.value,-l/o*d.value);const s=G(_.property("__zoom"));$&&clearTimeout($),T.value?(w.move({event:e,flowTransform:s}),w.viewportChange(s),$=setTimeout((()=>{w.moveEnd({event:e,flowTransform:s}),w.viewportChangeEnd(s),T.value=!1}),150)):(T.value=!0,w.moveStart({event:e,flowTransform:s}),w.viewportChangeStart(s))}),{passive:!1})}),{immediate:!0})})),(e,n)=>(t.openBlock(),t.createElementBlock("div",{ref_key:"viewportRef",ref:M,class:"vue-flow__viewport vue-flow__container"},[t.createVNode(Di,{"is-selecting":H.value,"selection-key-pressed":t.unref(V),class:t.normalizeClass({connecting:!!t.unref(_),dragging:t.unref(k),draggable:!0===t.unref(f)||Array.isArray(t.unref(f))&&t.unref(f).includes(0)})},{default:t.withCtx((()=>[t.createVNode(Vi,null,{default:t.withCtx((()=>[t.renderSlot(e.$slots,"default")])),_:3})])),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),Ri=["id"],Li=["id"],Hi=["id"],Fi=t.defineComponent({name:"A11yDescriptions",compatConfig:{MODE:3},setup(e){const{id:n,disableKeyboardA11y:o,ariaLiveMessage:r}=$i();return(e,i)=>(t.openBlock(),t.createElementBlock(t.Fragment,null,[t.createElementVNode("div",{id:`${t.unref(fo)}-${t.unref(n)}`,style:{display:"none"}}," Press enter or space to select a node. "+t.toDisplayString(t.unref(o)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Ri),t.createElementVNode("div",{id:`${t.unref(ho)}-${t.unref(n)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Li),t.unref(o)?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",{key:0,id:`${t.unref("vue-flow__aria-live")}-${t.unref(n)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},t.toDisplayString(t.unref(r)),9,Hi))],64))}});function Yi(e,t,n){return n===to.Left?e-t:n===to.Right?e+t:e}function Gi(e,t,n){return n===to.Top?e-t:n===to.Bottom?e+t:e}const Xi=function({radius:e=10,centerX:n=0,centerY:o=0,position:r=to.Top,type:i}){return t.h("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:Yi(n,e,r),cy:Gi(o,e,r),r:e,stroke:"transparent",fill:"transparent"})};Xi.props=["radius","centerX","centerY","position","type"],Xi.compatConfig={MODE:3};const Ui=Xi,ji=t.defineComponent({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:n,addSelectedEdges:o,connectionMode:r,edgeUpdaterRadius:i,emits:a,nodesSelectionActive:l,noPanClassName:u,getEdgeTypes:s,removeSelectedEdges:c,findEdge:d,findNode:f,isValidConnection:h,multiSelectionActive:p,disableKeyboardA11y:v,elementsSelectable:m,edgesUpdatable:g,edgesFocusable:y,hooks:w}=$i(),b=t.computed((()=>d(e.id))),{emit:_,on:x}=Rr(b.value,a),k=t.inject(Vr),S=t.getCurrentInstance(),E=t.ref(!1),N=t.ref(!1),C=t.ref(""),M=t.ref(null),B=t.ref("source"),P=t.ref(null),T=t.toRef((()=>void 0===b.value.selectable?m.value:b.value.selectable)),$=t.toRef((()=>void 0===b.value.updatable?g.value:b.value.updatable)),I=t.toRef((()=>void 0===b.value.focusable?y.value:b.value.focusable));t.provide(Ar,e.id),t.provide(Dr,P);const z=t.computed((()=>b.value.class instanceof Function?b.value.class(b.value):b.value.class)),A=t.computed((()=>b.value.style instanceof Function?b.value.style(b.value):b.value.style)),D=t.computed((()=>{const e=b.value.type||"default",n=null==k?void 0:k[`edge-${e}`];if(n)return n;let o=b.value.template??s.value[e];if("string"==typeof o&&S){const n=Object.keys(S.appContext.components);n&&n.includes(e)&&(o=t.resolveComponent(e,!1))}return o&&"string"!=typeof o?o:(a.error(new ur(ar.EDGE_TYPE_MISSING,o)),!1)})),{handlePointerDown:V}=Hr({nodeId:C,handleId:M,type:B,isValidConnection:h,edgeUpdaterType:B,onEdgeUpdate:function(e,t){_.update({event:e,edge:b.value,connection:t})},onEdgeUpdateEnd:function(e){_.updateEnd({event:e,edge:b.value}),N.value=!1}});return()=>{const o=f(b.value.source),l=f(b.value.target),c="pathOptions"in b.value?b.value.pathOptions:{};if(!o&&!l)return a.error(new ur(ar.EDGE_SOURCE_TARGET_MISSING,b.value.id,b.value.source,b.value.target)),null;if(!o)return a.error(new ur(ar.EDGE_SOURCE_MISSING,b.value.id,b.value.source)),null;if(!l)return a.error(new ur(ar.EDGE_TARGET_MISSING,b.value.id,b.value.target)),null;if(!b.value||b.value.hidden||o.hidden||l.hidden)return null;let d;d=r.value===ro.Strict?o.handleBounds.source:[...o.handleBounds.source||[],...o.handleBounds.target||[]];const h=or(d,b.value.sourceHandle);let p;p=r.value===ro.Strict?l.handleBounds.target:[...l.handleBounds.target||[],...l.handleBounds.source||[]];const v=or(p,b.value.targetHandle),m=(null==h?void 0:h.position)||to.Bottom,g=(null==v?void 0:v.position)||to.Top,{x:y,y:_}=nr(o,h,m),{x:k,y:S}=nr(l,v,g);return b.value.sourceX=y,b.value.sourceY=_,b.value.targetX=k,b.value.targetY=S,t.h("g",{ref:P,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${!1===D.value?"default":b.value.type||"default"}`,u.value,z.value,{updating:E.value,selected:b.value.selected,animated:b.value.animated,inactive:!T.value&&!w.value.edgeClick.hasListeners()}],onClick:H,onContextmenu:F,onDblclick:Y,onMouseenter:G,onMousemove:X,onMouseleave:U,onKeyDown:I.value?Z:void 0,tabIndex:I.value?0:void 0,"aria-label":null===b.value.ariaLabel?void 0:b.value.ariaLabel||`Edge from ${b.value.source} to ${b.value.target}`,"aria-describedby":I.value?`${ho}-${n}`:void 0,role:I.value?"button":"img"},[N.value?null:t.h(!1===D.value?s.value.default:D.value,{id:e.id,sourceNode:o,targetNode:l,source:b.value.source,target:b.value.target,type:b.value.type,updatable:$.value,selected:b.value.selected,animated:b.value.animated,label:b.value.label,labelStyle:b.value.labelStyle,labelShowBg:b.value.labelShowBg,labelBgStyle:b.value.labelBgStyle,labelBgPadding:b.value.labelBgPadding,labelBgBorderRadius:b.value.labelBgBorderRadius,data:b.value.data,events:{...b.value.events,...x},style:A.value,markerStart:`url('#${Lo(b.value.markerStart,n)}')`,markerEnd:`url('#${Lo(b.value.markerEnd,n)}')`,sourcePosition:m,targetPosition:g,sourceX:y,sourceY:_,targetX:k,targetY:S,sourceHandleId:b.value.sourceHandle,targetHandleId:b.value.targetHandle,interactionWidth:b.value.interactionWidth,...c}),["source"===$.value||!0===$.value?[t.h("g",{onMousedown:j,onMouseenter:O,onMouseout:R},t.h(Ui,{position:m,centerX:y,centerY:_,radius:i.value,type:"source","data-type":"source"}))]:null,"target"===$.value||!0===$.value?[t.h("g",{onMousedown:q,onMouseenter:O,onMouseout:R},t.h(Ui,{position:g,centerX:k,centerY:S,radius:i.value,type:"target","data-type":"target"}))]:null]])};function O(){E.value=!0}function R(){E.value=!1}function L(e,t){0===e.button&&(N.value=!0,C.value=t?b.value.target:b.value.source,M.value=(t?b.value.targetHandle:b.value.sourceHandle)??"",B.value=t?"target":"source",_.updateStart({event:e,edge:b.value}),V(e))}function H(e){var t;const n={event:e,edge:b.value};T.value&&(l.value=!1,b.value.selected&&p.value?(c([b.value]),null==(t=P.value)||t.blur()):o([b.value])),_.click(n)}function F(e){_.contextMenu({event:e,edge:b.value})}function Y(e){_.doubleClick({event:e,edge:b.value})}function G(e){_.mouseEnter({event:e,edge:b.value})}function X(e){_.mouseMove({event:e,edge:b.value})}function U(e){_.mouseLeave({event:e,edge:b.value})}function j(e){L(e,!0)}function q(e){L(e,!1)}function Z(t){var n;if(!v.value&&po.includes(t.key)&&T.value){"Escape"===t.key?(null==(n=P.value)||n.blur(),c([d(e.id)])):o([d(e.id)])}}}}),qi=t.defineComponent({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:n,connectionMode:o,connectionStartHandle:r,connectionEndHandle:i,connectionPosition:a,connectionLineType:l,connectionLineStyle:u,connectionLineOptions:s,connectionStatus:c,viewport:d,findNode:f}=$i(),h=null==(e=t.inject(Vr))?void 0:e["connection-line"],p=t.computed((()=>{var e;return f(null==(e=r.value)?void 0:e.nodeId)})),v=t.computed((()=>{var e;return f(null==(e=i.value)?void 0:e.nodeId)??null})),m=t.computed((()=>({x:(a.value.x-d.value.x)/d.value.zoom,y:(a.value.y-d.value.y)/d.value.zoom}))),g=t.computed((()=>s.value.markerStart?`url(#${Lo(s.value.markerStart,n)})`:"")),y=t.computed((()=>s.value.markerEnd?`url(#${Lo(s.value.markerEnd,n)})`:""));return()=>{var e,n,a;if(!p.value||!r.value)return null;const d=r.value.id,f=r.value.type,w=p.value.handleBounds;let b=(null==w?void 0:w[f])||[];if(o.value===ro.Loose){const e=(null==w?void 0:w["source"===f?"target":"source"])||[];b=[...b,...e]}if(!b)return null;const _=(d?b.find((e=>e.id===d)):b[0])??null,x=(null==_?void 0:_.position)||to.Top,{x:k,y:S}=nr(p.value,_,x);let E=null;v.value&&(E=o.value===ro.Strict?(null==(e=v.value.handleBounds["source"===f?"target":"source"])?void 0:e.find((e=>{var t;return e.id===(null==(t=i.value)?void 0:t.id)})))||null:(null==(n=[...v.value.handleBounds.source||[],...v.value.handleBounds.target||[]])?void 0:n.find((e=>{var t;return e.id===(null==(t=i.value)?void 0:t.id)})))||null);const N=(null==(a=i.value)?void 0:a.position)??(x?wr[x]:null);if(!x||!N)return null;const C=l.value??s.value.type??oo.Bezier;let M="";const B={sourceX:k,sourceY:S,sourcePosition:x,targetX:m.value.x,targetY:m.value.y,targetPosition:N};return C===oo.Bezier?[M]=gi(B):C===oo.Step?[M]=ki({...B,borderRadius:0}):C===oo.SmoothStep?[M]=ki(B):C===oo.SimpleBezier?[M]=wi(B):M=`M${k},${S} ${m.value.x},${m.value.y}`,t.h("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},t.h("g",{class:"vue-flow__connection"},h?t.h(h,{sourceX:k,sourceY:S,sourcePosition:x,targetX:m.value.x,targetY:m.value.y,targetPosition:N,sourceNode:p.value,sourceHandle:_,targetNode:v.value,targetHandle:E,markerEnd:y.value,markerStart:g.value,connectionStatus:c.value}):t.h("path",{d:M,class:[s.value.class,c,"vue-flow__connection-path"],style:{...u.value,...s.value.style},"marker-end":y.value,"marker-start":g.value})))}}}),Zi=["id","markerWidth","markerHeight","markerUnits","orient"],Ki=t.defineComponent({name:"MarkerType",compatConfig:{MODE:3},props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup:e=>(e,n)=>(t.openBlock(),t.createElementBlock("marker",{id:e.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},[e.type===t.unref(io).ArrowClosed?(t.openBlock(),t.createElementBlock("polyline",{key:0,style:t.normalizeStyle({stroke:e.color,fill:e.color,strokeWidth:e.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):t.createCommentVNode("",!0),e.type===t.unref(io).Arrow?(t.openBlock(),t.createElementBlock("polyline",{key:1,style:t.normalizeStyle({stroke:e.color,strokeWidth:e.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):t.createCommentVNode("",!0)],8,Zi))}),Wi={class:"vue-flow__marker vue-flow__container"},Qi=t.defineComponent({name:"MarkerDefinitions",compatConfig:{MODE:3},setup(e){const{id:n,edges:o,connectionLineOptions:r,defaultMarkerColor:i}=$i(),a=t.computed((()=>{const e=new Set,t=[],a=o=>{if(o){const r=Lo(o,n);e.has(r)||("object"==typeof o?t.push({...o,id:r,color:o.color||i.value}):t.push({id:r,color:i.value,type:o}),e.add(r))}};for(const n of[r.value.markerEnd,r.value.markerStart])a(n);for(const n of o.value)for(const e of[n.markerStart,n.markerEnd])a(e);return t.sort(((e,t)=>e.id.localeCompare(t.id)))}));return(e,n)=>(t.openBlock(),t.createElementBlock("svg",Wi,[t.createElementVNode("defs",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(a.value,(e=>(t.openBlock(),t.createBlock(Ki,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,"stroke-width":e.strokeWidth,orient:e.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"])))),128))])]))}}),Ji=t.defineComponent({name:"Edges",compatConfig:{MODE:3},setup(e){const{findNode:n,getEdges:o,elevateEdgesOnSelect:r}=$i();return(e,i)=>(t.openBlock(),t.createElementBlock(t.Fragment,null,[t.createVNode(Qi),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(o),(e=>(t.openBlock(),t.createElementBlock("svg",{key:e.id,class:"vue-flow__edges vue-flow__container",style:t.normalizeStyle({zIndex:t.unref(ir)(e,t.unref(n),t.unref(r))})},[t.createVNode(t.unref(ji),{id:e.id},null,8,["id"])],4)))),128)),t.createVNode(t.unref(qi))],64))}}),ea=t.defineComponent({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:n,noPanClassName:o,selectNodesOnDrag:r,nodesSelectionActive:i,multiSelectionActive:a,emits:l,removeSelectedNodes:u,addSelectedNodes:s,updateNodeDimensions:c,onUpdateNodeInternals:d,getNodeTypes:f,nodeExtent:p,elevateNodesOnSelect:v,disableKeyboardA11y:m,ariaLiveMessage:g,snapToGrid:y,snapGrid:w,nodeDragThreshold:b,nodesDraggable:_,elementsSelectable:x,nodesConnectable:k,nodesFocusable:S,hooks:E}=$i(),N=t.ref(null);t.provide(zr,N),t.provide(Ir,e.id);const C=t.inject(Vr),M=t.getCurrentInstance(),B=Gr(),{node:P,parentNode:T}=Fr(e.id),{emit:$,on:I}=Yr(P,l),z=t.toRef((()=>void 0===P.draggable?_.value:P.draggable)),A=t.toRef((()=>void 0===P.selectable?x.value:P.selectable)),D=t.toRef((()=>void 0===P.connectable?k.value:P.connectable)),V=t.toRef((()=>void 0===P.focusable?S.value:P.focusable)),O=t.toRef((()=>A.value||z.value||E.value.nodeClick.hasListeners()||E.value.nodeDoubleClick.hasListeners()||E.value.nodeMouseEnter.hasListeners()||E.value.nodeMouseMove.hasListeners()||E.value.nodeMouseLeave.hasListeners())),R=t.toRef((()=>!!P.dimensions.width&&!!P.dimensions.height)),L=t.computed((()=>{const e=P.type||"default",n=null==C?void 0:C[`node-${e}`];if(n)return n;let o=P.template||f.value[e];if("string"==typeof o&&M){const n=Object.keys(M.appContext.components);n&&n.includes(e)&&(o=t.resolveComponent(e,!1))}return o&&"string"!=typeof o?o:(l.error(new ur(ar.NODE_TYPE_MISSING,o)),!1)})),H=Or({id:e.id,el:N,disabled:()=>!z.value,selectable:A,dragHandle:()=>P.dragHandle,onStart(e){$.dragStart(e)},onDrag(e){$.drag(e)},onStop(e){$.dragStop(e)},onClick(e){Q(e)}}),F=t.computed((()=>P.class instanceof Function?P.class(P):P.class)),Y=t.computed((()=>{const e=(P.style instanceof Function?P.style(P):P.style)||{},t=P.width instanceof Function?P.width(P):P.width,n=P.height instanceof Function?P.height(P):P.height;return!e.width&&t&&(e.width="string"==typeof t?t:`${t}px`),!e.height&&n&&(e.height="string"==typeof n?n:`${n}px`),e})),G=t.toRef((()=>Number(P.zIndex??Y.value.zIndex??0)));return d((t=>{!t.includes(e.id)&&t.length||U()})),t.onMounted((()=>{t.watch((()=>P.hidden),((t=!1,n,o)=>{!t&&N.value&&(e.resizeObserver.observe(N.value),o((()=>{N.value&&e.resizeObserver.unobserve(N.value)})))}),{immediate:!0,flush:"post"})})),t.watch([()=>P.type,()=>P.sourcePosition,()=>P.targetPosition],(()=>{t.nextTick((()=>{c([{id:e.id,nodeElement:N.value,forceUpdate:!0}])}))})),t.watch([()=>P.position.x,()=>P.position.y,()=>{var e;return null==(e=T.value)?void 0:e.computedPosition.x},()=>{var e;return null==(e=T.value)?void 0:e.computedPosition.y},()=>{var e;return null==(e=T.value)?void 0:e.computedPosition.z},G,()=>P.selected,()=>P.dimensions.height,()=>P.dimensions.width,()=>{var e;return null==(e=T.value)?void 0:e.dimensions.height},()=>{var e;return null==(e=T.value)?void 0:e.dimensions.width}],(([e,t,n,o,r,i])=>{const a={x:e,y:t,z:i+(v.value&&P.selected?1e3:0)};var l,u;P.computedPosition=void 0!==n&&void 0!==o?{x:(u=a).x+(l={x:n,y:o,z:r}).x,y:u.y+l.y,z:(l.z>u.z?l.z:u.z)+1}:a}),{flush:"post",immediate:!0}),t.watch([()=>P.extent,p],(([e,t],[n,o])=>{e===n&&t===o||X()})),"parent"===P.extent||"object"==typeof P.extent&&"range"in P.extent&&"parent"===P.extent.range?h((()=>R)).toBe(!0).then(X):X(),()=>P.hidden?null:t.h("div",{ref:N,"data-id":P.id,class:["vue-flow__node",`vue-flow__node-${!1===L.value?"default":P.type||"default"}`,{[o.value]:z.value,dragging:null==H?void 0:H.value,draggable:z.value,selected:P.selected,selectable:A.value,parent:P.isParent},F.value],style:{visibility:R.value?"visible":"hidden",zIndex:P.computedPosition.z??G.value,transform:`translate(${P.computedPosition.x}px,${P.computedPosition.y}px)`,pointerEvents:O.value?"all":"none",...Y.value},tabIndex:V.value?0:void 0,role:V.value?"button":void 0,"aria-describedby":m.value?void 0:`${fo}-${n}`,"aria-label":P.ariaLabel,onMouseenter:j,onMousemove:q,onMouseleave:Z,onContextmenu:K,onClick:Q,onDblclick:W,onKeydown:J},[t.h(!1===L.value?f.value.default:L.value,{id:P.id,type:P.type,data:P.data,events:{...P.events,...I},selected:P.selected,resizing:P.resizing,dragging:H.value,connectable:D.value,position:P.computedPosition,dimensions:P.dimensions,isValidTargetPos:P.isValidTargetPos,isValidSourcePos:P.isValidSourcePos,parent:P.parentNode,parentNodeId:P.parentNode,zIndex:P.computedPosition.z??G.value,targetPosition:P.targetPosition,sourcePosition:P.sourcePosition,label:P.label,dragHandle:P.dragHandle,onUpdateNodeInternals:U})]);function X(){const e=P.computedPosition,{computedPosition:t,position:n}=tr(P,y.value?hr(e,w.value):e,l.error,p.value,T.value);P.computedPosition.x===t.x&&P.computedPosition.y===t.y||(P.computedPosition={...P.computedPosition,...t}),P.position.x===n.x&&P.position.y===n.y||(P.position=n)}function U(){N.value&&c([{id:e.id,nodeElement:N.value,forceUpdate:!0}])}function j(e){(null==H?void 0:H.value)||$.mouseEnter({event:e,node:P})}function q(e){(null==H?void 0:H.value)||$.mouseMove({event:e,node:P})}function Z(e){(null==H?void 0:H.value)||$.mouseLeave({event:e,node:P})}function K(e){return $.contextMenu({event:e,node:P})}function W(e){return $.doubleClick({event:e,node:P})}function Q(e){A.value&&(!r.value||!z.value||b.value>0)&&Sr(P,a.value,s,u,i,!1,N.value),$.click({event:e,node:P})}function J(e){if(!uo(e)&&!m.value)if(po.includes(e.key)&&A.value){const t="Escape"===e.key;Sr(P,a.value,s,u,i,t,N.value)}else z.value&&P.selected&&vo[e.key]&&(e.preventDefault(),g.value=`Moved selected node ${e.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~P.position.x}, y: ${~~P.position.y}`,B({x:vo[e.key].x,y:vo[e.key].y},e.shiftKey))}}});const ta={class:"vue-flow__nodes vue-flow__container"},na=t.defineComponent({name:"Nodes",compatConfig:{MODE:3},setup(e){const{getNodes:n,updateNodeDimensions:o,emits:r}=$i(),i=function(e={includeHiddenNodes:!1}){const{nodes:n}=$i();return t.computed((()=>{if(0===n.value.length)return!1;for(const t of n.value)if((e.includeHiddenNodes||!t.hidden)&&(void 0===(null==t?void 0:t.handleBounds)||0===t.dimensions.width||0===t.dimensions.height))return!1;return!0}))}(),a=t.ref();return t.watch(i,(e=>{e&&t.nextTick((()=>{r.nodesInitialized(n.value)}))}),{immediate:!0}),t.onMounted((()=>{a.value=new ResizeObserver((e=>{const n=e.map((e=>({id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0})));t.nextTick((()=>o(n)))}))})),t.onBeforeUnmount((()=>{var e;return null==(e=a.value)?void 0:e.disconnect()})),(e,o)=>(t.openBlock(),t.createElementBlock("div",ta,[a.value?(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:0},t.renderList(t.unref(n),((e,n,o,r)=>{const i=[e.id];if(r&&r.key===e.id&&t.isMemoSame(r,i))return r;const l=(t.openBlock(),t.createBlock(t.unref(ea),{id:e.id,key:e.id,"resize-observer":a.value},null,8,["id","resize-observer"]));return l.memo=i,l}),o,0),128)):t.createCommentVNode("",!0)]))}});const oa=t.createElementVNode("div",{class:"vue-flow__edge-labels"},null,-1),ra=t.defineComponent({name:"VueFlow",compatConfig:{MODE:3},props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:o,emit:r}){const i=e,a=t.useSlots(),l=y(i,"modelValue",r),u=y(i,"nodes",r),s=y(i,"edges",r),c=$i(i),d=qr({modelValue:l,nodes:u,edges:s},i,c);return function(e,o){t.onBeforeMount((()=>{for(const[t,r]of Object.entries(o.value)){const o=n=>{e(t,n)};r.fns.add(o),n((()=>{r.off(o)}))}}))}(r,c.hooks),function(){const e=$i();t.watch((()=>e.viewportHelper.value.viewportInitialized),(t=>{t&&setTimeout((()=>{e.emits.init(e),e.emits.paneReady(e)}),1)}))}(),function(){const{emits:e}=$i();t.onMounted((()=>{if(xr()){const t=document.querySelector(".vue-flow__pane");t&&"1"!==window.getComputedStyle(t).zIndex&&e.error(new ur(ar.MISSING_STYLES))}}))}(),t.provide(Vr,a),t.onUnmounted((()=>{d()})),o(c),(e,n)=>(t.openBlock(),t.createElementBlock("div",{ref:t.unref(c).vueFlowRef,class:"vue-flow"},[t.createVNode(Oi,null,{default:t.withCtx((()=>[t.createVNode(Ji),oa,t.createVNode(na),t.renderSlot(e.$slots,"zoom-pane")])),_:3}),t.renderSlot(e.$slots,"default"),t.createVNode(Fi)],512))}}),ia=t.defineComponent({name:"Panel",compatConfig:{MODE:3},props:{position:{}},setup(e){const n=e,{userSelectionActive:o}=$i(),r=t.computed((()=>`${n.position}`.split("-")));return(e,n)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["vue-flow__panel",r.value]),style:t.normalizeStyle({pointerEvents:t.unref(o)?"none":"all"})},[t.renderSlot(e.$slots,"default")],6))}}),aa=[{id:"test1",type:"custom",position:{x:100,y:100},data:{label:"Start",type:"input"}},{id:"test2",type:"custom",position:{x:400,y:100},data:{label:"Process",type:"default"}},{id:"test3",type:"custom",position:{x:100,y:300},data:{label:"Process",type:"default"}},{id:"test4",type:"custom",position:{x:400,y:300},data:{label:"Process",type:"default"}},{id:"test5",type:"custom",position:{x:700,y:200},data:{label:"End",type:"output"}}],la=[{id:"e1-2",type:"custom",source:"test1",target:"test2",data:{},label:"",labelStyle:{},labelBgStyle:{},labelBgPadding:[0,0],labelBgBorderRadius:0,style:{}},{id:"e2-4",type:"custom",source:"test2",target:"test4",data:{}}],ua={snapGrid:t.ref([15,15]),dragStartPositionMap:t.ref({}),historyStack:t.ref({}),currentStackKey:t.ref({})};function sa(){const{snapGrid:e,dragStartPositionMap:n,historyStack:o,currentStackKey:r}=ua,{id:i,getSelectedNodes:a,getSelectedEdges:l,getConnectedEdges:u,addNodes:s,removeNodes:c,findEdge:d,addEdges:f,removeEdges:h,getNodes:p,updateNode:v,findNode:m,getIncomers:g,getOutgoers:y}=$i(),w=t.computed((()=>0===r.value[i])),b=t.computed((()=>{var e;return(null==(e=o.value[i])?void 0:e.length)===r.value[i]+1})),_=({nodeId:e,position:t})=>p.value.find((n=>n.id!==e&&n.position.x===t.x&&n.position.y===t.y))||null,x=e=>{const t=e.some((e=>{const t=n.value[e.id],o=t.x===e.position.x&&t.y===e.position.y;return null!==_({nodeId:e.id,position:e.position})||o})),o=[],r=e.map((({id:e,position:r})=>{o.push({id:e,position:r});const i={position:n.value[e]};return t&&v(e,i),{id:e,...i}}));t||k({actionType:"position",origin:r,change:o})},k=e=>{r.value[i]++,o.value[r.value[i]]&&o.value[i].splice(r.value[i]),o.value[i].push(e)},S=e=>{const t=!!Array.isArray(e),n=t?e:[e],o=["id","type","position","data","style"];let r=[];return n.length>0&&(r=n.map((e=>{const t={};return Object.keys(e).forEach((n=>{o.includes(n)&&(t[n]=e[n])})),t}))),t?r:r[0]},E=(e,t,n,o,r)=>{const i=y(e.id);0===i.length?(n.push([...t]),o&&t.some((e=>e.id===o))&&(null==r||r.push([...t]))):i.forEach((e=>{E(e,[...t,e],n,o,r)}))};return{snapGrid:e,isUndoDisabled:w,isRedoDisabled:b,initHistoryStack:({nodes:e,edges:t})=>{o.value[i]=[{actionType:"init",nodes:e,edges:t}],r.value[i]=0},setSnapGrid:t=>{e.value=t},addNode:e=>{s(e),k({actionType:"add",nodes:[e]})},updateNodeData:e=>{const t={...m(e.id)};v(e.id,e),k({actionType:"edit",origin:[t],change:[e]})},addEdge:e=>{f(e),k({actionType:"add",edges:[e]})},updateEdgeData:e=>{const t=d(e.id);h(e.id),f({...t,...e})},deleteElements:()=>{const e=[],t=[],n=[],o=[];let r=[];if(a.value.forEach((t=>{e.push({id:t.id,type:"remove"}),n.push(t.id),u(t.id).forEach((e=>{r.push(e.id),o.push(e)}))})),l.value.forEach((e=>{t.push({id:e.id,type:"remove"}),r.push(e.id)})),confirm("?"))return k({actionType:"delete",nodes:a.value,edges:[...l.value,...o]}),c(e),h(t),r=[...new Set(r)],{nodeIds:n,edgeIds:r}},findAvailablePosition:t=>{const n=e.value[0];let o=t.x+n;for(;_({position:{x:o,y:t.y}});)o+=n;return{x:o,y:t.y}},onNodeDragStart:({nodes:e})=>{e.forEach((({id:e})=>{const{position:t}={...m(e)};n.value[e]={x:t.x,y:t.y}}))},onNodeDragStop:({nodes:e})=>{0!==Object.keys(n.value).length&&(x(e),n.value={})},getNodeByPosition:_,executeUndo:()=>{if(0===r.value[i])return;const{actionType:e,nodes:t,edges:n,origin:a}=o.value[i][r.value[i]--];if("position"===e&&a)a.forEach((e=>{v(e.id,{position:e.position})}));else if("add"===e)t&&c(t),n&&h(n);else if("delete"===e)t&&s(t),n&&f(n);else if("edit"===e&&a){const e=a[0];v(e.id,e)}},executeRedo:()=>{if(o.value[i].length===r.value[i]+1)return;const{actionType:e,nodes:t,edges:n,change:a}=o.value[i][++r.value[i]];if("position"===e&&a)a.forEach((e=>{v(e.id,{position:e.position})}));else if("add"===e)t&&s(t),n&&f(n);else if("delete"===e)t&&c(t),n&&h(n);else if("edit"===e&&a){const e=a[0];v(e.id,e)}},transformNodeData:S,transformEdgeData:e=>{const t=!!Array.isArray(e),n=t?e:[e],o=["id","type","source","target","data","label","labelStyle","labelBgStyle","labelBgPadding","labelBgBorderRadius","style"];let r=[];return n.length>0&&(r=n.map((e=>{const t={};return Object.keys(e).forEach((n=>{o.includes(n)&&(t[n]=e[n])})),t}))),t?r:r[0]},getPath:()=>{const e=[];return p.value.forEach((t=>{0===g(t.id).length&&E(t,[t],e)})),e.map((e=>S(e)))},getPathByNodeId:e=>{const t=[],n=[];return p.value.forEach((o=>{0===g(o.id).length&&E(o,[o],t,e,n)})),n.map((e=>S(e)))}}}const ca=[];for(let df=0;df<256;++df)ca.push((df+256).toString(16).slice(1));let da;const fa=new Uint8Array(16);const ha={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function pa(e,t,n){var o;if(ha.randomUUID&&!e)return ha.randomUUID();const r=(e=e||{}).random??(null==(o=e.rng)?void 0:o.call(e))??function(){if(!da){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");da=crypto.getRandomValues.bind(crypto)}return da(fa)}();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=15&r[6]|64,r[8]=63&r[8]|128,function(e,t=0){return(ca[e[t+0]]+ca[e[t+1]]+ca[e[t+2]]+ca[e[t+3]]+"-"+ca[e[t+4]]+ca[e[t+5]]+"-"+ca[e[t+6]]+ca[e[t+7]]+"-"+ca[e[t+8]]+ca[e[t+9]]+"-"+ca[e[t+10]]+ca[e[t+11]]+ca[e[t+12]]+ca[e[t+13]]+ca[e[t+14]]+ca[e[t+15]]).toLowerCase()}(r)}const va="node",ma={draggedType:t.ref(null),draggedData:t.ref({}),isDragOver:t.ref(!1),isDragging:t.ref(!1)};var ga=(e=>(e.Lines="lines",e.Dots="dots",e))(ga||{});const ya=function({dimensions:e,size:n,color:o}){return t.h("path",{stroke:o,"stroke-width":n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})},wa=function({radius:e,color:n}){return t.h("circle",{cx:e,cy:e,r:e,fill:n})};ga.Lines,ga.Dots;const ba={[ga.Dots]:"#81818a",[ga.Lines]:"#eee"},_a=["id","x","y","width","height","patternTransform"],xa={key:2,height:"100",width:"100"},ka=["fill"],Sa=["x","y","fill"],Ea=t.defineComponent({name:"Background",compatConfig:{MODE:3},props:{id:{},variant:{default:()=>ga.Dots},gap:{default:20},size:{default:1},lineWidth:{default:1},patternColor:{},color:{},bgColor:{},height:{default:100},width:{default:100},x:{default:0},y:{default:0},offset:{default:0}},setup(e){const{id:n,viewport:o}=$i(),r=t.computed((()=>{const t=o.value.zoom,[n,r]=Array.isArray(e.gap)?e.gap:[e.gap,e.gap],i=[n*t||1,r*t||1],a=e.size*t,[l,u]=Array.isArray(e.offset)?e.offset:[e.offset,e.offset];return{scaledGap:i,offset:[l*t||1+i[0]/2,u*t||1+i[1]/2],size:a}})),i=t.toRef((()=>`pattern-${n}${e.id?`-${e.id}`:""}`)),a=t.toRef((()=>e.color||e.patternColor||ba[e.variant||ga.Dots]));return(e,n)=>(t.openBlock(),t.createElementBlock("svg",{class:"vue-flow__background vue-flow__container",style:t.normalizeStyle({height:`${e.height>100?100:e.height}%`,width:`${e.width>100?100:e.width}%`})},[t.renderSlot(e.$slots,"pattern-container",{id:i.value},(()=>[t.createElementVNode("pattern",{id:i.value,x:t.unref(o).x%r.value.scaledGap[0],y:t.unref(o).y%r.value.scaledGap[1],width:r.value.scaledGap[0],height:r.value.scaledGap[1],patternTransform:`translate(-${r.value.offset[0]},-${r.value.offset[1]})`,patternUnits:"userSpaceOnUse"},[t.renderSlot(e.$slots,"pattern",{},(()=>[e.variant===t.unref(ga).Lines?(t.openBlock(),t.createBlock(t.unref(ya),{key:0,size:e.lineWidth,color:a.value,dimensions:r.value.scaledGap},null,8,["size","color","dimensions"])):e.variant===t.unref(ga).Dots?(t.openBlock(),t.createBlock(t.unref(wa),{key:1,color:a.value,radius:r.value.size/2},null,8,["color","radius"])):t.createCommentVNode("",!0),e.bgColor?(t.openBlock(),t.createElementBlock("svg",xa,[t.createElementVNode("rect",{width:"100%",height:"100%",fill:e.bgColor},null,8,ka)])):t.createCommentVNode("",!0)]))],8,_a)])),t.createElementVNode("rect",{x:e.x,y:e.y,width:"100%",height:"100%",fill:`url(#${i.value})`},null,8,Sa),t.renderSlot(e.$slots,"default",{id:i.value})],4))}}),Na=t.defineComponent({__name:"background",props:{bgColor:{type:String,default:"#fff"},showBgPattern:{type:Boolean,default:!0},bgPatternGap:{type:Number,default:10},bgPatternSize:{type:Number,default:.4},bgPatternColor:{type:String,default:"#81818a"}},setup(e){const n=e;return(o,r)=>(t.openBlock(),t.createBlock(t.unref(Ea),{style:t.normalizeStyle({backgroundColor:n.bgColor,transition:"background-color 0.2s ease"}),variant:"dots",gap:n.bgPatternGap,size:e.showBgPattern?n.bgPatternSize:0,"pattern-color":n.bgPatternColor},null,8,["style","gap","size","pattern-color"]))}});var Ca={value:()=>{}};function Ma(){for(var e,t=0,n=arguments.length,o={};t<n;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new Ba(o)}function Ba(e){this._=e}function Pa(e,t){for(var n,o=0,r=e.length;o<r;++o)if((n=e[o]).name===t)return n.value}function Ta(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=Ca,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}Ba.prototype=Ma.prototype={constructor:Ba,on:function(e,t){var n,o,r=this._,i=(o=r,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!o.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),a=-1,l=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<l;)if(n=(e=i[a]).type)r[n]=Ta(r[n],e.name,t);else if(null==t)for(n in r)r[n]=Ta(r[n],e.name,null);return this}for(;++a<l;)if((n=(e=i[a]).type)&&(n=Pa(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ba(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,o,r=new Array(n),i=0;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(o=this._[e]).length;i<n;++i)o[i].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};var $a="http://www.w3.org/1999/xhtml";const Ia={svg:"http://www.w3.org/2000/svg",xhtml:$a,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function za(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Ia.hasOwnProperty(t)?{space:Ia[t],local:e}:e}function Aa(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===$a&&t.documentElement.namespaceURI===$a?t.createElement(e):t.createElementNS(n,e)}}function Da(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Va(e){var t=za(e);return(t.local?Da:Aa)(t)}function Oa(){}function Ra(e){return null==e?Oa:function(){return this.querySelector(e)}}function La(){return[]}function Ha(e){return null==e?La:function(){return this.querySelectorAll(e)}}function Fa(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function Ya(e){return function(){return this.matches(e)}}function Ga(e){return function(t){return t.matches(e)}}var Xa=Array.prototype.find;function Ua(){return this.firstElementChild}var ja=Array.prototype.filter;function qa(){return Array.from(this.children)}function Za(e){return new Array(e.length)}function Ka(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Wa(e,t,n,o,r,i){for(var a,l=0,u=t.length,s=i.length;l<s;++l)(a=t[l])?(a.__data__=i[l],o[l]=a):n[l]=new Ka(e,i[l]);for(;l<u;++l)(a=t[l])&&(r[l]=a)}function Qa(e,t,n,o,r,i,a){var l,u,s,c=new Map,d=t.length,f=i.length,h=new Array(d);for(l=0;l<d;++l)(u=t[l])&&(h[l]=s=a.call(u,u.__data__,l,t)+"",c.has(s)?r[l]=u:c.set(s,u));for(l=0;l<f;++l)s=a.call(e,i[l],l,i)+"",(u=c.get(s))?(o[l]=u,u.__data__=i[l],c.delete(s)):n[l]=new Ka(e,i[l]);for(l=0;l<d;++l)(u=t[l])&&c.get(h[l])===u&&(r[l]=u)}function Ja(e){return e.__data__}function el(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function tl(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function nl(e){return function(){this.removeAttribute(e)}}function ol(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rl(e,t){return function(){this.setAttribute(e,t)}}function il(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function al(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function ll(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ul(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function sl(e){return function(){this.style.removeProperty(e)}}function cl(e,t,n){return function(){this.style.setProperty(e,t,n)}}function dl(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function fl(e,t){return e.style.getPropertyValue(t)||ul(e).getComputedStyle(e,null).getPropertyValue(t)}function hl(e){return function(){delete this[e]}}function pl(e,t){return function(){this[e]=t}}function vl(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function ml(e){return e.trim().split(/^|\s+/)}function gl(e){return e.classList||new yl(e)}function yl(e){this._node=e,this._names=ml(e.getAttribute("class")||"")}function wl(e,t){for(var n=gl(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function bl(e,t){for(var n=gl(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function _l(e){return function(){wl(this,e)}}function xl(e){return function(){bl(this,e)}}function kl(e,t){return function(){(t.apply(this,arguments)?wl:bl)(this,e)}}function Sl(){this.textContent=""}function El(e){return function(){this.textContent=e}}function Nl(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Cl(){this.innerHTML=""}function Ml(e){return function(){this.innerHTML=e}}function Bl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Pl(){this.nextSibling&&this.parentNode.appendChild(this)}function Tl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $l(){return null}function Il(){var e=this.parentNode;e&&e.removeChild(this)}function zl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Al(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Dl(e){return function(){var t=this.__on;if(t){for(var n,o=0,r=-1,i=t.length;o<i;++o)n=t[o],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function Vl(e,t,n){return function(){var o,r=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(r)for(var a=0,l=r.length;a<l;++a)if((o=r[a]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),void(o.value=t);this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function Ol(e,t,n){var o=ul(e),r=o.CustomEvent;"function"==typeof r?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Rl(e,t){return function(){return Ol(this,e,t)}}function Ll(e,t){return function(){return Ol(this,e,t.apply(this,arguments))}}Ka.prototype={constructor:Ka,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},yl.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Hl=[null];function Fl(e,t){this._groups=e,this._parents=t}function Yl(){return new Fl([[document.documentElement]],Hl)}function Gl(e){return"string"==typeof e?new Fl([[document.querySelector(e)]],[document.documentElement]):new Fl([[e]],Hl)}function Xl(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(t.getScreenCTM().inverse())).x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}Fl.prototype=Yl.prototype={constructor:Fl,select:function(e){"function"!=typeof e&&(e=Ra(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a,l=t[r],u=l.length,s=o[r]=new Array(u),c=0;c<u;++c)(i=l[c])&&(a=e.call(i,i.__data__,c,l))&&("__data__"in i&&(a.__data__=i.__data__),s[c]=a);return new Fl(o,this._parents)},selectAll:function(e){e="function"==typeof e?Fa(e):Ha(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a,l=t[i],u=l.length,s=0;s<u;++s)(a=l[s])&&(o.push(e.call(a,a.__data__,s,l)),r.push(a));return new Fl(o,r)},selectChild:function(e){return this.select(null==e?Ua:function(e){return function(){return Xa.call(this.children,e)}}("function"==typeof e?e:Ga(e)))},selectChildren:function(e){return this.selectAll(null==e?qa:function(e){return function(){return ja.call(this.children,e)}}("function"==typeof e?e:Ga(e)))},filter:function(e){"function"!=typeof e&&(e=Ya(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a=t[r],l=a.length,u=o[r]=[],s=0;s<l;++s)(i=a[s])&&e.call(i,i.__data__,s,a)&&u.push(i);return new Fl(o,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Ja);var n,o=t?Qa:Wa,r=this._parents,i=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=i.length,l=new Array(a),u=new Array(a),s=new Array(a),c=0;c<a;++c){var d=r[c],f=i[c],h=f.length,p=el(e.call(d,d&&d.__data__,c,r)),v=p.length,m=u[c]=new Array(v),g=l[c]=new Array(v);o(d,f,m,g,s[c]=new Array(h),p,t);for(var y,w,b=0,_=0;b<v;++b)if(y=m[b]){for(b>=_&&(_=b+1);!(w=g[_])&&++_<v;);y._next=w||null}}return(l=new Fl(l,r))._enter=u,l._exit=s,l},enter:function(){return new Fl(this._enter||this._groups.map(Za),this._parents)},exit:function(){return new Fl(this._exit||this._groups.map(Za),this._parents)},join:function(e,t,n){var o=this.enter(),r=this,i=this.exit();return"function"==typeof e?(o=e(o))&&(o=o.selection()):o=o.append(e+""),null!=t&&(r=t(r))&&(r=r.selection()),null==n?i.remove():n(i),o&&r?o.merge(r).order():r},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),l=new Array(r),u=0;u<a;++u)for(var s,c=n[u],d=o[u],f=c.length,h=l[u]=new Array(f),p=0;p<f;++p)(s=c[p]||d[p])&&(h[p]=s);for(;u<r;++u)l[u]=n[u];return new Fl(l,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,r=e[t],i=r.length-1,a=r[i];--i>=0;)(o=r[i])&&(a&&4^o.compareDocumentPosition(a)&&a.parentNode.insertBefore(o,a),a=o);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=tl);for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a,l=n[i],u=l.length,s=r[i]=new Array(u),c=0;c<u;++c)(a=l[c])&&(s[c]=a);s.sort(t)}return new Fl(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r,i=t[n],a=0,l=i.length;a<l;++a)(r=i[a])&&e.call(r,r.__data__,a,i);return this},attr:function(e,t){var n=za(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?ol:nl:"function"==typeof t?n.local?ll:al:n.local?il:rl)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?sl:"function"==typeof t?dl:cl)(e,t,null==n?"":n)):fl(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?hl:"function"==typeof t?vl:pl)(e,t)):this.node()[e]},classed:function(e,t){var n=ml(e+"");if(arguments.length<2){for(var o=gl(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?kl:t?_l:xl)(n,t))},text:function(e){return arguments.length?this.each(null==e?Sl:("function"==typeof e?Nl:El)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Cl:("function"==typeof e?Bl:Ml)(e)):this.node().innerHTML},raise:function(){return this.each(Pl)},lower:function(){return this.each(Tl)},append:function(e){var t="function"==typeof e?e:Va(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:Va(e),o=null==t?$l:"function"==typeof t?t:Ra(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))},remove:function(){return this.each(Il)},clone:function(e){return this.select(e?Al:zl)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var o,r,i=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=i.length;if(!(arguments.length<2)){for(l=t?Vl:Dl,o=0;o<a;++o)this.each(l(i[o],t,n));return this}var l=this.node().__on;if(l)for(var u,s=0,c=l.length;s<c;++s)for(o=0,u=l[s];o<a;++o)if((r=i[o]).type===u.type&&r.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?Ll:Rl)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o,r=e[t],i=0,a=r.length;i<a;++i)(o=r[i])&&(yield o)}};const Ul={capture:!0,passive:!1};function jl(e){e.preventDefault(),e.stopImmediatePropagation()}function ql(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Zl(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Kl(){}var Wl=.7,Ql=1/Wl,Jl="\\s*([+-]?\\d+)\\s*",eu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nu=/^#([0-9a-f]{3,8})$/,ou=new RegExp(`^rgb\\(${Jl},${Jl},${Jl}\\)$`),ru=new RegExp(`^rgb\\(${tu},${tu},${tu}\\)$`),iu=new RegExp(`^rgba\\(${Jl},${Jl},${Jl},${eu}\\)$`),au=new RegExp(`^rgba\\(${tu},${tu},${tu},${eu}\\)$`),lu=new RegExp(`^hsl\\(${eu},${tu},${tu}\\)$`),uu=new RegExp(`^hsla\\(${eu},${tu},${tu},${eu}\\)$`),su={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function cu(){return this.rgb().formatHex()}function du(){return this.rgb().formatRgb()}function fu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=nu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?hu(t):3===n?new mu(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?pu(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?pu(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=ou.exec(e))?new mu(t[1],t[2],t[3],1):(t=ru.exec(e))?new mu(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=iu.exec(e))?pu(t[1],t[2],t[3],t[4]):(t=au.exec(e))?pu(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=lu.exec(e))?xu(t[1],t[2]/100,t[3]/100,1):(t=uu.exec(e))?xu(t[1],t[2]/100,t[3]/100,t[4]):su.hasOwnProperty(e)?hu(su[e]):"transparent"===e?new mu(NaN,NaN,NaN,0):null}function hu(e){return new mu(e>>16&255,e>>8&255,255&e,1)}function pu(e,t,n,o){return o<=0&&(e=t=n=NaN),new mu(e,t,n,o)}function vu(e,t,n,o){return 1===arguments.length?((r=e)instanceof Kl||(r=fu(r)),r?new mu((r=r.rgb()).r,r.g,r.b,r.opacity):new mu):new mu(e,t,n,null==o?1:o);var r}function mu(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}function gu(){return`#${_u(this.r)}${_u(this.g)}${_u(this.b)}`}function yu(){const e=wu(this.opacity);return`${1===e?"rgb(":"rgba("}${bu(this.r)}, ${bu(this.g)}, ${bu(this.b)}${1===e?")":`, ${e})`}`}function wu(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function bu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _u(e){return((e=bu(e))<16?"0":"")+e.toString(16)}function xu(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Su(e,t,n,o)}function ku(e){if(e instanceof Su)return new Su(e.h,e.s,e.l,e.opacity);if(e instanceof Kl||(e=fu(e)),!e)return new Su;if(e instanceof Su)return e;var t=(e=e.rgb()).r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,l=i-r,u=(i+r)/2;return l?(a=t===i?(n-o)/l+6*(n<o):n===i?(o-t)/l+2:(t-n)/l+4,l/=u<.5?i+r:2-i-r,a*=60):l=u>0&&u<1?0:a,new Su(a,l,u,e.opacity)}function Su(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}function Eu(e){return(e=(e||0)%360)<0?e+360:e}function Nu(e){return Math.max(0,Math.min(1,e||0))}function Cu(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}ql(Kl,fu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:cu,formatHex:cu,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return ku(this).formatHsl()},formatRgb:du,toString:du}),ql(mu,vu,Zl(Kl,{brighter(e){return e=null==e?Ql:Math.pow(Ql,e),new mu(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Wl:Math.pow(Wl,e),new mu(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new mu(bu(this.r),bu(this.g),bu(this.b),wu(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gu,formatHex:gu,formatHex8:function(){return`#${_u(this.r)}${_u(this.g)}${_u(this.b)}${_u(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:yu,toString:yu})),ql(Su,(function(e,t,n,o){return 1===arguments.length?ku(e):new Su(e,t,n,null==o?1:o)}),Zl(Kl,{brighter(e){return e=null==e?Ql:Math.pow(Ql,e),new Su(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Wl:Math.pow(Wl,e),new Su(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new mu(Cu(e>=240?e-240:e+120,r,o),Cu(e,r,o),Cu(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new Su(Eu(this.h),Nu(this.s),Nu(this.l),wu(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=wu(this.opacity);return`${1===e?"hsl(":"hsla("}${Eu(this.h)}, ${100*Nu(this.s)}%, ${100*Nu(this.l)}%${1===e?")":`, ${e})`}`}}));const Mu=e=>()=>e;function Bu(e){return 1==(e=+e)?Pu:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}(t,n,e):Mu(isNaN(t)?n:t)}}function Pu(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Mu(isNaN(e)?t:e)}const Tu=function e(t){var n=Bu(t);function o(e,t){var o=n((e=vu(e)).r,(t=vu(t)).r),r=n(e.g,t.g),i=n(e.b,t.b),a=Pu(e.opacity,t.opacity);return function(t){return e.r=o(t),e.g=r(t),e.b=i(t),e.opacity=a(t),e+""}}return o.gamma=e,o}(1);function $u(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Iu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zu=new RegExp(Iu.source,"g");function Au(e,t){var n,o,r,i=Iu.lastIndex=zu.lastIndex=0,a=-1,l=[],u=[];for(e+="",t+="";(n=Iu.exec(e))&&(o=zu.exec(t));)(r=o.index)>i&&(r=t.slice(i,r),l[a]?l[a]+=r:l[++a]=r),(n=n[0])===(o=o[0])?l[a]?l[a]+=o:l[++a]=o:(l[++a]=null,u.push({i:a,x:$u(n,o)})),i=zu.lastIndex;return i<t.length&&(r=t.slice(i),l[a]?l[a]+=r:l[++a]=r),l.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,o=0;o<t;++o)l[(n=u[o]).i]=n.x(e);return l.join("")})}var Du,Vu=180/Math.PI,Ou={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ru(e,t,n,o,r,i){var a,l,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),e*o<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Vu,skewX:Math.atan(u)*Vu,scaleX:a,scaleY:l}}function Lu(e,t,n,o){function r(e){return e.length?e.pop()+" ":""}return function(i,a){var l=[],u=[];return i=e(i),a=e(a),function(e,o,r,i,a,l){if(e!==r||o!==i){var u=a.push("translate(",null,t,null,n);l.push({i:u-4,x:$u(e,r)},{i:u-2,x:$u(o,i)})}else(r||i)&&a.push("translate("+r+t+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,l,u),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(r(n)+"rotate(",null,o)-2,x:$u(e,t)})):t&&n.push(r(n)+"rotate("+t+o)}(i.rotate,a.rotate,l,u),function(e,t,n,i){e!==t?i.push({i:n.push(r(n)+"skewX(",null,o)-2,x:$u(e,t)}):t&&n.push(r(n)+"skewX("+t+o)}(i.skewX,a.skewX,l,u),function(e,t,n,o,i,a){if(e!==n||t!==o){var l=i.push(r(i)+"scale(",null,",",null,")");a.push({i:l-4,x:$u(e,n)},{i:l-2,x:$u(t,o)})}else 1===n&&1===o||i.push(r(i)+"scale("+n+","+o+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,l,u),i=a=null,function(e){for(var t,n=-1,o=u.length;++n<o;)l[(t=u[n]).i]=t.x(e);return l.join("")}}}var Hu=Lu((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ou:Ru(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Fu=Lu((function(e){return null==e?Ou:(Du||(Du=document.createElementNS("http://www.w3.org/2000/svg","g")),Du.setAttribute("transform",e),(e=Du.transform.baseVal.consolidate())?Ru((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Ou)}),", ",")",")");function Yu(e){return((e=Math.exp(e))+1/e)/2}const Gu=function e(t,n,o){function r(e,r){var i,a,l=e[0],u=e[1],s=e[2],c=r[0],d=r[1],f=r[2],h=c-l,p=d-u,v=h*h+p*p;if(v<1e-12)a=Math.log(f/s)/t,i=function(e){return[l+e*h,u+e*p,s*Math.exp(t*e*a)]};else{var m=Math.sqrt(v),g=(f*f-s*s+o*v)/(2*s*n*m),y=(f*f-s*s-o*v)/(2*f*n*m),w=Math.log(Math.sqrt(g*g+1)-g),b=Math.log(Math.sqrt(y*y+1)-y);a=(b-w)/t,i=function(e){var o,r=e*a,i=Yu(w),c=s/(n*m)*(i*(o=t*r+w,((o=Math.exp(2*o))-1)/(o+1))-function(e){return((e=Math.exp(e))-1/e)/2}(w));return[l+c*h,u+c*p,s*i/Yu(t*r+w)]}}return i.duration=1e3*a*t/Math.SQRT2,i}return r.rho=function(t){var n=Math.max(.001,+t),o=n*n;return e(n,o,o*o)},r}(Math.SQRT2,2,4);var Xu,Uu,ju=0,qu=0,Zu=0,Ku=0,Wu=0,Qu=0,Ju="object"==typeof performance&&performance.now?performance:Date,es="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ts(){return Wu||(es(ns),Wu=Ju.now()+Qu)}function ns(){Wu=0}function os(){this._call=this._time=this._next=null}function rs(e,t,n){var o=new os;return o.restart(e,t,n),o}function is(){Wu=(Ku=Ju.now())+Qu,ju=qu=0;try{!function(){ts(),++ju;for(var e,t=Xu;t;)(e=Wu-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ju}()}finally{ju=0,function(){var e,t,n=Xu,o=1/0;for(;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Xu=t);Uu=e,ls(o)}(),Wu=0}}function as(){var e=Ju.now(),t=e-Ku;t>1e3&&(Qu-=t,Ku=e)}function ls(e){ju||(qu&&(qu=clearTimeout(qu)),e-Wu>24?(e<1/0&&(qu=setTimeout(is,e-Ju.now()-Qu)),Zu&&(Zu=clearInterval(Zu))):(Zu||(Ku=Ju.now(),Zu=setInterval(as,1e3)),ju=1,es(is)))}function us(e,t,n){var o=new os;return t=null==t?0:+t,o.restart((n=>{o.stop(),e(n+t)}),t,n),o}os.prototype=rs.prototype={constructor:os,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?ts():+n)+(null==t?0:+t),this._next||Uu===this||(Uu?Uu._next=this:Xu=this,Uu=this),this._call=e,this._time=n,ls()},stop:function(){this._call&&(this._call=null,this._time=1/0,ls())}};var ss=Ma("start","end","cancel","interrupt"),cs=[];function ds(e,t,n,o,r,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var o,r=e.__transition;function i(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(i){var s,c,d,f;if(1!==n.state)return u();for(s in r)if((f=r[s]).name===n.name){if(3===f.state)return us(a);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete r[s]):+s<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete r[s])}if(us((function(){3===n.state&&(n.state=4,n.timer.restart(l,n.delay,n.time),l(i))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,o=new Array(d=n.tween.length),s=0,c=-1;s<d;++s)(f=n.tween[s].value.call(e,e.__data__,n.index,n.group))&&(o[++c]=f);o.length=c+1}}function l(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=5,1),i=-1,a=o.length;++i<a;)o[i].call(e,r);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var o in n.state=6,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=rs(i,0,n.time)}(e,n,{name:t,index:o,group:r,on:ss,tween:cs,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})}function fs(e,t){var n=ps(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function hs(e,t){var n=ps(e,t);if(n.state>3)throw new Error("too late; already running");return n}function ps(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function vs(e,t){var n,o,r,i=e.__transition,a=!0;if(i){for(r in t=null==t?null:t+"",i)(n=i[r]).name===t?(o=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[r]):a=!1;a&&delete e.__transition}}function ms(e,t){var n,o;return function(){var r=hs(this,e),i=r.tween;if(i!==n)for(var a=0,l=(o=n=i).length;a<l;++a)if(o[a].name===t){(o=o.slice()).splice(a,1);break}r.tween=o}}function gs(e,t,n){var o,r;if("function"!=typeof n)throw new Error;return function(){var i=hs(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var l={name:t,value:n},u=0,s=r.length;u<s;++u)if(r[u].name===t){r[u]=l;break}u===s&&r.push(l)}i.tween=r}}function ys(e,t,n){var o=e._id;return e.each((function(){var e=hs(this,o);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return ps(e,o).value[t]}}function ws(e,t){var n;return("number"==typeof t?$u:t instanceof fu?Tu:(n=fu(t))?(t=n,Tu):Au)(e,t)}function bs(e){return function(){this.removeAttribute(e)}}function _s(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xs(e,t,n){var o,r,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===o?r:r=t(o=a,n)}}function ks(e,t,n){var o,r,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===o?r:r=t(o=a,n)}}function Ss(e,t,n){var o,r,i;return function(){var a,l,u=n(this);if(null!=u)return(a=this.getAttribute(e))===(l=u+"")?null:a===o&&l===r?i:(r=l,i=t(o=a,u));this.removeAttribute(e)}}function Es(e,t,n){var o,r,i;return function(){var a,l,u=n(this);if(null!=u)return(a=this.getAttributeNS(e.space,e.local))===(l=u+"")?null:a===o&&l===r?i:(r=l,i=t(o=a,u));this.removeAttributeNS(e.space,e.local)}}function Ns(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,r)),n}return r._value=t,r}function Cs(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,r)),n}return r._value=t,r}function Ms(e,t){return function(){fs(this,e).delay=+t.apply(this,arguments)}}function Bs(e,t){return t=+t,function(){fs(this,e).delay=t}}function Ps(e,t){return function(){hs(this,e).duration=+t.apply(this,arguments)}}function Ts(e,t){return t=+t,function(){hs(this,e).duration=t}}var $s=Yl.prototype.constructor;function Is(e){return function(){this.style.removeProperty(e)}}var zs=0;function As(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Ds(){return++zs}var Vs=Yl.prototype;As.prototype={constructor:As,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Ra(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var l,u,s=o[a],c=s.length,d=i[a]=new Array(c),f=0;f<c;++f)(l=s[f])&&(u=e.call(l,l.__data__,f,s))&&("__data__"in l&&(u.__data__=l.__data__),d[f]=u,ds(d[f],t,n,f,d,ps(l,n)));return new As(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Ha(e));for(var o=this._groups,r=o.length,i=[],a=[],l=0;l<r;++l)for(var u,s=o[l],c=s.length,d=0;d<c;++d)if(u=s[d]){for(var f,h=e.call(u,u.__data__,d,s),p=ps(u,n),v=0,m=h.length;v<m;++v)(f=h[v])&&ds(f,t,n,v,h,p);i.push(h),a.push(u)}return new As(i,a,t,n)},selectChild:Vs.selectChild,selectChildren:Vs.selectChildren,filter:function(e){"function"!=typeof e&&(e=Ya(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a=t[r],l=a.length,u=o[r]=[],s=0;s<l;++s)(i=a[s])&&e.call(i,i.__data__,s,a)&&u.push(i);return new As(o,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),l=0;l<i;++l)for(var u,s=t[l],c=n[l],d=s.length,f=a[l]=new Array(d),h=0;h<d;++h)(u=s[h]||c[h])&&(f[h]=u);for(;l<o;++l)a[l]=t[l];return new As(a,this._parents,this._name,this._id)},selection:function(){return new $s(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Ds(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a,l=o[i],u=l.length,s=0;s<u;++s)if(a=l[s]){var c=ps(a,t);ds(a,e,n,s,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new As(o,this._parents,e,n)},call:Vs.call,nodes:Vs.nodes,node:Vs.node,size:Vs.size,empty:Vs.empty,each:Vs.each,on:function(e,t){var n=this._id;return arguments.length<2?ps(this.node(),n).on.on(e):this.each(function(e,t,n){var o,r,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?fs:hs;return function(){var a=i(this,e),l=a.on;l!==o&&(r=(o=l).copy()).on(t,n),a.on=r}}(n,e,t))},attr:function(e,t){var n=za(e),o="transform"===n?Fu:ws;return this.attrTween(e,"function"==typeof t?(n.local?Es:Ss)(n,o,ys(this,"attr."+e,t)):null==t?(n.local?_s:bs)(n):(n.local?ks:xs)(n,o,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var o=za(e);return this.tween(n,(o.local?Ns:Cs)(o,t))},style:function(e,t,n){var o="transform"==(e+="")?Hu:ws;return null==t?this.styleTween(e,function(e,t){var n,o,r;return function(){var i=fl(this,e),a=(this.style.removeProperty(e),fl(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}(e,o)).on("end.style."+e,Is(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var o,r,i;return function(){var a=fl(this,e),l=n(this),u=l+"";return null==l&&(this.style.removeProperty(e),u=l=fl(this,e)),a===u?null:a===o&&u===r?i:(r=u,i=t(o=a,l))}}(e,o,ys(this,"style."+e,t))).each(function(e,t){var n,o,r,i,a="style."+t,l="end."+a;return function(){var u=hs(this,e),s=u.on,c=null==u.value[a]?i||(i=Is(t)):void 0;s===n&&r===c||(o=(n=s).copy()).on(l,r=c),u.on=o}}(this._id,e)):this.styleTween(e,function(e,t,n){var o,r,i=n+"";return function(){var a=fl(this,e);return a===i?null:a===o?r:r=t(o=a,n)}}(e,o,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==t)return this.tween(o,null);if("function"!=typeof t)throw new Error;return this.tween(o,function(e,t,n){var o,r;function i(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&function(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}(e,i,n)),o}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(ys(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function o(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&function(e){return function(t){this.textContent=e.call(this,t)}}(o)),t}return o._value=e,o}(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o,r=ps(this.node(),n).tween,i=0,a=r.length;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((null==t?ms:gs)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Ms:Bs)(t,e)):ps(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Ps:Ts)(t,e)):ps(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){hs(this,e).ease=t}}(t,e)):ps(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;hs(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,o=n._id,r=n.size();return new Promise((function(i,a){var l={value:a},u={value:function(){0==--r&&i()}};n.each((function(){var n=hs(this,o),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),n.on=t})),0===r&&i()}))},[Symbol.iterator]:Vs[Symbol.iterator]};var Os={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Rs(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Yl.prototype.interrupt=function(e){return this.each((function(){vs(this,e)}))},Yl.prototype.transition=function(e){var t,n;e instanceof As?(t=e._id,e=e._name):(t=Ds(),(n=Os).time=ts(),e=null==e?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a,l=o[i],u=l.length,s=0;s<u;++s)(a=l[s])&&ds(a,e,t,s,l,n||Rs(a,t));return new As(o,this._parents,e,t)};const Ls=e=>()=>e;function Hs(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Fs(e,t,n){this.k=e,this.x=t,this.y=n}Fs.prototype={constructor:Fs,scale:function(e){return 1===e?this:new Fs(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Fs(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ys=new Fs(1,0,0);function Gs(e){e.stopImmediatePropagation()}function Xs(e){e.preventDefault(),e.stopImmediatePropagation()}function Us(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function js(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function qs(){return this.__zoom||Ys}function Zs(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Ks(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ws(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function Qs(){var e,t,n,o=Us,r=js,i=Ws,a=Zs,l=Ks,u=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],c=250,d=Gu,f=Ma("start","zoom","end"),h=0,p=10;function v(e){e.property("__zoom",qs).on("wheel.zoom",x,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",S).filter(l).on("touchstart.zoom",E).on("touchmove.zoom",N).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(e,t){return(t=Math.max(u[0],Math.min(u[1],t)))===e.k?e:new Fs(t,e.x,e.y)}function g(e,t,n){var o=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;return o===e.x&&r===e.y?e:new Fs(e.k,o,r)}function y(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function w(e,t,n,o){e.on("start.zoom",(function(){b(this,arguments).event(o).start()})).on("interrupt.zoom end.zoom",(function(){b(this,arguments).event(o).end()})).tween("zoom",(function(){var e=this,i=arguments,a=b(e,i).event(o),l=r.apply(e,i),u=null==n?y(l):"function"==typeof n?n.apply(e,i):n,s=Math.max(l[1][0]-l[0][0],l[1][1]-l[0][1]),c=e.__zoom,f="function"==typeof t?t.apply(e,i):t,h=d(c.invert(u).concat(s/c.k),f.invert(u).concat(s/f.k));return function(e){if(1===e)e=f;else{var t=h(e),n=s/t[2];e=new Fs(n,u[0]-t[0]*n,u[1]-t[1]*n)}a.zoom(null,e)}}))}function b(e,t,n){return!n&&e.__zooming||new _(e,t)}function _(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=r.apply(e,t),this.taps=0}function x(e,...t){if(o.apply(this,arguments)){var n=b(this,t).event(e),r=this.__zoom,l=Math.max(u[0],Math.min(u[1],r.k*Math.pow(2,a.apply(this,arguments)))),c=Xl(e);if(n.wheel)n.mouse[0][0]===c[0]&&n.mouse[0][1]===c[1]||(n.mouse[1]=r.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(r.k===l)return;n.mouse=[c,r.invert(c)],vs(this),n.start()}Xs(e),n.wheel=setTimeout((function(){n.wheel=null,n.end()}),150),n.zoom("mouse",i(g(m(r,l),n.mouse[0],n.mouse[1]),n.extent,s))}}function k(e,...t){if(!n&&o.apply(this,arguments)){var r,a,l,u=e.currentTarget,c=b(this,t,!0).event(e),d=Gl(e.view).on("mousemove.zoom",(function(e){if(Xs(e),!c.moved){var t=e.clientX-p,n=e.clientY-v;c.moved=t*t+n*n>h}c.event(e).zoom("mouse",i(g(c.that.__zoom,c.mouse[0]=Xl(e,u),c.mouse[1]),c.extent,s))}),!0).on("mouseup.zoom",(function(e){d.on("mousemove.zoom mouseup.zoom",null),t=e.view,n=c.moved,o=t.document.documentElement,r=Gl(t).on("dragstart.drag",null),n&&(r.on("click.drag",jl,Ul),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in o?r.on("selectstart.drag",null):(o.style.MozUserSelect=o.__noselect,delete o.__noselect),Xs(e),c.event(e).end();var t,n,o,r}),!0),f=Xl(e,u),p=e.clientX,v=e.clientY;r=e.view,a=r.document.documentElement,l=Gl(r).on("dragstart.drag",jl,Ul),"onselectstart"in a?l.on("selectstart.drag",jl,Ul):(a.__noselect=a.style.MozUserSelect,a.style.MozUserSelect="none"),Gs(e),c.mouse=[f,this.__zoom.invert(f)],vs(this),c.start()}}function S(e,...t){if(o.apply(this,arguments)){var n=this.__zoom,a=Xl(e.changedTouches?e.changedTouches[0]:e,this),l=n.invert(a),u=n.k*(e.shiftKey?.5:2),d=i(g(m(n,u),a,l),r.apply(this,t),s);Xs(e),c>0?Gl(this).transition().duration(c).call(w,d,a,e):Gl(this).call(v.transform,d,a,e)}}function E(n,...r){if(o.apply(this,arguments)){var i,a,l,u,s=n.touches,c=s.length,d=b(this,r,n.changedTouches.length===c).event(n);for(Gs(n),a=0;a<c;++a)u=[u=Xl(l=s[a],this),this.__zoom.invert(u),l.identifier],d.touch0?d.touch1||d.touch0[2]===u[2]||(d.touch1=u,d.taps=0):(d.touch0=u,i=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),i&&(d.taps<2&&(t=u[0],e=setTimeout((function(){e=null}),500)),vs(this),d.start())}}function N(e,...t){if(this.__zooming){var n,o,r,a,l=b(this,t).event(e),u=e.changedTouches,c=u.length;for(Xs(e),n=0;n<c;++n)r=Xl(o=u[n],this),l.touch0&&l.touch0[2]===o.identifier?l.touch0[0]=r:l.touch1&&l.touch1[2]===o.identifier&&(l.touch1[0]=r);if(o=l.that.__zoom,l.touch1){var d=l.touch0[0],f=l.touch0[1],h=l.touch1[0],p=l.touch1[1],v=(v=h[0]-d[0])*v+(v=h[1]-d[1])*v,y=(y=p[0]-f[0])*y+(y=p[1]-f[1])*y;o=m(o,Math.sqrt(v/y)),r=[(d[0]+h[0])/2,(d[1]+h[1])/2],a=[(f[0]+p[0])/2,(f[1]+p[1])/2]}else{if(!l.touch0)return;r=l.touch0[0],a=l.touch0[1]}l.zoom("touch",i(g(o,r,a),l.extent,s))}}function C(e,...o){if(this.__zooming){var r,i,a=b(this,o).event(e),l=e.changedTouches,u=l.length;for(Gs(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),r=0;r<u;++r)i=l[r],a.touch0&&a.touch0[2]===i.identifier?delete a.touch0:a.touch1&&a.touch1[2]===i.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(i=Xl(i,this),Math.hypot(t[0]-i[0],t[1]-i[1])<p)){var s=Gl(this).on("dblclick.zoom");s&&s.apply(this,arguments)}}}return v.transform=function(e,t,n,o){var r=e.selection?e.selection():e;r.property("__zoom",qs),e!==r?w(e,t,n,o):r.interrupt().each((function(){b(this,arguments).event(o).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},v.scaleBy=function(e,t,n,o){v.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n,o)},v.scaleTo=function(e,t,n,o){v.transform(e,(function(){var e=r.apply(this,arguments),o=this.__zoom,a=null==n?y(e):"function"==typeof n?n.apply(this,arguments):n,l=o.invert(a),u="function"==typeof t?t.apply(this,arguments):t;return i(g(m(o,u),a,l),e,s)}),n,o)},v.translateBy=function(e,t,n,o){v.transform(e,(function(){return i(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),s)}),null,o)},v.translateTo=function(e,t,n,o,a){v.transform(e,(function(){var e=r.apply(this,arguments),a=this.__zoom,l=null==o?y(e):"function"==typeof o?o.apply(this,arguments):o;return i(Ys.translate(l[0],l[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,s)}),o,a)},_.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Gl(this.that).datum();f.call(e,this.that,new Hs(e,{sourceEvent:this.sourceEvent,target:v,transform:this.that.__zoom,dispatch:f}),t)}},v.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:Ls(+e),v):a},v.filter=function(e){return arguments.length?(o="function"==typeof e?e:Ls(!!e),v):o},v.touchable=function(e){return arguments.length?(l="function"==typeof e?e:Ls(!!e),v):l},v.extent=function(e){return arguments.length?(r="function"==typeof e?e:Ls([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),v):r},v.scaleExtent=function(e){return arguments.length?(u[0]=+e[0],u[1]=+e[1],v):[u[0],u[1]]},v.translateExtent=function(e){return arguments.length?(s[0][0]=+e[0][0],s[1][0]=+e[1][0],s[0][1]=+e[0][1],s[1][1]=+e[1][1],v):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},v.constrain=function(e){return arguments.length?(i=e,v):i},v.duration=function(e){return arguments.length?(c=+e,v):c},v.interpolate=function(e){return arguments.length?(d=e,v):d},v.on=function(){var e=f.on.apply(f,arguments);return e===f?v:e},v.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,v):Math.sqrt(h)},v.tapDistance=function(e){return arguments.length?(p=+e,v):p},v}Fs.prototype;const Js=Symbol("MiniMapSlots"),ec=["id","x","y","rx","ry","width","height","fill","stroke","stroke-width","shape-rendering"],tc=t.defineComponent({name:"MiniMapNode",compatConfig:{MODE:3},inheritAttrs:!1,props:{id:{},type:{},selected:{type:Boolean},dragging:{type:Boolean},position:{},dimensions:{},borderRadius:{},color:{},shapeRendering:{},strokeColor:{},strokeWidth:{},hidden:{type:Boolean}},emits:["click","dblclick","mouseenter","mousemove","mouseleave"],setup(e,{emit:n}){const o=e,r=t.inject(Js),i=t.useAttrs(),a=t.toRef((()=>i.style??{}));function l(e){n("click",e)}function u(e){n("dblclick",e)}function s(e){n("mouseenter",e)}function c(e){n("mousemove",e)}function d(e){n("mouseleave",e)}return(e,n)=>e.hidden||0===e.dimensions.width||0===e.dimensions.height?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.unref(r)[`node-${o.type}`]?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(t.unref(r)[`node-${o.type}`]),t.normalizeProps(t.mergeProps({key:0},{...o,...e.$attrs})),null,16)):(t.openBlock(),t.createElementBlock("rect",t.mergeProps({key:1,id:e.id},e.$attrs,{class:["vue-flow__minimap-node",{selected:e.selected,dragging:e.dragging}],x:e.position.x,y:e.position.y,rx:e.borderRadius,ry:e.borderRadius,width:e.dimensions.width,height:e.dimensions.height,fill:e.color||a.value.background||a.value.backgroundColor,stroke:e.strokeColor,"stroke-width":e.strokeWidth,"shape-rendering":e.shapeRendering,onClick:l,onDblclick:u,onMouseenter:s,onMousemove:c,onMouseleave:d}),null,16,ec))],64))}}),nc=["width","height","viewBox","aria-labelledby"],oc=["id"],rc=["d","fill","stroke","stroke-width"],ic=t.defineComponent({name:"MiniMap",compatConfig:{MODE:3},props:{nodeColor:{type:[String,Function],default:"#e2e2e2"},nodeStrokeColor:{type:[String,Function],default:"transparent"},nodeClassName:{type:[String,Function]},nodeBorderRadius:{default:5},nodeStrokeWidth:{default:2},maskColor:{default:"rgb(240, 240, 240, 0.6)"},maskStrokeColor:{default:"none"},maskStrokeWidth:{default:1},position:{default:"bottom-right"},pannable:{type:Boolean,default:!1},zoomable:{type:Boolean,default:!1},width:{},height:{},ariaLabel:{default:"Vue Flow mini map"},inversePan:{type:Boolean,default:!1},zoomStep:{default:10},offsetScale:{default:5},maskBorderRadius:{default:0}},emits:["click","nodeClick","nodeDblclick","nodeMouseenter","nodeMousemove","nodeMouseleave"],setup(e,{emit:n}){const o=t.useSlots(),r=t.useAttrs(),{id:i,edges:a,viewport:l,translateExtent:u,dimensions:s,emits:c,d3Selection:d,d3Zoom:f,getNodesInitialized:h}=$i(),p=t.ref();t.provide(Js,o);const v=t.toRef((()=>{var t;return e.width??(null==(t=r.style)?void 0:t.width)??200})),m=t.toRef((()=>{var t;return e.height??(null==(t=r.style)?void 0:t.height)??150})),g="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision",y=t.computed((()=>"string"==typeof e.nodeColor?()=>e.nodeColor:e.nodeColor)),w=t.computed((()=>"string"==typeof e.nodeStrokeColor?()=>e.nodeStrokeColor:e.nodeStrokeColor)),b=t.computed((()=>"string"==typeof e.nodeClassName?()=>e.nodeClassName:"function"==typeof e.nodeClassName?e.nodeClassName:()=>"")),_=t.computed((()=>Ao(h.value))),x=t.computed((()=>({x:-l.value.x/l.value.zoom,y:-l.value.y/l.value.zoom,width:s.value.width/l.value.zoom,height:s.value.height/l.value.zoom}))),k=t.computed((()=>{return h.value&&h.value.length?(e=_.value,t=x.value,zo($o(Io(e),Io(t)))):x.value;var e,t})),S=t.computed((()=>{const e=k.value.width/v.value,t=k.value.height/m.value;return Math.max(e,t)})),E=t.computed((()=>{const t=S.value*v.value,n=S.value*m.value,o=e.offsetScale*S.value;return{offset:o,x:k.value.x-(t-k.value.width)/2-o,y:k.value.y-(n-k.value.height)/2-o,width:t+2*o,height:n+2*o}})),N=t.computed((()=>E.value.x&&E.value.y?`\n    M${E.value.x-E.value.offset},${E.value.y-E.value.offset}\n    h${E.value.width+2*E.value.offset}\n    v${E.value.height+2*E.value.offset}\n    h${-E.value.width-2*E.value.offset}z\n    M${x.value.x+e.maskBorderRadius},${x.value.y}\n    h${x.value.width-2*e.maskBorderRadius}\n    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},${e.maskBorderRadius}\n    v${x.value.height-2*e.maskBorderRadius}\n    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},${e.maskBorderRadius}\n    h${-(x.value.width-2*e.maskBorderRadius)}\n    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},-${e.maskBorderRadius}\n    v${-(x.value.height-2*e.maskBorderRadius)}\n    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},-${e.maskBorderRadius}z`:""));function C(e){const[t,o]=Xl(e);n("click",{event:e,position:{x:t,y:o}})}return t.watchEffect((t=>{if(p.value){const n=Gl(p.value),o=t=>{if("wheel"!==t.sourceEvent.type||!d.value||!f.value)return;const n=-t.sourceEvent.deltaY*(1===t.sourceEvent.deltaMode?.05:t.sourceEvent.deltaMode?1:.002)*e.zoomStep,o=l.value.zoom*2**n;f.value.scaleTo(d.value,o)},r=t=>{if("mousemove"!==t.sourceEvent.type||!d.value||!f.value)return;const n=S.value*Math.max(1,l.value.zoom)*(e.inversePan?-1:1),o={x:l.value.x-t.sourceEvent.movementX*n,y:l.value.y-t.sourceEvent.movementY*n},r=[[0,0],[s.value.width,s.value.height]],i=Ys.translate(o.x,o.y).scale(l.value.zoom),a=f.value.constrain()(i,r,u.value);f.value.transform(d.value,a)},i=Qs().on("zoom",e.pannable?r:()=>{}).on("zoom.wheel",e.zoomable?o:()=>{});n.call(i),t((()=>{n.on("zoom",null)}))}}),{flush:"post"}),(e,o)=>(t.openBlock(),t.createBlock(t.unref(ia),{position:e.position,class:t.normalizeClass(["vue-flow__minimap",{pannable:e.pannable,zoomable:e.zoomable}])},{default:t.withCtx((()=>[(t.openBlock(),t.createElementBlock("svg",{ref_key:"el",ref:p,width:v.value,height:m.value,viewBox:[E.value.x,E.value.y,E.value.width,E.value.height].join(" "),role:"img","aria-labelledby":`vue-flow__minimap-${t.unref(i)}`,onClick:C},[e.ariaLabel?(t.openBlock(),t.createElementBlock("title",{key:0,id:`vue-flow__minimap-${t.unref(i)}`},t.toDisplayString(e.ariaLabel),9,oc)):t.createCommentVNode("",!0),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(h),(o=>(t.openBlock(),t.createBlock(tc,{id:o.id,key:o.id,position:o.computedPosition,dimensions:o.dimensions,selected:o.selected,dragging:o.dragging,style:t.normalizeStyle(o.style),class:t.normalizeClass(b.value(o)),color:y.value(o),"border-radius":e.nodeBorderRadius,"stroke-color":w.value(o),"stroke-width":e.nodeStrokeWidth,"shape-rendering":t.unref(g),type:o.type,hidden:o.hidden,onClick:e=>function(e,t){const o={event:e,node:t,connectedEdges:Vo([t],a.value)};c.miniMapNodeClick(o),n("nodeClick",o)}(e,o),onDblclick:e=>function(e,t){const o={event:e,node:t,connectedEdges:Vo([t],a.value)};c.miniMapNodeDoubleClick(o),n("nodeDblclick",o)}(e,o),onMouseenter:e=>function(e,t){const o={event:e,node:t,connectedEdges:Vo([t],a.value)};c.miniMapNodeMouseEnter(o),n("nodeMouseenter",o)}(e,o),onMousemove:e=>function(e,t){const o={event:e,node:t,connectedEdges:Vo([t],a.value)};c.miniMapNodeMouseMove(o),n("nodeMousemove",o)}(e,o),onMouseleave:e=>function(e,t){const o={event:e,node:t,connectedEdges:Vo([t],a.value)};c.miniMapNodeMouseLeave(o),n("nodeMouseleave",o)}(e,o)},null,8,["id","position","dimensions","selected","dragging","style","class","color","border-radius","stroke-color","stroke-width","shape-rendering","type","hidden","onClick","onDblclick","onMouseenter","onMousemove","onMouseleave"])))),128)),t.createElementVNode("path",{class:"vue-flow__minimap-mask",d:N.value,fill:e.maskColor,stroke:e.maskStrokeColor,"stroke-width":e.maskStrokeWidth,"fill-rule":"evenodd"},null,8,rc)],8,nc))])),_:1},8,["position","class"]))}}),ac=t.defineComponent({__name:"MiniMap",props:{useMiniMap:{type:Boolean,default:!0},miniMapPosition:{type:String,default:"bottom-right"},miniMapNodeColor:{type:String,default:"#fff"},miniMapNodeStrokeColor:{type:String,default:"#555"},miniMapNodeClassName:{type:String},miniMapNodeBorderRadius:{type:Number,default:5},miniMapNodeStrokeWidth:{type:Number,default:2},miniMapMaskColor:{type:String,default:"rgb(240, 242, 243, 0.7)"},miniMapPannable:{type:Boolean,default:!0},miniMapZoomable:{type:Boolean,default:!0}},setup(e){const n=e;return(o,r)=>n.useMiniMap?(t.openBlock(),t.createBlock(t.unref(ic),{key:0,position:e.miniMapPosition,"node-color":e.miniMapNodeColor,"node-stroke-color":e.miniMapNodeStrokeColor,"node-class-name":e.miniMapNodeClassName,"node-border-radius":e.miniMapNodeBorderRadius,"node-stroke-width":e.miniMapNodeStrokeWidth,"mask-color":e.miniMapMaskColor,pannable:e.miniMapPannable,zoomable:e.miniMapZoomable},null,8,["position","node-color","node-stroke-color","node-class-name","node-border-radius","node-stroke-width","mask-color","pannable","zoomable"])):t.createCommentVNode("",!0)}}),lc=t.defineComponent({__name:"svgICon",props:{name:{type:String,required:!0}},setup(e){const n=e,o=t.shallowRef();return t.watch((()=>n.name),(e=>{o.value=t.defineAsyncComponent((()=>((e,t,n)=>{const o=e[t];return o?"function"==typeof o?o():Promise.resolve(o):new Promise(((e,o)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))}))})(Object.assign({"../../assets/icon/arrow-rotate-left.svg":()=>Promise.resolve().then((()=>kd)),"../../assets/icon/arrow-rotate-right.svg":()=>Promise.resolve().then((()=>Cd)),"../../assets/icon/camera.svg":()=>Promise.resolve().then((()=>Td)),"../../assets/icon/copy.svg":()=>Promise.resolve().then((()=>Ad)),"../../assets/icon/floppy-disk.svg":()=>Promise.resolve().then((()=>Rd)),"../../assets/icon/moon.svg":()=>Promise.resolve().then((()=>Yd)),"../../assets/icon/pen-to-square.svg":()=>Promise.resolve().then((()=>jd)),"../../assets/icon/play.svg":()=>Promise.resolve().then((()=>Wd)),"../../assets/icon/plus.svg":()=>Promise.resolve().then((()=>tf)),"../../assets/icon/sun.svg":()=>Promise.resolve().then((()=>af)),"../../assets/icon/trash.svg":()=>Promise.resolve().then((()=>cf))}),`../../assets/icon/${e}.svg`,5)))}),{immediate:!0}),(e,n)=>(t.openBlock(),t.createBlock(t.resolveDynamicComponent(o.value),{class:"fill-current"}))}}),uc={class:"vue-flow__controls-button"};const sc=((e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n})({name:"ControlButton",compatConfig:{MODE:3}},[["render",function(e,n,o,r,i,a){return t.openBlock(),t.createElementBlock("button",uc,[t.renderSlot(e.$slots,"default")])}]]),cc={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},dc=[t.createElementVNode("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1)];const fc={render:function(e,n){return t.openBlock(),t.createElementBlock("svg",cc,dc)}},hc={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},pc=[t.createElementVNode("path",{d:"M0 0h32v4.2H0z"},null,-1)];const vc={render:function(e,n){return t.openBlock(),t.createElementBlock("svg",hc,pc)}},mc={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},gc=[t.createElementVNode("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1)];const yc={render:function(e,n){return t.openBlock(),t.createElementBlock("svg",mc,gc)}},wc={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},bc=[t.createElementVNode("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1)];const _c={render:function(e,n){return t.openBlock(),t.createElementBlock("svg",wc,bc)}},xc={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},kc=[t.createElementVNode("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1)];const Sc={render:function(e,n){return t.openBlock(),t.createElementBlock("svg",xc,kc)}},Ec=t.defineComponent({name:"Controls",compatConfig:{MODE:3},props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>lo.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:n}){const{nodesDraggable:o,nodesConnectable:r,elementsSelectable:i,setInteractive:a,zoomIn:l,zoomOut:u,fitView:s,viewport:c,minZoom:d,maxZoom:f}=$i(),h=t.toRef((()=>o.value||r.value||i.value)),p=t.toRef((()=>c.value.zoom<=d.value)),v=t.toRef((()=>c.value.zoom>=f.value));function m(){l(),n("zoomIn")}function g(){u(),n("zoomOut")}function y(){s(e.fitViewParams),n("fitView")}function w(){a(!h.value),n("interactionChange",!h.value)}return(e,n)=>(t.openBlock(),t.createBlock(t.unref(ia),{class:"vue-flow__controls",position:e.position},{default:t.withCtx((()=>[t.renderSlot(e.$slots,"top"),e.showZoom?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.renderSlot(e.$slots,"control-zoom-in",{},(()=>[t.createVNode(sc,{class:"vue-flow__controls-zoomin",disabled:v.value,onClick:m},{default:t.withCtx((()=>[t.renderSlot(e.$slots,"icon-zoom-in",{},(()=>[(t.openBlock(),t.createBlock(t.resolveDynamicComponent(t.unref(fc))))]))])),_:3},8,["disabled"])])),t.renderSlot(e.$slots,"control-zoom-out",{},(()=>[t.createVNode(sc,{class:"vue-flow__controls-zoomout",disabled:p.value,onClick:g},{default:t.withCtx((()=>[t.renderSlot(e.$slots,"icon-zoom-out",{},(()=>[(t.openBlock(),t.createBlock(t.resolveDynamicComponent(t.unref(vc))))]))])),_:3},8,["disabled"])]))],64)):t.createCommentVNode("",!0),e.showFitView?t.renderSlot(e.$slots,"control-fit-view",{key:1},(()=>[t.createVNode(sc,{class:"vue-flow__controls-fitview",onClick:y},{default:t.withCtx((()=>[t.renderSlot(e.$slots,"icon-fit-view",{},(()=>[(t.openBlock(),t.createBlock(t.resolveDynamicComponent(t.unref(yc))))]))])),_:3})])):t.createCommentVNode("",!0),e.showInteractive?t.renderSlot(e.$slots,"control-interactive",{key:2},(()=>[e.showInteractive?(t.openBlock(),t.createBlock(sc,{key:0,class:"vue-flow__controls-interactive",onClick:w},{default:t.withCtx((()=>[h.value?t.renderSlot(e.$slots,"icon-unlock",{key:0},(()=>[(t.openBlock(),t.createBlock(t.resolveDynamicComponent(t.unref(Sc))))])):t.createCommentVNode("",!0),h.value?t.createCommentVNode("",!0):t.renderSlot(e.$slots,"icon-lock",{key:1},(()=>[(t.openBlock(),t.createBlock(t.resolveDynamicComponent(t.unref(_c))))]))])),_:3})):t.createCommentVNode("",!0)])):t.createCommentVNode("",!0),t.renderSlot(e.$slots,"default")])),_:3},8,["position"]))}});const Nc=(()=>{let e=0;return()=>(e+=1,`u${`0000${(Math.random()*36**4|0).toString(36)}`.slice(-4)}${e}`)})();function Cc(e){const t=[];for(let n=0,o=e.length;n<o;n++)t.push(e[n]);return t}let Mc=null;function Bc(e={}){return Mc||(e.includeStyleProperties?(Mc=e.includeStyleProperties,Mc):(Mc=Cc(window.getComputedStyle(document.documentElement)),Mc))}function Pc(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function Tc(e,t={}){return{width:t.width||function(e){const t=Pc(e,"border-left-width"),n=Pc(e,"border-right-width");return e.clientWidth+t+n}(e),height:t.height||function(e){const t=Pc(e,"border-top-width"),n=Pc(e,"border-bottom-width");return e.clientHeight+t+n}(e)}}const $c=16384;function Ic(e){return new Promise(((t,n)=>{const o=new Image;o.onload=()=>{o.decode().then((()=>{requestAnimationFrame((()=>t(o)))}))},o.onerror=n,o.crossOrigin="anonymous",o.decoding="async",o.src=e}))}async function zc(e,t,n){const o="http://www.w3.org/2000/svg",r=document.createElementNS(o,"svg"),i=document.createElementNS(o,"foreignObject");return r.setAttribute("width",`${t}`),r.setAttribute("height",`${n}`),r.setAttribute("viewBox",`0 0 ${t} ${n}`),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("externalResourcesRequired","true"),r.appendChild(i),i.appendChild(e),async function(e){return Promise.resolve().then((()=>(new XMLSerializer).serializeToString(e))).then(encodeURIComponent).then((e=>`data:image/svg+xml;charset=utf-8,${e}`))}(r)}const Ac=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return null!==n&&(n.constructor.name===t.name||Ac(n,t))};function Dc(e,t,n,o){const r=`.${e}:${t}`,i=n.cssText?function(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}(n):function(e,t){return Bc(t).map((t=>`${t}: ${e.getPropertyValue(t)}${e.getPropertyPriority(t)?" !important":""};`)).join(" ")}(n,o);return document.createTextNode(`${r}{${i}}`)}function Vc(e,t,n,o){const r=window.getComputedStyle(e,n),i=r.getPropertyValue("content");if(""===i||"none"===i)return;const a=Nc();try{t.className=`${t.className} ${a}`}catch(u){return}const l=document.createElement("style");l.appendChild(Dc(a,n,r,o)),t.appendChild(l)}const Oc="application/font-woff",Rc="image/jpeg",Lc={woff:Oc,woff2:Oc,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Rc,jpeg:Rc,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Hc(e){const t=function(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}(e).toLowerCase();return Lc[t]||""}function Fc(e){return-1!==e.search(/^(data:)/)}async function Yc(e,t,n){const o=await fetch(e,t);if(404===o.status)throw new Error(`Resource "${o.url}" not found`);const r=await o.blob();return new Promise(((e,t)=>{const i=new FileReader;i.onerror=t,i.onloadend=()=>{try{e(n({res:o,result:i.result}))}catch(r){t(r)}},i.readAsDataURL(r)}))}const Gc={};async function Xc(e,t,n){const o=function(e,t,n){let o=e.replace(/\?.*/,"");return n&&(o=e),/ttf|otf|eot|woff2?/i.test(o)&&(o=o.replace(/.*\//,"")),t?`[${t}]${o}`:o}(e,t,n.includeQueryParams);if(null!=Gc[o])return Gc[o];let r;n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());try{const o=await Yc(e,n.fetchRequestInit,(({res:e,result:n})=>(t||(t=e.headers.get("Content-Type")||""),function(e){return e.split(/,/)[1]}(n))));r=function(e,t){return`data:${t};base64,${e}`}(o,t)}catch(i){r=n.imagePlaceholder||"";let t=`Failed to fetch resource: ${e}`;i&&(t="string"==typeof i?i:i.message),t&&console.warn(t)}return Gc[o]=r,r}async function Uc(e,t){return Ac(e,HTMLCanvasElement)?async function(e){const t=e.toDataURL();return"data:,"===t?e.cloneNode(!1):Ic(t)}(e):Ac(e,HTMLVideoElement)?async function(e,t){if(e.currentSrc){const t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.clientWidth,t.height=e.clientHeight,null==n||n.drawImage(e,0,0,t.width,t.height),Ic(t.toDataURL())}const n=e.poster,o=Hc(n);return Ic(await Xc(n,o,t))}(e,t):Ac(e,HTMLIFrameElement)?async function(e,t){var n;try{if(null===(n=null==e?void 0:e.contentDocument)||void 0===n?void 0:n.body)return await Kc(e.contentDocument.body,t,!0)}catch(o){}return e.cloneNode(!1)}(e,t):e.cloneNode(qc(e))}const jc=e=>null!=e.tagName&&"SLOT"===e.tagName.toUpperCase(),qc=e=>null!=e.tagName&&"SVG"===e.tagName.toUpperCase();function Zc(e,t,n){return Ac(t,Element)&&(function(e,t,n){const o=t.style;if(!o)return;const r=window.getComputedStyle(e);r.cssText?(o.cssText=r.cssText,o.transformOrigin=r.transformOrigin):Bc(n).forEach((n=>{let i=r.getPropertyValue(n);if("font-size"===n&&i.endsWith("px")){const e=Math.floor(parseFloat(i.substring(0,i.length-2)))-.1;i=`${e}px`}Ac(e,HTMLIFrameElement)&&"display"===n&&"inline"===i&&(i="block"),"d"===n&&t.getAttribute("d")&&(i=`path(${t.getAttribute("d")})`),o.setProperty(n,i,r.getPropertyPriority(n))}))}(e,t,n),function(e,t,n){Vc(e,t,":before",n),Vc(e,t,":after",n)}(e,t,n),function(e,t){Ac(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Ac(e,HTMLInputElement)&&t.setAttribute("value",e.value)}(e,t),function(e,t){if(Ac(e,HTMLSelectElement)){const n=t,o=Array.from(n.children).find((t=>e.value===t.getAttribute("value")));o&&o.setAttribute("selected","")}}(e,t)),t}async function Kc(e,t,n){return n||!t.filter||t.filter(e)?Promise.resolve(e).then((e=>Uc(e,t))).then((n=>async function(e,t,n){var o,r;if(qc(t))return t;let i=[];return i=jc(e)&&e.assignedNodes?Cc(e.assignedNodes()):Ac(e,HTMLIFrameElement)&&(null===(o=e.contentDocument)||void 0===o?void 0:o.body)?Cc(e.contentDocument.body.childNodes):Cc((null!==(r=e.shadowRoot)&&void 0!==r?r:e).childNodes),0===i.length||Ac(e,HTMLVideoElement)||await i.reduce(((e,o)=>e.then((()=>Kc(o,n))).then((e=>{e&&t.appendChild(e)}))),Promise.resolve()),t}(e,n,t))).then((n=>Zc(e,n,t))).then((e=>async function(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(0===n.length)return e;const o={};for(let i=0;i<n.length;i++){const r=n[i].getAttribute("xlink:href");if(r){const n=e.querySelector(r),i=document.querySelector(r);n||!i||o[r]||(o[r]=await Kc(i,t,!0))}}const r=Object.values(o);if(r.length){const t="http://www.w3.org/1999/xhtml",n=document.createElementNS(t,"svg");n.setAttribute("xmlns",t),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";const o=document.createElementNS(t,"defs");n.appendChild(o);for(let e=0;e<r.length;e++)o.appendChild(r[e]);e.appendChild(n)}return e}(e,t))):null}const Wc=/url\((['"]?)([^'"]+?)\1\)/g,Qc=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Jc=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function ed(e,t,n,o,r){try{const i=n?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),o=n.createElement("base"),r=n.createElement("a");return n.head.appendChild(o),n.body.appendChild(r),t&&(o.href=t),r.href=e,r.href}(t,n):t,a=Hc(t);let l;return r||(l=await Xc(i,a,o)),e.replace(function(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}(t),`$1${l}$3`)}catch(i){}return e}function td(e){return-1!==e.search(Wc)}async function nd(e,t,n){if(!td(e))return e;const o=function(e,{preferredFontFormat:t}){return t?e.replace(Jc,(e=>{for(;;){const[n,,o]=Qc.exec(e)||[];if(!o)return"";if(o===t)return`src: ${n};`}})):e}(e,n),r=function(e){const t=[];return e.replace(Wc,((e,n,o)=>(t.push(o),e))),t.filter((e=>!Fc(e)))}(o);return r.reduce(((e,o)=>e.then((e=>ed(e,o,t,n)))),Promise.resolve(o))}async function od(e,t,n){var o;const r=null===(o=t.style)||void 0===o?void 0:o.getPropertyValue(e);if(r){const o=await nd(r,null,n);return t.style.setProperty(e,o,t.style.getPropertyPriority(e)),!0}return!1}async function rd(e,t){Ac(e,Element)&&(await async function(e,t){await od("background",e,t)||await od("background-image",e,t),await od("mask",e,t)||await od("-webkit-mask",e,t)||await od("mask-image",e,t)||await od("-webkit-mask-image",e,t)}(e,t),await async function(e,t){const n=Ac(e,HTMLImageElement);if((!n||Fc(e.src))&&(!Ac(e,SVGImageElement)||Fc(e.href.baseVal)))return;const o=n?e.src:e.href.baseVal,r=await Xc(o,Hc(o),t);await new Promise(((o,i)=>{e.onload=o,e.onerror=t.onImageErrorHandler?(...e)=>{try{o(t.onImageErrorHandler(...e))}catch(n){i(n)}}:i;const a=e;a.decode&&(a.decode=o),"lazy"===a.loading&&(a.loading="eager"),n?(e.srcset="",e.src=r):e.href.baseVal=r}))}(e,t),await async function(e,t){const n=Cc(e.childNodes).map((e=>rd(e,t)));await Promise.all(n).then((()=>e))}(e,t))}const id={};async function ad(e){let t=id[e];if(null!=t)return t;const n=await fetch(e);return t={url:e,cssText:await n.text()},id[e]=t,t}async function ld(e,t){let n=e.cssText;const o=/url\(["']?([^"')]+)["']?\)/g,r=(n.match(/url\([^)]+\)/g)||[]).map((async r=>{let i=r.replace(o,"$1");return i.startsWith("https://")||(i=new URL(i,e.url).href),Yc(i,t.fetchRequestInit,(({result:e})=>(n=n.replace(r,`url(${e})`),[r,e])))}));return Promise.all(r).then((()=>n))}function ud(e){if(null==e)return[];const t=[];let n=e.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const o=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const e=o.exec(n);if(null===e)break;t.push(e[0])}n=n.replace(o,"");const r=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let e=r.exec(n);if(null===e){if(e=i.exec(n),null===e)break;r.lastIndex=i.lastIndex}else i.lastIndex=r.lastIndex;t.push(e[0])}return t}async function sd(e,t){if(null==e.ownerDocument)throw new Error("Provided element is not within a Document");const n=Cc(e.ownerDocument.styleSheets),o=await async function(e,t){const n=[],o=[];return e.forEach((n=>{if("cssRules"in n)try{Cc(n.cssRules||[]).forEach(((e,r)=>{if(e.type===CSSRule.IMPORT_RULE){let i=r+1;const a=ad(e.href).then((e=>ld(e,t))).then((e=>ud(e).forEach((e=>{try{n.insertRule(e,e.startsWith("@import")?i+=1:n.cssRules.length)}catch(t){console.error("Error inserting rule from remote css",{rule:e,error:t})}})))).catch((e=>{console.error("Error loading remote css",e.toString())}));o.push(a)}}))}catch(r){const i=e.find((e=>null==e.href))||document.styleSheets[0];null!=n.href&&o.push(ad(n.href).then((e=>ld(e,t))).then((e=>ud(e).forEach((e=>{i.insertRule(e,i.cssRules.length)})))).catch((e=>{console.error("Error loading remote stylesheet",e)}))),console.error("Error inlining remote css file",r)}})),Promise.all(o).then((()=>(e.forEach((e=>{if("cssRules"in e)try{Cc(e.cssRules||[]).forEach((e=>{n.push(e)}))}catch(t){console.error(`Error while reading CSS rules from ${e.href}`,t)}})),n)))}(n,t);return function(e){return e.filter((e=>e.type===CSSRule.FONT_FACE_RULE)).filter((e=>td(e.style.getPropertyValue("src"))))}(o)}function cd(e){return e.trim().replace(/["']/g,"")}async function dd(e,t){const n=await sd(e,t),o=function(e){const t=new Set;return function e(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach((e=>{t.add(cd(e))})),Array.from(n.children).forEach((t=>{t instanceof HTMLElement&&e(t)}))}(e),t}(e);return(await Promise.all(n.filter((e=>o.has(cd(e.style.fontFamily)))).map((e=>{const n=e.parentStyleSheet?e.parentStyleSheet.href:null;return nd(e.cssText,n,t)})))).join("\n")}async function fd(e,t={}){const{width:n,height:o}=Tc(e,t),r=await Kc(e,t,!0);await async function(e,t){const n=null!=t.fontEmbedCSS?t.fontEmbedCSS:t.skipFonts?null:await dd(e,t);if(n){const t=document.createElement("style"),o=document.createTextNode(n);t.appendChild(o),e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}}(r,t),await rd(r,t),function(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const o=t.style;null!=o&&Object.keys(o).forEach((e=>{n[e]=o[e]}))}(r,t);return await zc(r,n,o)}async function hd(e,t={}){const{width:n,height:o}=Tc(e,t),r=await fd(e,t),i=await Ic(r),a=document.createElement("canvas"),l=a.getContext("2d"),u=t.pixelRatio||function(){let e,t;try{t=process}catch(o){}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}(),s=t.canvasWidth||n,c=t.canvasHeight||o;return a.width=s*u,a.height=c*u,t.skipAutoScale||function(e){(e.width>$c||e.height>$c)&&(e.width>$c&&e.height>$c?e.width>e.height?(e.height*=$c/e.width,e.width=$c):(e.width*=$c/e.height,e.height=$c):e.width>$c?(e.height*=$c/e.width,e.width=$c):(e.width*=$c/e.height,e.height=$c))}(a),a.style.width=`${s}`,a.style.height=`${c}`,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,a.width,a.height)),l.drawImage(i,0,0,a.width,a.height),a}function pd(){const e=t.ref(""),n=t.ref("png"),o=t.ref(),r=(t,r={quality:.95})=>(o.value=null,async function(e,t={}){return(await hd(e,t)).toDataURL("image/jpeg",t.quality||1)}(t,r).then((t=>(e.value=t,n.value="jpeg",t))).catch((e=>{throw e.value=e,new Error(e)}))),i=(t,r={quality:.95})=>(o.value=null,async function(e,t={}){return(await hd(e,t)).toDataURL()}(t,r).then((t=>(e.value=t,n.value="png",t))).catch((e=>{throw e.value=e,new Error(e)}))),a=t=>{const o=document.createElement("a");o.download=`${t}.${n.value}`,o.href=e.value,o.click()};return{capture:async(e,t={})=>{let n={};const o=t.fileName??`vue-flow-screenshot-${Date.now()}`;let l=e;if(t.isNodeDataOnly&&(l=e.querySelector(".vue-flow__viewport"),l.style.backgroundColor="white"),"jpeg"===t.type)n=await r(l,t);else n=await i(l,t);return t.shouldDownload&&""!==o&&a(o),n},download:a,dataUrl:e,error:o}}const vd=t.defineComponent({__name:"Controls",props:{useControl:{type:Boolean,default:!0},controlPosition:{type:String,default:"top-right"},controlShowZoom:{type:Boolean,default:!0},controlShowFitView:{type:Boolean,default:!0},controlShowInteractive:{type:Boolean,default:!0},controlShowUndoRedo:{type:Boolean,default:!0},controlShowScreenShot:{type:Boolean,default:!0},controlShowTheme:{type:Boolean,default:!0},controlShowSave:{type:Boolean,default:!0},controlShowExecution:{type:Boolean,default:!0}},emits:["save","executeAll","switchTheme"],setup(e,{emit:n}){const{getNodes:o,getEdges:r,vueFlowRef:i,getSelectedElements:a}=$i(),{executeUndo:l,executeRedo:u,isUndoDisabled:s,isRedoDisabled:c,transformNodeData:d,transformEdgeData:f,getPath:h}=sa(),{capture:p}=pd(),v=e,m=n,g=t.ref("light"),y=()=>{l()},w=()=>{u()},b=()=>{a.value.forEach((e=>{e.selected=!1})),p(i.value,{shouldDownload:!0,isNodeDataOnly:!1})},_=()=>{const e={nodes:d(o.value),edges:f(r.value)};m("save",e)},x=()=>{const e={nodes:d(o.value),edges:f(r.value),pathNodes:h()};m("executeAll",e)},k=()=>{g.value="light"===g.value?"dark":"light",m("switchTheme",{theme:g.value})};return(e,n)=>v.useControl?(t.openBlock(),t.createBlock(t.unref(Ec),{key:0,position:v.controlPosition,"show-zoom":v.controlShowZoom,"show-fit-view":v.controlShowFitView,"show-interactive":v.controlShowInteractive},{default:t.withCtx((()=>[v.controlShowUndoRedo?(t.openBlock(),t.createBlock(t.unref(sc),{key:0,disabled:t.unref(s),onClick:y},{default:t.withCtx((()=>[t.createVNode(lc,{name:"arrow-rotate-left"})])),_:1},8,["disabled"])):t.createCommentVNode("",!0),v.controlShowUndoRedo?(t.openBlock(),t.createBlock(t.unref(sc),{key:1,disabled:t.unref(c),onClick:w},{default:t.withCtx((()=>[t.createVNode(lc,{name:"arrow-rotate-right"})])),_:1},8,["disabled"])):t.createCommentVNode("",!0),v.controlShowScreenShot?(t.openBlock(),t.createBlock(t.unref(sc),{key:2,onClick:b},{default:t.withCtx((()=>[t.createVNode(lc,{name:"camera"})])),_:1})):t.createCommentVNode("",!0),v.controlShowSave?(t.openBlock(),t.createBlock(t.unref(sc),{key:3,onClick:_},{default:t.withCtx((()=>[t.createVNode(lc,{name:"floppy-disk"})])),_:1})):t.createCommentVNode("",!0),v.controlShowExecution?(t.openBlock(),t.createBlock(t.unref(sc),{key:4,onClick:x},{default:t.withCtx((()=>[t.createVNode(lc,{name:"play"})])),_:1})):t.createCommentVNode("",!0),v.controlShowTheme?(t.openBlock(),t.createBlock(t.unref(sc),{key:5,onClick:k},{default:t.withCtx((()=>[t.createVNode(lc,{name:"light"===g.value?"moon":"sun"},null,8,["name"])])),_:1})):t.createCommentVNode("",!0)])),_:1},8,["position","show-zoom","show-fit-view","show-interactive"])):t.createCommentVNode("",!0)}}),md=t.defineComponent({name:"NodeToolbar",compatConfig:{MODE:3},inheritAttrs:!1,props:{nodeId:{},isVisible:{type:Boolean,default:void 0},position:{default:to.Top},offset:{default:10},align:{default:"center"}},setup(e){const n=e,o=t.inject(Ir,null),{viewportRef:r,viewport:i,getSelectedNodes:a,findNode:l}=$i(),u=t.computed((()=>(Array.isArray(n.nodeId)?n.nodeId:[n.nodeId||o||""]).reduce(((e,t)=>{const n=l(t);return n&&e.push(n),e}),[]))),s=t.computed((()=>"boolean"==typeof n.isVisible?n.isVisible:1===u.value.length&&u.value[0].selected&&1===a.value.length)),c=t.computed((()=>Ao(u.value))),d=t.computed((()=>Math.max(...u.value.map((e=>(e.computedPosition.z||1)+1))))),f=t.computed((()=>({position:"absolute",transform:h(c.value,i.value,n.position,n.offset,n.align),zIndex:d.value})));function h(e,t,n,o,r){let i=.5;"start"===r?i=0:"end"===r&&(i=1);let a=[(e.x+e.width*i)*t.zoom+t.x,e.y*t.zoom+t.y-o],l=[-100*i,-100];switch(n){case to.Right:a=[(e.x+e.width)*t.zoom+t.x+o,(e.y+e.height*i)*t.zoom+t.y],l=[0,-100*i];break;case to.Bottom:a[1]=(e.y+e.height)*t.zoom+t.y+o,l[1]=0;break;case to.Left:a=[e.x*t.zoom+t.x-o,(e.y+e.height*i)*t.zoom+t.y],l=[-100,-100*i]}return`translate(${a[0]}px, ${a[1]}px) translate(${l[0]}%, ${l[1]}%)`}return(e,n)=>(t.openBlock(),t.createBlock(t.Teleport,{to:t.unref(r),disabled:!t.unref(r)},[s.value&&u.value.length?(t.openBlock(),t.createElementBlock("div",t.mergeProps({key:0},e.$attrs,{style:f.value,class:"vue-flow__node-toolbar"}),[t.renderSlot(e.$slots,"default")],16)):t.createCommentVNode("",!0)],8,["to","disabled"]))}}),gd=t.defineComponent({__name:"Node",props:{id:{type:String,required:!0},data:{type:Object,default:()=>{}},nodeLabelKey:{type:String,default:"label"},nodeTypeKey:{type:String,default:"type"},useNodeToolbar:{type:Boolean,default:!0},nodeToolbarPosition:{type:String,default:"bottom"},nodeToolbarOffset:{type:Number,default:10},nodeToolbarShowAdd:{type:Boolean,default:!0},nodeToolbarShowDelete:{type:Boolean,default:!0},nodeToolbarShowEdit:{type:Boolean,default:!0},nodeToolbarShowCopy:{type:Boolean,default:!0},nodeToolbarShowExecution:{type:Boolean,default:!0}},emits:["addNode","deleteNode","editNode","copyNode","execute"],setup(e,{emit:n}){const{findNode:o,getNodes:r,getEdges:i,updateNodeData:a}=$i(),{addNode:l,deleteElements:u,findAvailablePosition:s,transformNodeData:c,transformEdgeData:d,getPathByNodeId:f}=sa(),h=e,p=n,v=o(h.id),m=t.computed((()=>{var e;return null==(e=h.data)?void 0:e[h.nodeLabelKey]})),g=t.computed((()=>{var e;return null==(e=h.data)?void 0:e[h.nodeTypeKey]})),y=()=>{if(!v)return;const e={id:pa(),type:"custom",position:s(v.position),data:{[h.nodeLabelKey]:"Node"}};l(e),p("addNode",e)},w=()=>{const e=u();e&&p("deleteNode",e)},b=()=>{v&&p("editNode",c(v))},_=()=>{if(!v)return;const e={...v,id:pa(),position:s(v.position),selected:!1};l(e),p("copyNode",c(e))},x=()=>{if(!v)return;const e={nodes:c(r.value),edges:d(i.value),pathNodes:f(v.id)};p("execute",e)};return t.onMounted((()=>{h.data[h.nodeLabelKey]||a(h.id,{[h.nodeLabelKey]:"Node"}),h.data[h.nodeTypeKey]||a(h.id,{[h.nodeTypeKey]:"default"})})),(e,n)=>(t.openBlock(),t.createElementBlock(t.Fragment,null,[t.createVNode(t.unref(md),{"is-visible":!!h.useNodeToolbar&&void 0,position:h.nodeToolbarPosition,offset:h.nodeToolbarOffset},{default:t.withCtx((()=>[h.nodeToolbarShowAdd?(t.openBlock(),t.createElementBlock("button",{key:0,type:"button",onClick:y},[t.createVNode(lc,{name:"plus"})])):t.createCommentVNode("",!0),h.nodeToolbarShowDelete?(t.openBlock(),t.createElementBlock("button",{key:1,type:"button",onClick:w},[t.createVNode(lc,{name:"trash"})])):t.createCommentVNode("",!0),h.nodeToolbarShowEdit?(t.openBlock(),t.createElementBlock("button",{key:2,type:"button",onClick:b},[t.createVNode(lc,{name:"pen-to-square"})])):t.createCommentVNode("",!0),h.nodeToolbarShowCopy?(t.openBlock(),t.createElementBlock("button",{key:3,type:"button",onClick:_},[t.createVNode(lc,{name:"copy"})])):t.createCommentVNode("",!0),h.nodeToolbarShowExecution?(t.openBlock(),t.createElementBlock("button",{key:4,type:"button",onClick:x},[t.createVNode(lc,{name:"play"})])):t.createCommentVNode("",!0)])),_:1},8,["is-visible","position","offset"]),"input"!==g.value?(t.openBlock(),t.createBlock(t.unref(Jr),{key:0,type:"target",position:t.unref(to).Left},null,8,["position"])):t.createCommentVNode("",!0),t.createElementVNode("div",null,t.toDisplayString(m.value),1),"output"!==g.value?(t.openBlock(),t.createBlock(t.unref(Jr),{key:1,type:"source",position:t.unref(to).Right},null,8,["position"])):t.createCommentVNode("",!0)],64))}}),yd=t.defineComponent({__name:"Edge",props:{id:{type:String},edgeType:{type:String,default:"default"},sourceX:{type:Number},sourceY:{type:Number},targetX:{type:Number},targetY:{type:Number},sourcePosition:{type:String},targetPosition:{type:String},markerType:{type:Object,default:()=>{}}},setup(e){const{findEdge:n}=$i(),o=e,r={default:Ci,step:Ni,smoothStep:Ei,straight:Si},i=t.computed((()=>n(o.id))),a=t.computed((()=>{var e;return(null==(e=i.value)?void 0:e.selected)??!1}));t.watch((()=>a.value),(()=>{t.nextTick((()=>{l()}))}));const l=()=>{var e,t;let n="";const r=document.querySelector(`[data-id="${o.id}"] .vue-flow__edge-path`);if(r){n=window.getComputedStyle(r).stroke}i.value&&((null==(e=o.markerType)?void 0:e.markerStart)&&(i.value.markerStart={type:o.markerType.markerStart,color:n}),(null==(t=o.markerType)?void 0:t.markerEnd)&&(i.value.markerEnd={type:o.markerType.markerEnd,color:n}))};return t.onMounted((()=>{l()})),(n,i)=>(t.openBlock(),t.createBlock(t.resolveDynamicComponent(r[o.edgeType]||t.unref(Ci)),{id:e.id,"source-x":o.sourceX,"source-y":o.sourceY,"target-x":o.targetX,"target-y":o.targetY,"source-position":o.sourcePosition,"target-position":o.targetPosition},null,8,["id","source-x","source-y","target-x","target-y","source-position","target-position"]))}}),wd=t.defineComponent({__name:"vue-flow-core",props:{id:{type:String,default:"vueFlowCore"},nodes:{type:Array,default:()=>aa},edges:{type:Array,default:()=>la},minZoom:{type:Number,default:1},maxZoom:{type:Number,default:5},snapGrid:{type:Array,default:()=>[15,15],validator:e=>2===e.length||(console.warn("snapGrid       ."),!1)},showBgPattern:{type:Boolean,default:!0},bgPatternGap:{type:Number,default:10},bgColor:{type:String,default:"#fff"},bgPatternSize:{type:Number,default:.4},bgPatternColor:{type:String,default:"#81818a"},useMiniMap:{type:Boolean,default:!0},miniMapPosition:{type:String,default:"bottom-right"},miniMapNodeColor:{type:String,default:"#fff"},miniMapNodeStrokeColor:{type:String,default:"#555"},miniMapNodeClassName:{type:String},miniMapNodeBorderRadius:{type:Number,default:5},miniMapNodeStrokeWidth:{type:Number,default:2},miniMapMaskColor:{type:String,default:"rgb(240, 242, 243, 0.7)"},miniMapPannable:{type:Boolean,default:!0},miniMapZoomable:{type:Boolean,default:!0},useControl:{type:Boolean,default:!0},controlPosition:{type:String,default:"top-right"},controlShowZoom:{type:Boolean,default:!0},controlShowFitView:{type:Boolean,default:!0},controlShowInteractive:{type:Boolean,default:!0},controlShowUndoRedo:{type:Boolean,default:!0},controlShowScreenShot:{type:Boolean,default:!0},controlShowTheme:{type:Boolean,default:!0},controlShowSave:{type:Boolean,default:!0},controlShowExecution:{type:Boolean,default:!0},nodeLabelKey:{type:String,default:"label"},nodeTypeKey:{type:String,default:"type"},useNodeToolbar:{type:Boolean,default:!0},nodeToolbarPosition:{type:String,default:"bottom"},nodeToolbarOffset:{type:Number,default:10},nodeToolbarShowAdd:{type:Boolean,default:!0},nodeToolbarShowDelete:{type:Boolean,default:!0},nodeToolbarShowEdit:{type:Boolean,default:!0},nodeToolbarShowCopy:{type:Boolean,default:!0},nodeToolbarShowExecution:{type:Boolean,default:!0},edgeType:{type:String,default:"default"},markerType:{type:Object,default:()=>{}}},emits:["save","executeAll","switchTheme","addNode","deleteNode","editNode","copyNode","execute","deleteFlow","draggingOver","nodeClick","edgeClick","selectFlow"],setup(e,{expose:n,emit:o}){const{findNode:r,findEdge:i,getSelectedNodes:a,getSelectedEdges:l,getNodes:u,getEdges:s,getIncomers:c,getOutgoers:d}=$i(),{setSnapGrid:f,initHistoryStack:h,deleteElements:p,onNodeDragStart:v,onNodeDragStop:m,addEdge:g,updateNodeData:y,updateEdgeData:w,transformNodeData:b,transformEdgeData:_,getPath:x,getPathByNodeId:k}=sa(),{onDragStart:S,onDragOver:E,onDrop:N,onDragLeave:C,isDragOver:M}=function(){const{draggedType:e,draggedData:n,isDragOver:o,isDragging:r}=ma,{snapGrid:i,getNodeByPosition:a,addNode:l}=sa(),{screenToFlowCoordinate:u}=$i();t.watch(r,(e=>{document.body.style.userSelect=e?"none":""}));const s=()=>{r.value=!1,o.value=!1,e.value=null,document.removeEventListener("drop",s)};return{onDragStart:({event:t,data:o})=>{t.dataTransfer&&(t.dataTransfer.setData("application/vueflow",va),t.dataTransfer.effectAllowed="move"),e.value=va,n.value=o||{},r.value=!0,document.addEventListener("drop",s)},onDragOver:t=>{t.preventDefault(),e.value&&(o.value=!0,t.dataTransfer&&(t.dataTransfer.dropEffect="move"))},onDrop:e=>{const t=u({x:e.clientX,y:e.clientY}),o=["x","y"].reduce(((e,n,o)=>{const r=i.value[o],a=t[n],l=Math.round(a/r)*r;return e[n]=-0===l?0:l,e}),{});a({position:o})||l({id:pa(),type:"custom",position:o,data:n.value})},onDragLeave:()=>{o.value=!1},isDragOver:o}}(),B=e,P=o;f(B.snapGrid),t.watch((()=>B.snapGrid),(e=>{f(e)})),t.watch(M,(e=>{P("draggingOver",e)})),t.watch((()=>({nodes:B.nodes,edges:B.edges})),(({nodes:e,edges:t})=>{h({nodes:e,edges:t})}),{deep:!0});const T=({node:e})=>{P("nodeClick",b(e))},$=({edge:e})=>{P("edgeClick",_(e))},I=e=>{g({id:pa(),type:"custom",source:e.source,target:e.target})},z=e=>{if("Control"===e.key){const e=a.value,t=l.value;(e.length>0||t.length>0)&&P("selectFlow",{nodes:b(e),edges:_(t)})}};return n({changeNode:e=>{y(e)},changeEdge:e=>{w(e)},onDragStart:S,changeEdgeAnimated:e=>{s.value.forEach((t=>{t.animated=e.includes(t.id)}))},get getNodes(){return b(u.value)},get getEdges(){return _(s.value)},get getPath(){return x()},getPathByNodeId:k,getIncomers(e){const t=c(e);return b(t)},getOutgoers(e){const t=d(e);return b(t)}}),t.onMounted((()=>{window.addEventListener("keydown",(e=>{"Delete"===e.key&&(()=>{const e=p();e&&P("deleteFlow",e)})()})),document.addEventListener("contextmenu",(e=>{if(e.ctrlKey){e.preventDefault();const t=e.target,n=t.closest(".vue-flow__node");if(n){const e=n.getAttribute("data-id"),t=r(e);t&&(t.selected=!t.selected)}const o=t.closest(".vue-flow__edge");if(o){const e=o.getAttribute("data-id"),t=i(e);t&&(t.selected=!t.selected)}}})),h({nodes:B.nodes,edges:B.edges})})),(e,n)=>(t.openBlock(),t.createBlock(t.unref(ra),{tabindex:0,nodes:B.nodes,edges:B.edges,"fit-view-on-init":!0,"min-zoom":B.minZoom<1?1:B.minZoom,"max-zoom":B.maxZoom>10?10:B.maxZoom,"snap-to-grid":!0,"snap-grid":B.snapGrid,"connection-line-options":{},"delete-key-code":null,"selection-key-code":"Control","multi-selection-key-code":"Control","select-nodes-on-drag":!1,onConnect:I,onNodeDragStart:t.unref(v),onNodeDragStop:t.unref(m),onDragover:t.unref(E),onDragleave:t.unref(C),onDrop:t.unref(N),onNodeClick:T,onEdgeClick:$,onKeyup:z},{"node-custom":t.withCtx((o=>[t.createVNode(gd,{id:o.id,data:o.data,"node-label-key":B.nodeLabelKey,"node-type-key":B.nodeTypeKey,"use-node-toolbar":B.useNodeToolbar,"node-toolbar-position":B.nodeToolbarPosition,"node-toolbar-offset":B.nodeToolbarOffset,"node-toolbar-show-add":B.nodeToolbarShowAdd,"node-toolbar-show-delete":B.nodeToolbarShowDelete,"node-toolbar-show-edit":B.nodeToolbarShowEdit,"node-toolbar-show-copy":B.nodeToolbarShowCopy,"node-toolbar-show-execution":B.nodeToolbarShowExecution,onAddNode:n[3]||(n[3]=t=>e.$emit("addNode",t)),onDeleteNode:n[4]||(n[4]=t=>e.$emit("deleteNode",t)),onEditNode:n[5]||(n[5]=t=>e.$emit("editNode",t)),onCopyNode:n[6]||(n[6]=t=>e.$emit("copyNode",t)),onExecute:n[7]||(n[7]=t=>e.$emit("execute",t))},null,8,["id","data","node-label-key","node-type-key","use-node-toolbar","node-toolbar-position","node-toolbar-offset","node-toolbar-show-add","node-toolbar-show-delete","node-toolbar-show-edit","node-toolbar-show-copy","node-toolbar-show-execution"])])),"edge-custom":t.withCtx((e=>[t.createVNode(yd,t.mergeProps(e,{id:e.id,"source-x":e.sourceX,"source-y":e.sourceY,"target-x":e.targetX,"target-y":e.targetY,"source-position":e.sourcePosition,"target-position":e.targetPosition,label:e.label,labelBgBorderRadius:e.labelBgBorderRadius,labelBgPadding:e.labelBgPadding,labelBgStyle:e.labelBgStyle,labelStyle:e.labelStyle,"edge-type":B.edgeType,"marker-type":B.markerType}),null,16,["id","source-x","source-y","target-x","target-y","source-position","target-position","label","labelBgBorderRadius","labelBgPadding","labelBgStyle","labelStyle","edge-type","marker-type"])])),default:t.withCtx((()=>[t.createVNode(Na,{"bg-color":B.bgColor,"show-bg-pattern":B.showBgPattern,"bg-pattern-gap":B.bgPatternGap,"bg-pattern-size":B.bgPatternSize,"bg-pattern-color":B.bgPatternColor},null,8,["bg-color","show-bg-pattern","bg-pattern-gap","bg-pattern-size","bg-pattern-color"]),t.createVNode(ac,{"use-mini-map":B.useMiniMap,"mini-map-position":B.miniMapPosition,"mini-map-node-color":B.miniMapNodeColor,"mini-map-node-stroke-color":B.miniMapNodeStrokeColor,"mini-map-node-class-name":B.miniMapNodeClassName,"mini-map-node-border-radius":B.miniMapNodeBorderRadius,"mini-map-node-stroke-width":B.miniMapNodeStrokeWidth,"mini-map-mask-color":B.miniMapMaskColor,"mini-map-pannable":B.miniMapPannable,"mini-map-zoomable":B.miniMapZoomable},null,8,["use-mini-map","mini-map-position","mini-map-node-color","mini-map-node-stroke-color","mini-map-node-class-name","mini-map-node-border-radius","mini-map-node-stroke-width","mini-map-mask-color","mini-map-pannable","mini-map-zoomable"]),t.createVNode(vd,{"use-control":B.useControl,"control-position":B.controlPosition,"control-show-zoom":B.controlShowZoom,"control-show-fit-view":B.controlShowFitView,"control-show-interactive":B.controlShowInteractive,"control-show-undo-redo":B.controlShowUndoRedo,"control-show-screen-shot":B.controlShowScreenShot,"control-show-theme":B.controlShowTheme,"control-show-save":B.controlShowSave,"control-show-execution":B.controlShowExecution,onSave:n[0]||(n[0]=t=>e.$emit("save",t)),onExecuteAll:n[1]||(n[1]=t=>e.$emit("executeAll",t)),onSwitchTheme:n[2]||(n[2]=t=>e.$emit("switchTheme",t))},null,8,["use-control","control-position","control-show-zoom","control-show-fit-view","control-show-interactive","control-show-undo-redo","control-show-screen-shot","control-show-theme","control-show-save","control-show-execution"])])),_:1},8,["nodes","edges","min-zoom","max-zoom","snap-grid","onNodeDragStart","onNodeDragStop","onDragover","onDragleave","onDrop"]))}}),bd={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function _d(e,n){return t.openBlock(),t.createElementBlock("svg",bd,n[0]||(n[0]=[t.createElementVNode("path",{d:"M125.7 160H176c17.7 0 32 14.3 32 32s-14.3 32-32 32H48c-17.7 0-32-14.3-32-32V64c0-17.7 14.3-32 32-32s32 14.3 32 32v51.2l17.6-17.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3-163.8-62.5-226.3 0z"},null,-1)]))}const xd={render:_d},kd=Object.freeze(Object.defineProperty({__proto__:null,default:xd,render:_d},Symbol.toStringTag,{value:"Module"})),Sd={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function Ed(e,n){return t.openBlock(),t.createElementBlock("svg",Sd,n[0]||(n[0]=[t.createElementVNode("path",{d:"M386.3 160H336c-17.7 0-32 14.3-32 32s14.3 32 32 32h128c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32s-32 14.3-32 32v51.2l-17.6-17.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8 229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3 163.8-62.5 226.3 0z"},null,-1)]))}const Nd={render:Ed},Cd=Object.freeze(Object.defineProperty({__proto__:null,default:Nd,render:Ed},Symbol.toStringTag,{value:"Module"})),Md={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function Bd(e,n){return t.openBlock(),t.createElementBlock("svg",Md,n[0]||(n[0]=[t.createElementVNode("path",{d:"M149.1 64.8 138.7 96H64c-35.3 0-64 28.7-64 64v256c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64h-74.7l-10.4-31.2C356.4 45.2 338.1 32 317.4 32H194.6c-20.7 0-39 13.2-45.5 32.8M256 192a96 96 0 1 1 0 192 96 96 0 1 1 0-192"},null,-1)]))}const Pd={render:Bd},Td=Object.freeze(Object.defineProperty({__proto__:null,default:Pd,render:Bd},Symbol.toStringTag,{value:"Module"})),$d={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function Id(e,n){return t.openBlock(),t.createElementBlock("svg",$d,n[0]||(n[0]=[t.createElementVNode("path",{d:"M208 0h124.1C344.8 0 357 5.1 366 14.1L433.9 82c9 9 14.1 21.2 14.1 33.9V336c0 26.5-21.5 48-48 48H208c-26.5 0-48-21.5-48-48V48c0-26.5 21.5-48 48-48M48 128h80v64H64v256h192v-32h64v48c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V176c0-26.5 21.5-48 48-48"},null,-1)]))}const zd={render:Id},Ad=Object.freeze(Object.defineProperty({__proto__:null,default:zd,render:Id},Symbol.toStringTag,{value:"Module"})),Dd={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function Vd(e,n){return t.openBlock(),t.createElementBlock("svg",Dd,n[0]||(n[0]=[t.createElementVNode("path",{d:"M64 32C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h320c35.3 0 64-28.7 64-64V173.3c0-17-6.7-33.3-18.7-45.3L352 50.7c-12-12-28.3-18.7-45.3-18.7zm0 96c0-17.7 14.3-32 32-32h192c17.7 0 32 14.3 32 32v64c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32zm160 160a64 64 0 1 1 0 128 64 64 0 1 1 0-128"},null,-1)]))}const Od={render:Vd},Rd=Object.freeze(Object.defineProperty({__proto__:null,default:Od,render:Vd},Symbol.toStringTag,{value:"Module"})),Ld={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"};function Hd(e,n){return t.openBlock(),t.createElementBlock("svg",Ld,n[0]||(n[0]=[t.createElementVNode("path",{d:"M223.5 32C100 32 0 132.3 0 256s100 224 223.5 224c60.6 0 115.5-24.2 155.8-63.4 5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6-96.9 0-175.5-78.8-175.5-176 0-65.8 36-123.1 89.3-153.3 6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"},null,-1)]))}const Fd={render:Hd},Yd=Object.freeze(Object.defineProperty({__proto__:null,default:Fd,render:Hd},Symbol.toStringTag,{value:"Module"})),Gd={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function Xd(e,n){return t.openBlock(),t.createElementBlock("svg",Gd,n[0]||(n[0]=[t.createElementVNode("path",{d:"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0l-30.1 30 97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5l167.3-167.4-98-98zM96 64c-53 0-96 43-96 96v256c0 53 43 96 96 96h256c53 0 96-43 96-96v-96c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32z"},null,-1)]))}const Ud={render:Xd},jd=Object.freeze(Object.defineProperty({__proto__:null,default:Ud,render:Xd},Symbol.toStringTag,{value:"Module"})),qd={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"};function Zd(e,n){return t.openBlock(),t.createElementBlock("svg",qd,n[0]||(n[0]=[t.createElementVNode("path",{d:"M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80v352c0 17.4 9.4 33.4 24.5 41.9S58.2 482 73 473l288-176c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41z"},null,-1)]))}const Kd={render:Zd},Wd=Object.freeze(Object.defineProperty({__proto__:null,default:Kd,render:Zd},Symbol.toStringTag,{value:"Module"})),Qd={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function Jd(e,n){return t.openBlock(),t.createElementBlock("svg",Qd,n[0]||(n[0]=[t.createElementVNode("path",{d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32v144H48c-17.7 0-32 14.3-32 32s14.3 32 32 32h144v144c0 17.7 14.3 32 32 32s32-14.3 32-32V288h144c17.7 0 32-14.3 32-32s-14.3-32-32-32H256z"},null,-1)]))}const ef={render:Jd},tf=Object.freeze(Object.defineProperty({__proto__:null,default:ef,render:Jd},Symbol.toStringTag,{value:"Module"})),nf={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function of(e,n){return t.openBlock(),t.createElementBlock("svg",nf,n[0]||(n[0]=[t.createElementVNode("path",{d:"M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391l-19.9 107.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121l19.9-107.9c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1l90.3-62.3c4.5-3.1 10.2-3.7 15.2-1.6M160 256a96 96 0 1 1 192 0 96 96 0 1 1-192 0m224 0a128 128 0 1 0-256 0 128 128 0 1 0 256 0"},null,-1)]))}const rf={render:of},af=Object.freeze(Object.defineProperty({__proto__:null,default:rf,render:of},Symbol.toStringTag,{value:"Module"})),lf={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function uf(e,n){return t.openBlock(),t.createElementBlock("svg",lf,n[0]||(n[0]=[t.createElementVNode("path",{d:"M135.2 17.7 128 32H32C14.3 32 0 46.3 0 64s14.3 32 32 32h384c17.7 0 32-14.3 32-32s-14.3-32-32-32h-96l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7M416 128H32l21.2 339c1.6 25.3 22.6 45 47.9 45h245.8c25.3 0 46.3-19.7 47.9-45z"},null,-1)]))}const sf={render:uf},cf=Object.freeze(Object.defineProperty({__proto__:null,default:sf,render:uf},Symbol.toStringTag,{value:"Module"}));e.default=wd,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
